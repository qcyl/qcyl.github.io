<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="qczyl's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/avatar.png?v=5.1.1" />






<meta name="description" content="æœ¬æ–‡ä¸»è¦æ˜¯åŸºäºgithubä¸Šä¸€ä¸ªSwift 4.0æ–°ç‰¹æ€§çš„å¼€æºé¡¹ç›®whats-new-in-swift-4çš„è§£è¯»ã€‚ 1.One-sided ranges12let numbers = [1,2,3,4,5,6,7,8,9,10]numbers[5...] // instead of numbers[5..&amp;lt;numbers.endIndex] 2.Strings æ›´å¿«çš„å­—ç¬¦å¤„ç†é€Ÿåº¦   Swi">
<meta property="og:type" content="article">
<meta property="og:title" content="Swift 4.0 æ–°ç‰¹æ€§">
<meta property="og:url" content="http://blog.qczyl.club/2017/10/17/Swift 4.0 æ–°ç‰¹æ€§/index.html">
<meta property="og:site_name" content="qczyl&#39;s Blog">
<meta property="og:description" content="æœ¬æ–‡ä¸»è¦æ˜¯åŸºäºgithubä¸Šä¸€ä¸ªSwift 4.0æ–°ç‰¹æ€§çš„å¼€æºé¡¹ç›®whats-new-in-swift-4çš„è§£è¯»ã€‚ 1.One-sided ranges12let numbers = [1,2,3,4,5,6,7,8,9,10]numbers[5...] // instead of numbers[5..&amp;lt;numbers.endIndex] 2.Strings æ›´å¿«çš„å­—ç¬¦å¤„ç†é€Ÿåº¦   Swi">
<meta property="og:image" content="http://ocga9x543.bkt.clouddn.com/QQ20170609-182237@2x.png">
<meta property="og:updated_time" content="2017-10-17T10:04:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Swift 4.0 æ–°ç‰¹æ€§">
<meta name="twitter:description" content="æœ¬æ–‡ä¸»è¦æ˜¯åŸºäºgithubä¸Šä¸€ä¸ªSwift 4.0æ–°ç‰¹æ€§çš„å¼€æºé¡¹ç›®whats-new-in-swift-4çš„è§£è¯»ã€‚ 1.One-sided ranges12let numbers = [1,2,3,4,5,6,7,8,9,10]numbers[5...] // instead of numbers[5..&amp;lt;numbers.endIndex] 2.Strings æ›´å¿«çš„å­—ç¬¦å¤„ç†é€Ÿåº¦   Swi">
<meta name="twitter:image" content="http://ocga9x543.bkt.clouddn.com/QQ20170609-182237@2x.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"hide","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.qczyl.club/2017/10/17/Swift 4.0 æ–°ç‰¹æ€§/"/>





  <title>Swift 4.0 æ–°ç‰¹æ€§ | qczyl's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?daaad9be55ecc7fd62df82ede675e5e3";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">qczyl's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://blog.qczyl.club/2017/10/17/Swift 4.0 æ–°ç‰¹æ€§/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="qczyl">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qczyl's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Swift 4.0 æ–°ç‰¹æ€§</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-10-17T17:52:41+08:00">
                2017-10-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>æœ¬æ–‡ä¸»è¦æ˜¯åŸºäºgithubä¸Šä¸€ä¸ªSwift 4.0æ–°ç‰¹æ€§çš„å¼€æºé¡¹ç›®<a href="https://github.com/ole/whats-new-in-swift-4" target="_blank" rel="external">whats-new-in-swift-4</a>çš„è§£è¯»ã€‚</p>
<h2 id="1-One-sided-ranges"><a href="#1-One-sided-ranges" class="headerlink" title="1.One-sided ranges"></a>1.One-sided ranges</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">let numbers = [1,2,3,4,5,6,7,8,9,10]</div><div class="line">numbers[5...] // instead of numbers[5..&lt;numbers.endIndex]</div></pre></td></tr></table></figure>
<h2 id="2-Strings"><a href="#2-Strings" class="headerlink" title="2.Strings"></a>2.Strings</h2><ul>
<li><p>æ›´å¿«çš„å­—ç¬¦å¤„ç†é€Ÿåº¦</p>
<p>  Swift 4 çš„å­—ç¬¦ä¸²ä¼˜åŒ–äº†åº•å±‚å®ç°ï¼Œå¯¹äºè‹±è¯­ã€æ³•è¯­ã€å¾·è¯­ã€è¥¿ç­ç‰™è¯­çš„å¤„ç†é€Ÿåº¦æé«˜äº† 3.5 å€ï¼Œå¯¹äºç®€ä½“ä¸­æ–‡ã€æ—¥è¯­çš„å¤„ç†é€Ÿåº¦æé«˜äº† 2.5 å€</p>
</li>
<li><p>Multi-line string literals å¤šè¡Œå­—ç¬¦ä¸²å­—é¢é‡</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// Swift 4 å¯ä»¥æŠŠå­—ç¬¦ä¸²å†™åœ¨ä¸€å¯¹ &quot;&quot;&quot; ä¸­ï¼Œè¿™æ ·å­—ç¬¦ä¸²å°±å¯ä»¥å†™æˆå¤šè¡Œã€‚</div><div class="line">let multilineString = &quot;&quot;&quot;</div><div class="line">    This is a multi-line string.</div><div class="line">    You don&apos;t have to escape &quot;quotes&quot; in here.</div><div class="line">    String interpolation works as expected: 2 + 3 = \(2 + 3)</div><div class="line">    The position of the closing delimiter</div><div class="line">      controls whitespace stripping.</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    </div><div class="line">// å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ \ æ¥è½¬ä¹‰æ¢è¡Œ</div><div class="line">let escapedNewline = &quot;&quot;&quot;</div><div class="line">    To omit a line break, \</div><div class="line">    add a backslash at the end of a line.</div><div class="line">    &quot;&quot;&quot;</div><div class="line">// To omit a line break, add a backslash at the end of a line.</div></pre></td></tr></table></figure>
<ul>
<li><p>å»æ‰ characters</p>
<p>  Swift 3 ä¸­çš„ String éœ€è¦é€šè¿‡ characters å»è°ƒç”¨çš„å±æ€§æ–¹æ³•ï¼Œåœ¨ Swift 4 ä¸­å¯ä»¥é€šè¿‡ String å¯¹è±¡æœ¬èº«ç›´æ¥è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let values = &quot;one,two,three...&quot;</div><div class="line">var i = values.characters.startIndex</div><div class="line">while let comma = values.characters[i...&lt;values.characters.endIndex].index(of: &quot;,&quot;) &#123;</div><div class="line">    if values.characters[i..&lt;comma] == &quot;two&quot; &#123;</div><div class="line">        print(&quot;found it!&quot;)</div><div class="line">    &#125;</div><div class="line">    i = values.characters.index(after: comma)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Swift 4 å¯ä»¥æŠŠä¸Šé¢ä»£ç ä¸­çš„æ‰€æœ‰çš„ characters éƒ½å»æ‰ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let values = &quot;one,two,three...&quot;</div><div class="line">var i = values.startIndex</div><div class="line">while let comma = values[i...&lt;values.endIndex].index(of: &quot;,&quot;) &#123;</div><div class="line">    if values[i..&lt;comma] == &quot;two&quot; &#123;</div><div class="line">        print(&quot;found it!&quot;)</div><div class="line">    &#125;</div><div class="line">    i = values.index(after: comma)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>String å½“åš Collection æ¥ç”¨</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// éå†å­—ç¬¦ä¸²</div><div class="line">let greeting = &quot;Hello, ğŸ˜œ!&quot;</div><div class="line">greeting.count</div><div class="line">for char in greeting &#123;</div><div class="line">    print(char)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// ç¿»è½¬å­—ç¬¦ä¸²</div><div class="line">let abc: String = &quot;abc&quot;</div><div class="line">print(String(abc.reversed()))</div></pre></td></tr></table></figure>
<ul>
<li>Substring</li>
</ul>
<p><img src="http://ocga9x543.bkt.clouddn.com/QQ20170609-182237@2x.png" alt=""></p>
<p>åœ¨ Swift ä¸­ï¼ŒString çš„èƒŒåæœ‰ä¸ª Owner Object æ¥è·Ÿè¸ªå’Œç®¡ç†è¿™ä¸ª Stringï¼ŒString å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç”±å†…å­˜å…¶å®åœ°å€ã€å­—ç¬¦æ•°ã€æŒ‡å‘ Owner Object æŒ‡é’ˆç»„æˆã€‚Owner Object æŒ‡é’ˆæŒ‡å‘ Owner Object å¯¹è±¡ï¼ŒOwner Object å¯¹è±¡æŒæœ‰ String Bufferã€‚å½“å¯¹ String åšå–å­å­—ç¬¦ä¸²æ“ä½œæ—¶ï¼Œå­å­—ç¬¦ä¸²çš„ Owner Object æŒ‡é’ˆä¼šå’ŒåŸå­—ç¬¦ä¸²æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å­å­—ç¬¦ä¸²çš„ Owner Object ä¼šæŒæœ‰åŸ String çš„ Bufferã€‚å½“åŸå­—ç¬¦ä¸²é”€æ¯æ—¶ï¼Œç”±äºåŸå­—ç¬¦ä¸²çš„ Buffer è¢«å­å­—ç¬¦ä¸²çš„ Owner Object æŒæœ‰äº†ï¼ŒåŸå­—ç¬¦ä¸² Buffer å¹¶ä¸ä¼šé‡Šæ”¾ï¼Œé€ æˆæå¤§çš„å†…å­˜æµªè´¹ã€‚</p>
<p>åœ¨ Swift 4 ä¸­ï¼Œåšå–å­ä¸²æ“ä½œçš„ç»“æœæ˜¯ä¸€ä¸ª Substring ç±»å‹ï¼Œå®ƒæ— æ³•ç›´æ¥èµ‹å€¼ç»™éœ€è¦ String ç±»å‹çš„åœ°æ–¹ã€‚å¿…é¡»ç”¨ String() åŒ…ä¸€å±‚ï¼Œç³»ç»Ÿä¼šé€šè¿‡å¤åˆ¶åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œè¿™æ ·åŸå­—ç¬¦ä¸²åœ¨é”€æ¯æ—¶ï¼ŒåŸå­—ç¬¦ä¸²çš„ Buffer å°±å¯ä»¥å®Œå…¨é‡Šæ”¾äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let big = downloadHugeString()</div><div class="line">let small = extractTinyString(from: big)</div><div class="line">mainView.titleLabel.text = small // Swift 4 ç¼–è¯‘æŠ¥é”™</div><div class="line">mainView.titleLabel.text = String(small) // ç¼–è¯‘é€šè¿‡</div></pre></td></tr></table></figure>
<ul>
<li><p>Unicode</p>
<p>  æ”¹å–„äº†åœ¨è®¡ç®—Unicodeå­—ç¬¦é•¿åº¦æ—¶çš„æ­£ç¡®æ€§ã€‚<br>  åœ¨ Unicode ä¸­ï¼Œæœ‰äº›å­—ç¬¦æ˜¯ç”±å‡ ä¸ªå…¶å®ƒå­—ç¬¦ç»„æˆçš„ï¼Œæ¯”å¦‚ Ã© è¿™ä¸ªå­—ç¬¦ï¼Œå®ƒå¯ä»¥ç”¨ \u{E9} æ¥è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨ e å­—ç¬¦å’Œä¸Šé¢ä¸€æ’‡å­—ç¬¦ç»„åˆåœ¨ä¸€èµ·è¡¨ç¤º \u{65}\u{301}ã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var family = &quot;ğŸ‘©&quot;      // &quot;ğŸ‘©&quot;</div><div class="line">family += &quot;\u&#123;200D&#125;ğŸ‘©â€ // &quot;ğŸ‘©â€ğŸ‘©&quot;</div><div class="line">family += &quot;\u&#123;200D&#125;ğŸ‘§â€ //&quot;ğŸ‘©â€ğŸ‘©â€ğŸ‘§&quot;</div><div class="line">family += &quot;\u&#123;200D&#125;ğŸ‘¦â€ //&quot;ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦&quot;</div><div class="line">family.count          //åœ¨swift3ä¸­ï¼Œcount=4ï¼Œåœ¨swift4ä¸­ï¼Œcount=1</div></pre></td></tr></table></figure>
<h2 id="3-Private-declarations-visible-in-same-file-extensions-ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´"><a href="#3-Private-declarations-visible-in-same-file-extensions-ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´" class="headerlink" title="3.Private declarations visible in same-file extensions ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´"></a>3.Private declarations visible in same-file extensions ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´</h2><p>privateä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¯ä»¥åœ¨åŒæ–‡ä»¶ä¸­çš„extensionä¸­è®¿é—®åˆ°ã€‚è·Ÿswift3ä¸­çš„fileprivateç›¸ä¼¼è€Œåˆä¸åŒã€‚ç›¸åŒç‚¹æ˜¯éƒ½å¯ä»¥åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­è®¿é—®åˆ°ï¼Œä¸åŒç‚¹æ˜¯privateä¿®é¥°çš„åªèƒ½åœ¨å½“å‰ç±»å‹çš„extensionä¸­è®¿é—®åˆ°ï¼Œè€Œfileprivateä¿®é¥°çš„ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–çš„ç±»å‹å®šä¹‰å’Œextensionä¸­è®¿é—®åˆ°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">struct SortedArray&lt;Element: Comparable&gt; &#123;</div><div class="line">    private var storage: [Element] = []</div><div class="line">    init(unsorted: [Element]) &#123;</div><div class="line">        storage = unsorted.sorted()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">extension SortedArray &#123;</div><div class="line">    mutating func insert(_ element: Element) &#123;</div><div class="line">        // storage is visible here</div><div class="line">        storage.append(element)</div><div class="line">        storage.sort()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">let array = SortedArray(unsorted: [3,1,2])</div><div class="line"></div><div class="line">// storage is _not_ visible here. It would be if it were fileprivate.</div><div class="line">//array.storage // error: &apos;storage&apos; is inaccessible due to &apos;private&apos; protection level</div></pre></td></tr></table></figure>
<h2 id="4-Key-Paths"><a href="#4-Key-Paths" class="headerlink" title="4.Key Paths"></a>4.Key Paths</h2><p>ç±»ä¼¼Objective-Cé‡Œçš„KVCï¼ŒSwift 4.0é‡Œçš„Key Pathsæ˜¯å¼ºç±»å‹çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">struct Person &#123;</div><div class="line">  var name: String</div><div class="line">&#125;</div><div class="line">struct Book &#123;</div><div class="line">  var title: String</div><div class="line">  var authors: [Person]</div><div class="line">  var primaryAuthor: Person &#123;</div><div class="line">      return authors.first!</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">let abelson = Person(name: &quot;Harold Abelson&quot;)</div><div class="line">let sussman = Person(name: &quot;Gerald Jay Sussman&quot;)</div><div class="line">var sicp = Book(title: &quot;Structure and Interpretation of Computer Programs&quot;, authors: [abelson, sussman])</div></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨key pathsè·å–å¯¹è±¡å€¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sicp[keyPath: \Book.title] </div><div class="line">//Structure and Interpretation of Computer Programs</div></pre></td></tr></table></figure>
<ul>
<li>key paths å¯ä»¥ç”¨äºè®¡ç®—å±æ€§</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sicp[keyPath: \Book.primaryAuthor.name] </div><div class="line">//Harold Abelson</div></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨key pathså¯ä»¥ä¿®æ”¹å€¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sicp[keyPath: \Book.title] = &quot;Swift 4.0â€ </div><div class="line">//sicp.title ç°åœ¨æ˜¯Swift 4.0</div></pre></td></tr></table></figure>
<ul>
<li>key pathsæ˜¯å¯¹è±¡ï¼Œå¯ä»¥è¢«å­˜å‚¨å’Œæ“çºµ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let authorKeyPath = \Book.primaryAuthor</div><div class="line">print(type(of: authorKeyPath)) //KeyPath&lt;Book, Person&gt;</div><div class="line">let nameKeyPath = authorKeyPath.appending(path: \.name) // è¿™ä¸ªå¯ä»¥çœç•¥Bookï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥æ¨æ–­å‡ºç±»å‹</div><div class="line">sicp[keyPath: nameKeyPath] //Harold Abelson</div></pre></td></tr></table></figure>
<ul>
<li>KeyPathå®é™…ä¸Šæ˜¯ä¸€ä¸ªclassï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/// A key path from a specific root type to a specific resulting value type.</div><div class="line">public class KeyPath&lt;Root, Value&gt; : PartialKeyPath&lt;Root&gt; &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>key pathsæš‚æ—¶è¿˜ä¸æ”¯æŒä¸‹æ ‡æ“çºµ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">//sicp[keyPath: \Book.authors[0].name] //ç¼–è¯‘å¤±è´¥</div></pre></td></tr></table></figure>
<h2 id="5-Archival-and-serializationå½’æ¡£å’Œåºåˆ—åŒ–"><a href="#5-Archival-and-serializationå½’æ¡£å’Œåºåˆ—åŒ–" class="headerlink" title="5.Archival and serializationå½’æ¡£å’Œåºåˆ—åŒ–"></a>5.Archival and serializationå½’æ¡£å’Œåºåˆ—åŒ–</h2><p>å½“éœ€è¦å°†ä¸€ä¸ªå¯¹è±¡æŒä¹…åŒ–æ—¶ï¼Œéœ€è¦æŠŠè¿™ä¸ªå¯¹è±¡åºåˆ—åŒ–ï¼Œå¾€å¸¸çš„åšæ³•æ˜¯å®ç° NSCoding åè®®ï¼Œå†™è¿‡çš„äººåº”è¯¥éƒ½çŸ¥é“å®ç° NSCoding åè®®çš„ä»£ç å†™èµ·æ¥å¾ˆç—›è‹¦ï¼Œå°¤å…¶æ˜¯å½“å±æ€§éå¸¸å¤šçš„æ—¶å€™ã€‚</p>
<p>Swift 4 ä¸­å¼•å…¥äº†<code>Codable</code>å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><code>Codable</code>å…¶å®æ˜¯ä¸€ä¸ªç»„åˆåè®®:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public typealias Codable = Decodable &amp; Encodable</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">struct Card: Codable &#123;</div><div class="line">    enum Suit: String, Codable &#123;</div><div class="line">        case clubs, spades, hearts, diamonds</div><div class="line">    &#125;</div><div class="line">    enum Rank: Int, Codable &#123;</div><div class="line">        case ace = 1, two, three, four, five, six, seven, eight, nine, ten, jack, queen, king</div><div class="line">    &#125;</div><div class="line">    var suit: Suit</div><div class="line">    var rank: Rank</div><div class="line">&#125;</div><div class="line">let hand = [Card(suit: .clubs, rank: .ace), Card(suit: .hearts, rank: .queen)]</div></pre></td></tr></table></figure>
<p>Encode æ“ä½œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// json</div><div class="line">var encoder = JSONEncoder()</div><div class="line">let jsonData = try encoder.encode(hand)</div><div class="line">String(data: jsonData, encoding: .utf8)</div><div class="line"></div><div class="line">// plist</div><div class="line">var encoder2 = PropertyListEncoder()</div><div class="line">encoder2.outputFormat = .xml</div><div class="line">let propertyData = try encoder2.encode(hand)</div><div class="line">String(data: propertyData, encoding: .utf8)</div></pre></td></tr></table></figure>
<p>Decode æ“ä½œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// json</div><div class="line">let decoder = JSONDecoder()</div><div class="line">let decodedHand = try decoder.decode([Card].self, from: jsonData)</div><div class="line"></div><div class="line">// plist</div><div class="line">var decoder2 = PropertyListDecoder()</div><div class="line">let hand3 = try decoder2.decode([Card].self, from: propertyData)</div><div class="line">hand3[0].suit //clubs</div></pre></td></tr></table></figure>
<p>æ›´å…¨é¢çš„JSONè§£æè¯·æŸ¥çœ‹<a href="https://bignerdcoding.com/archives/37.html" target="_blank" rel="external">Swift 4 JSON è§£ææŒ‡å—</a></p>
<h2 id="6-Associated-type-constraintså…³è”ç±»å‹çº¦æŸ"><a href="#6-Associated-type-constraintså…³è”ç±»å‹çº¦æŸ" class="headerlink" title="6.Associated type constraintså…³è”ç±»å‹çº¦æŸ"></a>6.Associated type constraintså…³è”ç±»å‹çº¦æŸ</h2><ul>
<li>protocolä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨<code>where</code>è¯­å¥å¯¹å…³è”ç±»å‹è¿›è¡Œçº¦æŸäº†</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">protocol SomeProtocol where Self: UICollectionViewCell &#123;</div><div class="line">&#125;</div><div class="line">// SomeProtocolè¦æ±‚å®ƒçš„å®ç°è€…å¿…é¡»ç»§æ‰¿UICollectionViewCellï¼Œ</div><div class="line">// ä¸æ˜¯éšä¾¿ä¸€ä¸ªç±»å‹éƒ½èƒ½å®ç°SomeProtocol</div></pre></td></tr></table></figure>
<ul>
<li><code>Sequence</code>åè®®æœ‰è‡ªå·±çš„<code>Element associatedtype</code>äº†ï¼Œä¸éœ€è¦å†™<code>Iterator.Element</code>äº†</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">extension Sequence where Element: Numeric &#123;</div><div class="line">    var sum: Element &#123;</div><div class="line">        var result: Element = 0</div><div class="line">        for element in self &#123;</div><div class="line">            result += element</div><div class="line">        &#125;</div><div class="line">        return result</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">[1,2,3,4].sum</div></pre></td></tr></table></figure>
<h2 id="7-Dictionary-and-Set-enhancements"><a href="#7-Dictionary-and-Set-enhancements" class="headerlink" title="7.Dictionary and Set enhancements"></a>7.Dictionary and Set enhancements</h2><ul>
<li>ä½¿ç”¨key-value sequenceåˆå§‹åŒ–Dictionary</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let names = [&quot;Cagney&quot;, &quot;Lacey&quot;, &quot;Bensenâ€]</div><div class="line">let dict = Dictionary(uniqueKeysWithValues: zip(1..., names))</div><div class="line">//[2: &quot;Lacey&quot;, 3: &quot;Bensen&quot;, 1: &quot;Cagneyâ€]</div></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœkeyå­˜åœ¨é‡å¤çš„æƒ…å†µï¼Œä½¿ç”¨ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let users = [(1, &quot;Cagney&quot;), (2, &quot;Lacey&quot;), (1, &quot;Bensenâ€)] </div><div class="line">//zipå‡½æ•°çš„ä½œç”¨å°±æ˜¯æŠŠä¸¤ä¸ªSequenceåˆå¹¶æˆä¸€ä¸ªkey-valueå…ƒç»„çš„Sequence</div><div class="line">let dict = Dictionary(users, uniquingKeysWith: &#123;</div><div class="line">  (first, second) in</div><div class="line">  print(first, second)</div><div class="line">  return first</div><div class="line">&#125;)</div><div class="line">//[2: &quot;Lacey&quot;, 1: &quot;Cagneyâ€]</div></pre></td></tr></table></figure>
<ul>
<li>merge åˆå¹¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">let defaults = [&quot;foo&quot;: false, &quot;bar&quot;: false, &quot;baz&quot;: false]</div><div class="line">var options = [&quot;foo&quot;: true, &quot;bar&quot;: false]</div><div class="line">// æŒ‰ç…§mergeå‡½æ•°çš„æ³¨é‡Šåº”è¯¥æ˜¯å¦‚ä¸‹å†™æ³•ï¼Œä½†æ˜¯è¿™ç§å†™æ³•ä¼šæŠ¥é”™error: generic parameter &apos;S&apos; could not be inferred</div><div class="line">//let mergedOptions = options.merge(defaults) &#123; (old, _) in old &#125;</div><div class="line">// éœ€è¦æ›¿æ¢æˆ</div><div class="line">options.merge(defaults.map &#123; $0 &#125;) &#123; (old, _) in old &#125;options</div><div class="line">//[&quot;bar&quot;: false, &quot;baz&quot;: false, &quot;foo&quot;: true]</div></pre></td></tr></table></figure>
<ul>
<li><p>å¸¦é»˜è®¤å€¼çš„ä¸‹æ ‡æ“ä½œ</p>
<p>  ä½¿ç”¨ä¸‹æ ‡å–æŸä¸ªkeyå€¼æ—¶ï¼Œå¯ä»¥ä¼ ä¸€ä¸ªdefaultå‚æ•°ä½œä¸ºé»˜è®¤å€¼ï¼Œå½“è¿™ä¸ªkeyä¸å­˜åœ¨æ—¶ï¼Œä¼šè¿”å›è¿™ä¸ªé»˜è®¤å€¼</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">let source = &quot;how now brown cow&quot;</div><div class="line">var frequencies: [Character: Int] = [:]</div><div class="line">for c in source &#123;</div><div class="line">  frequencies[c, default: 0] += 1</div><div class="line">&#125;</div><div class="line">print(frequencies)</div><div class="line">//[&quot;b&quot;: 1, &quot;w&quot;: 4, &quot;r&quot;: 1, &quot;c&quot;: 1, &quot;n&quot;: 2, &quot;o&quot;: 4, &quot; &quot;: 3, &quot;h&quot;: 1]</div></pre></td></tr></table></figure>
<ul>
<li>mapå’Œfilterå‡½æ•°è¿”å›å€¼ç±»å‹æ˜¯Dictionaryï¼Œè€Œä¸æ˜¯Array</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let filtered = dict.filter &#123;</div><div class="line">  $0.key % 2 == 0</div><div class="line">&#125;</div><div class="line">filtered //[2: &quot;Lacey&quot;]</div><div class="line">let mapped = dict.mapValues &#123; value in</div><div class="line">  value.uppercased()</div><div class="line">&#125;</div><div class="line">mapped //[2: &quot;LACEY&quot;, 1: &quot;CAGNEYâ€]</div></pre></td></tr></table></figure>
<ul>
<li>å¯¹Sequenceè¿›è¡Œåˆ†ç»„</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let contacts = [&quot;Julia&quot;, &quot;Susan&quot;, &quot;John&quot;, &quot;Alice&quot;, &quot;Alex&quot;]</div><div class="line">let grouped = Dictionary(grouping: contacts, by: &#123; $0.first! &#125;)</div><div class="line">print(grouped)</div><div class="line">//[&quot;J&quot;: [&quot;Julia&quot;, &quot;John&quot;], &quot;S&quot;: [&quot;Susan&quot;], &quot;A&quot;: [&quot;Alice&quot;, &quot;Alex&quot;]]</div></pre></td></tr></table></figure>
<h2 id="8-MutableCollection-swapAt-method"><a href="#8-MutableCollection-swapAt-method" class="headerlink" title="8.MutableCollection.swapAt method"></a>8.MutableCollection.swapAt method</h2><p>æ–°å¢çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºäº¤æ¢MutableCollectionä¸­çš„ä¸¤ä¸ªä½ç½®çš„å…ƒç´ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var numbers = [1,2,3,4,5]</div><div class="line">numbers.swapAt(0,1) </div><div class="line">//[2, 1, 3, 4, 5]</div></pre></td></tr></table></figure>
<h2 id="9-Generic-subscriptsæ³›å‹ä¸‹æ ‡"><a href="#9-Generic-subscriptsæ³›å‹ä¸‹æ ‡" class="headerlink" title="9.Generic subscriptsæ³›å‹ä¸‹æ ‡"></a>9.Generic subscriptsæ³›å‹ä¸‹æ ‡</h2><p>æœ‰æ—¶å€™ä¼šå†™ä¸€äº›æ•°æ®å®¹å™¨ï¼ŒSwift æ”¯æŒé€šè¿‡ä¸‹æ ‡æ¥è¯»å†™å®¹å™¨ä¸­çš„æ•°æ®ï¼Œä½†æ˜¯å¦‚æœå®¹å™¨ç±»ä¸­çš„æ•°æ®ç±»å‹å®šä¹‰ä¸ºæ³›å‹ï¼Œä»¥å‰çš„ä¸‹æ ‡è¯­æ³•å°±åªèƒ½è¿”å› Anyï¼Œåœ¨å–å‡ºå€¼åéœ€è¦ç”¨ as? æ¥è½¬æ¢ç±»å‹ã€‚Swift 4 å®šä¹‰ä¸‹æ ‡ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">struct GenericDictionary&lt;Key: Hashable, Value&gt; &#123;</div><div class="line">    private var data: [Key: Value]</div><div class="line">    </div><div class="line">    init(data: [Key: Value]) &#123;</div><div class="line">        self.data = data</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    subscript&lt;T&gt;(key: Key) -&gt; T? &#123;</div><div class="line">        return data[key] as? T</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">let dictionary = GenericDictionary(data: [&quot;Name&quot;: &quot;Xiaoming&quot;])</div><div class="line">let name: String? = dictionary[&quot;Name&quot;] // ä¸éœ€è¦å†å†™ as? String</div></pre></td></tr></table></figure>
<h2 id="10-NSNumber-bridging-and-Numeric-types"><a href="#10-NSNumber-bridging-and-Numeric-types" class="headerlink" title="10.NSNumber bridging and Numeric types"></a>10.NSNumber bridging and Numeric types</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">let n = NSNumber(value: 999)</div><div class="line">let v = n as? UInt8 // Swift 4: nil, Swift 3: 231</div></pre></td></tr></table></figure>
<p>åœ¨ Swift 4 ä¸­ï¼ŒæŠŠä¸€ä¸ªå€¼ä¸º 999 çš„ NSNumber è½¬æ¢ä¸º UInt8 åï¼Œèƒ½æ­£ç¡®çš„è¿”å› nilï¼Œè€Œåœ¨ Swift 3 ä¸­ä¼šä¸å¯é¢„æ–™çš„è¿”å› 231ã€‚</p>
<h2 id="11-å‡å°‘éšå¼-objc-è‡ªåŠ¨æ¨æ–­"><a href="#11-å‡å°‘éšå¼-objc-è‡ªåŠ¨æ¨æ–­" class="headerlink" title="11.å‡å°‘éšå¼ @objc è‡ªåŠ¨æ¨æ–­"></a>11.å‡å°‘éšå¼ @objc è‡ªåŠ¨æ¨æ–­</h2><p>åœ¨é¡¹ç›®ä¸­æƒ³æŠŠ Swift å†™çš„ API æš´éœ²ç»™ Objective-C è°ƒç”¨ï¼Œéœ€è¦å¢åŠ  @objcã€‚åœ¨ Swift 3 ä¸­ï¼Œç¼–è¯‘å™¨ä¼šåœ¨å¾ˆå¤šåœ°æ–¹ä¸ºæˆ‘ä»¬éšå¼çš„åŠ ä¸Š @objcï¼Œä¾‹å¦‚å½“ä¸€ä¸ªç±»ç»§æ‰¿äº NSObjectï¼Œé‚£ä¹ˆè¿™ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè¢«éšå¼çš„åŠ ä¸Š @objcã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">class MyClass: NSObject &#123;</div><div class="line">    func print() &#123; ... &#125; // åŒ…å«éšå¼çš„ @objc</div><div class="line">    func show() &#123; ... &#125; // åŒ…å«éšå¼çš„ @objc</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å¾ˆå¤šå¹¶ä¸éœ€è¦æš´éœ²ç»™ Objective-C ä¹Ÿè¢«åŠ ä¸Šäº† @objcã€‚å¤§é‡ @objc ä¼šå¯¼è‡´äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°çš„å¢åŠ ã€‚</p>
<p>åœ¨ Swift 4 ä¸­ï¼Œéšå¼ @objc è‡ªåŠ¨æ¨æ–­åªä¼šå‘ç”Ÿåœ¨å¾ˆå°‘çš„å½“å¿…é¡»è¦ä½¿ç”¨ @objc çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>å¤å†™çˆ¶ç±»çš„ Objective-C æ–¹æ³•</li>
<li>ç¬¦åˆä¸€ä¸ª Objective-C çš„åè®®<br>å…¶å®ƒå¤§å¤šæ•°åœ°æ–¹å¿…é¡»æ‰‹å·¥æ˜¾ç¤ºçš„åŠ ä¸Š @objcã€‚</li>
</ol>
<p>å‡å°‘äº†éšå¼ @objc è‡ªåŠ¨æ¨æ–­åï¼ŒApple Music app çš„åŒ…å¤§å°å‡å°‘äº† 5.7%ã€‚</p>
<h2 id="12-ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹"><a href="#12-ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹" class="headerlink" title="12.ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹"></a>12.ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹</h2><p>åè®®ä¸åè®®å¯ä»¥ç»„åˆï¼Œåè®®ä¸classä¹Ÿå¯ä»¥ç»„åˆ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">protocol HeaderView &#123;&#125;</div><div class="line"></div><div class="line">class ViewController: UIViewController &#123;</div><div class="line">    let header: UIView &amp; HeaderView</div><div class="line"></div><div class="line">    init(header: UIView &amp; HeaderView) &#123;</div><div class="line">        self.header = header</div><div class="line">        super.init(nibName: nil, bundle: nil)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    required init(coder decoder: NSCoder) &#123;</div><div class="line">        fatalError(&quot;not implemented&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// Can&apos;t pass in a simple UIView that doesn&apos;t conform to the protocol</div><div class="line">//ViewController(header: UIView())</div><div class="line">// error: argument type &apos;UIView&apos; does not conform to expected type &apos;UIView &amp; HeaderView&apos;</div><div class="line"></div><div class="line">// Must pass in an NSView (subclass) that also conforms to the protocol</div><div class="line">extension UIImageView: HeaderView &#123;&#125;</div><div class="line"></div><div class="line">ViewController(header: UIImageView()) // works</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        
<div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/wechat_qrcode.jpg" alt="qczyl wechat" style="width: 200px; max-width: 100%;"/>
    <div>æ¬¢è¿å…³æ³¨ã€Œqczylã€ï¼Œè·å–æœ¬ç«™æœ€æ–°å†…å®¹ã€‚</div>
</div>


      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div></div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>èµ</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/wechat_pay.png" alt="qczyl WeChat Pay"/>
          <p>å¾®ä¿¡æ‰“èµ</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/ali_pay.png" alt="qczyl Alipay"/>
          <p>æ”¯ä»˜å®æ‰“èµ</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/07/27/æ•°æ®é©±åŠ¨çš„TableViewï¼šQCListView_Swift/" rel="next" title="æ•°æ®é©±åŠ¨çš„TableViewï¼šQCListView_Swift">
                <i class="fa fa-chevron-left"></i> æ•°æ®é©±åŠ¨çš„TableViewï¼šQCListView_Swift
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/10/18/å¼€å§‹ä½¿ç”¨Gitå§/" rel="prev" title="å¼€å§‹ä½¿ç”¨Gitå§">
                å¼€å§‹ä½¿ç”¨Gitå§ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="qczyl" />
          <p class="site-author-name" itemprop="name">qczyl</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/qcyl" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/f85c446e6d01" target="_blank" title="ç®€ä¹¦">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  ç®€ä¹¦
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-One-sided-ranges"><span class="nav-number">1.</span> <span class="nav-text">1.One-sided ranges</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Strings"><span class="nav-number">2.</span> <span class="nav-text">2.Strings</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Private-declarations-visible-in-same-file-extensions-ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´"><span class="nav-number">3.</span> <span class="nav-text">3.Private declarations visible in same-file extensions ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Key-Paths"><span class="nav-number">4.</span> <span class="nav-text">4.Key Paths</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Archival-and-serializationå½’æ¡£å’Œåºåˆ—åŒ–"><span class="nav-number">5.</span> <span class="nav-text">5.Archival and serializationå½’æ¡£å’Œåºåˆ—åŒ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Associated-type-constraintså…³è”ç±»å‹çº¦æŸ"><span class="nav-number">6.</span> <span class="nav-text">6.Associated type constraintså…³è”ç±»å‹çº¦æŸ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Dictionary-and-Set-enhancements"><span class="nav-number">7.</span> <span class="nav-text">7.Dictionary and Set enhancements</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-MutableCollection-swapAt-method"><span class="nav-number">8.</span> <span class="nav-text">8.MutableCollection.swapAt method</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-Generic-subscriptsæ³›å‹ä¸‹æ ‡"><span class="nav-number">9.</span> <span class="nav-text">9.Generic subscriptsæ³›å‹ä¸‹æ ‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-NSNumber-bridging-and-Numeric-types"><span class="nav-number">10.</span> <span class="nav-text">10.NSNumber bridging and Numeric types</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-å‡å°‘éšå¼-objc-è‡ªåŠ¨æ¨æ–­"><span class="nav-number">11.</span> <span class="nav-text">11.å‡å°‘éšå¼ @objc è‡ªåŠ¨æ¨æ–­</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹"><span class="nav-number">12.</span> <span class="nav-text">12.ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">qczyl</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
