<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>qczyl&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.qczyl.club/"/>
  <updated>2017-11-01T07:22:47.000Z</updated>
  <id>http://blog.qczyl.club/</id>
  
  <author>
    <name>qczyl</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>GitLabæ­å»ºåŠæ±‰åŒ–</title>
    <link href="http://blog.qczyl.club/2017/11/01/GitLab%E6%90%AD%E5%BB%BA%E5%8F%8A%E6%B1%89%E5%8C%96/"/>
    <id>http://blog.qczyl.club/2017/11/01/GitLabæ­å»ºåŠæ±‰åŒ–/</id>
    <published>2017-11-01T07:22:47.000Z</published>
    <updated>2017-11-01T07:22:47.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p><a href="http://blog.qczyl.club/2017/10/18/%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8Git%E5%90%A7/">ä¸Šä¸€ç¯‡æ–‡ç« </a>ç®€å•ä»‹ç»äº†Gitçš„ä¼˜ç‚¹ä»¥åŠä½¿ç”¨ã€‚è¿™ä¸€ç¯‡å°±æ¥ä»‹ç»ä¸€ä¸‹GitLabçš„æ­å»ºã€‚</p>
<hr>
<p>ä½œä¸ºå…¬å¸çš„è¯ï¼Œè‚¯å®šä¸å¸Œæœ›è‡ªå·±çš„ä»£ç æ”¾åœ¨åˆ«äººçš„ç½‘ç«™ä¸Šï¼Œæ‰€ä»¥æ­å»ºä¸€ä¸ªè‡ªå·±çš„Gitä»“åº“å°±æ˜¾å¾—ååˆ†å¿…è¦äº†ï¼ˆå½“ç„¶ï¼Œå¦‚æœä½ çš„å…¬å¸ä¸åœ¨æ„çš„è¯ï¼Œé‚£ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼‰ã€‚<a href="https://about.gitlab.com/" target="_blank" rel="external">GitLab</a>å°±æ˜¯ä¸€æ¬¾å¯ä»¥æ­å»ºåœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šçš„Gitä»“åº“ã€‚</p>
<p>è€Œä¸”GitLabçš„æ­å»ºéå¸¸ç®€å•ï¼Œåªéœ€ä¸‰å››æ­¥çš„æ“ä½œå³å¯ã€‚</p>
<ol>
<li><p>é¦–å…ˆï¼Œéœ€è¦ä¸€å°æœåŠ¡å™¨ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„ã€‚</p>
<ul>
<li>ä½†æ˜¯æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„çš„ï¼š</li>
<li>GitLabå®˜ç½‘ä¸Šå¼ºçƒˆæ¨èæ‰¿è½½ GitLab è¿è¡Œçš„æœåŠ¡å™¨ è‡³å°‘åˆ†é…4GBçš„å†…å­˜ ç»™ GitLab ã€‚</li>
<li>æ¨èä½¿ç”¨ä»¥ä¸‹å‡ ç§æ“ä½œç³»ç»Ÿçš„æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨OmnibusåŒ…å®‰è£…æ–¹æ³•ï¼Œæ“ä½œç®€å•ã€‚<img src="http://ocga9x543.bkt.clouddn.com/WX20171101-141806.png" alt=""></li>
</ul>
</li>
<li><p>æ‰“å¼€<a href="https://about.gitlab.com/installation/" target="_blank" rel="external">GitLab</a>æˆ–<a href="https://www.gitlab.cc/installation/" target="_blank" rel="external">GitLabä¸­æ–‡ç½‘</a>ï¼Œé€‰æ‹©å¯¹åº”çš„æ“ä½œç³»ç»Ÿï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œå®‰è£…ã€‚æ¨èä½¿ç”¨<code>OmnibusåŒ…å®‰è£…æ–¹æ³•</code>è¿›è¡Œå®‰è£…ï¼</p>
<ul>
<li>è¿™é‡Œä¹Ÿæœ‰ä¸€äº›æ³¨æ„ç‚¹ï¼š</li>
<li>é€‰æ‹©å¯¹åº”çš„æ“ä½œç³»ç»Ÿåï¼Œä¼šæœ‰ä¸¤ç§ç‰ˆæœ¬çš„å®‰è£…æ–¹æ³•ã€‚</li>
<li><code>Community Edition</code>: ç¤¾åŒºç‰ˆï¼ˆå…è´¹ï¼‰</li>
<li><code>Enterprise Edition</code>: ä¼ä¸šç‰ˆï¼ˆæ”¶è´¹ï¼‰</li>
<li>ä½†æ˜¯è¿™é‡Œæ¨èå®‰è£…<code>ä¼ä¸šç‰ˆ</code>çš„ã€‚<code>ä¼ä¸šç‰ˆ</code>æœªä»˜è´¹çš„è¯ï¼Œå’Œ<code>ç¤¾åŒºç‰ˆ</code>åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»˜è´¹åå¯ç›´æ¥ä½¿ç”¨<code>ä¼ä¸šç‰ˆ</code>çš„åŠŸèƒ½ã€‚è€Œ<code>ç¤¾åŒºç‰ˆ</code>è¦å‡çº§ä¸º<code>ä¼ä¸šç‰ˆ</code>çš„è¯éœ€è¦é‡æ–°éƒ¨ç½²ã€‚</li>
</ul>
</li>
<li><p>é…ç½®SMTP</p>
<ul>
<li><p>è¿›å…¥<code>/etc/gitlab/gitlab.rb</code>æ–‡ä»¶ï¼Œå°†ä»¥ä¸‹é…ç½®çš„æ³¨é‡Šå–æ¶ˆå¹¶ä¿®æ”¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">gitlab_rails[&apos;smtp_enable&apos;] = true</div><div class="line">gitlab_rails[&apos;smtp_address&apos;] = &quot;smtp.server&quot;</div><div class="line">gitlab_rails[&apos;smtp_port&apos;] = 465</div><div class="line">gitlab_rails[&apos;smtp_user_name&apos;] = &quot;smtp user&quot;</div><div class="line">gitlab_rails[&apos;smtp_password&apos;] = &quot;smtp password&quot;</div><div class="line">gitlab_rails[&apos;smtp_domain&apos;] = &quot;example.com&quot;</div><div class="line">gitlab_rails[&apos;smtp_authentication&apos;] = &quot;login&quot;</div><div class="line">gitlab_rails[&apos;smtp_enable_starttls_auto&apos;] = true</div><div class="line">gitlab_rails[&apos;smtp_openssl_verify_mode&apos;] = &apos;peer&apos;</div><div class="line"></div><div class="line"># å¦‚æœä½ ä½¿ç”¨çš„SMTPæœåŠ¡æ˜¯é»˜è®¤çš„ &apos;From:gitlab@localhost&apos;</div><div class="line"># ä½ å¯ä»¥ä¿®æ”¹è¿™é‡Œçš„ &apos;From&apos; çš„å€¼ã€‚</div><div class="line">gitlab_rails[&apos;gitlab_email_from&apos;] = &apos;gitlab@example.com&apos;</div><div class="line">gitlab_rails[&apos;gitlab_email_reply_to&apos;] = &apos;noreply@example.com&apos;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<pre><code>* æ³¨ï¼šä¸Šé¢åªæ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå…·ä½“çš„SMTPé…ç½®è¿˜éœ€è¦è‡ªå·±æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼ˆä¿®æ”¹å®Œé…ç½®åè®°å¾—æ‰§è¡Œ``sudo gitlab-ctl reconfigure``ä½¿é…ç½®ç”Ÿæ•ˆï¼‰
* å¸¸ç”¨çš„SMTPé…ç½®ç¤ºä¾‹å¯ä»¥å»[è¿™é‡Œ](https://docs.gitlab.com.cn/omnibus/settings/smtp.html)æŸ¥çœ‹ã€‚
* é…ç½®å®Œæˆåå¯ä»¥ç”¨Railsæ§åˆ¶å°éªŒè¯é‚®ä»¶æ˜¯å¦èƒ½å‘é€æˆåŠŸã€‚ åœ¨GitLabæœåŠ¡å™¨ä¸Šï¼Œæ‰§è¡Œ``gitlab-rails console``è¿›å…¥æ§åˆ¶å°ã€‚ ç„¶ååœ¨æ§åˆ¶å°æç¤ºç¬¦åè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ å‘é€ä¸€å°æµ‹è¯•é‚®ä»¶ï¼š

<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">	irb(main):003:0&gt; Notify.test_email(&apos;destination_email@address.com&apos;, &apos;Message Subject&apos;, &apos;Message Body&apos;).deliver_now</div><div class="line"># ç¤ºä¾‹</div><div class="line">Notify.test_email(&apos;æ”¶ä»¶äººé‚®ç®±&apos;, &apos;é‚®ä»¶æ ‡é¢˜&apos;, &apos;é‚®ä»¶æ­£æ–‡&apos;).deliver_now</div></pre></td></tr></table></figure>
</code></pre><p>å¦‚æœä½ çš„æµ‹è¯•é‚®ä»¶å‘é€æˆåŠŸäº†çš„è¯ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼ŒGitLabå·²ç»æ­å»ºå®Œæˆäº†ï¼Œå¯ä»¥å°½æƒ…çš„ä½¿ç”¨äº†ã€‚</p>
<hr>
<p>ä¸‹é¢è¦ä»‹ç»çš„å°±æ˜¯GitLabçš„æ±‰åŒ–ï¼Œä¸ªäººæ„Ÿè§‰æ±‰åŒ–çš„ä¹Ÿä¸æ˜¯å¾ˆå®Œæ•´ï¼Œå¯¼è‡´éƒ¨åˆ†é¡µé¢æ˜¯ä¸­æ–‡è‹±æ–‡æ··æ‚ç€çš„ï¼Œå½“ç„¶ï¼Œå¤§éƒ¨åˆ†å·²ç»æ±‰åŒ–äº†ã€‚</p>
<p>é¦–å…ˆç¡®è®¤ç‰ˆæœ¬ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo cat /opt/gitlab/embedded/service/gitlab-rails/VERSION</div></pre></td></tr></table></figure>
<p> v7 ~ v8.8ç‰ˆæœ¬cloneä»¥ä¸‹ä»“åº“åˆ°æœ¬åœ°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://gitlab.com/larryli/gitlab.git</div></pre></td></tr></table></figure>
<p> v8.9ä»¥åç‰ˆæœ¬cloneä»¥ä¸‹ä»“åº“åˆ°æœ¬åœ°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://gitlab.com/xhang/gitlab.git</div></pre></td></tr></table></figure>
<p> cloneä»“åº“æˆåŠŸåï¼Œæ¯”è¾ƒæ±‰åŒ–åˆ†æ”¯å’ŒåŸåˆ†æ”¯ï¼Œå¯¼å‡º patch ç”¨çš„ diff æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// $&#123;gitlab_version&#125;æ›¿æ¢ä¸ºä½ ä¸Šé¢ç¡®å®šçš„ç‰ˆæœ¬</div><div class="line">git diff v$&#123;gitlab_version&#125; v$&#123;gitlab_version&#125;-zh &gt; ../$&#123;gitlab_version&#125;-zh.diff</div></pre></td></tr></table></figure>
<p>æ‰§è¡Œå®Œæ¯•åå°†ç”Ÿæˆå½“å‰ç‰ˆæœ¬çš„è¡¥ä¸æ–‡ä»¶ï¼Œå¦‚<code>9.0.0-zh.diff</code></p>
<p>å¯¼å…¥æ±‰åŒ–è¡¥ä¸ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># åœæ­¢ gitlab</div><div class="line">sudo gitlab-ctl stop</div><div class="line">sudo patch -d /opt/gitlab/embedded/service/gitlab-rails -p1 &lt; 9.0.0-zh.diff</div></pre></td></tr></table></figure>
<p>ç¡®å®šæ²¡æœ‰ .rej æ–‡ä»¶ï¼Œé‡å¯ GitLab å³å¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gitlab-ctl start</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://blog.qczyl.club/2017/10/18/%E5%BC%80%E5%A7%8B%E4%BD%BF
    
    </summary>
    
      <category term="æ‚å­¦" scheme="http://blog.qczyl.club/categories/%E6%9D%82%E5%AD%A6/"/>
    
    
  </entry>
  
  <entry>
    <title>å¼€å§‹ä½¿ç”¨Gitå§</title>
    <link href="http://blog.qczyl.club/2017/10/18/%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8Git%E5%90%A7/"/>
    <id>http://blog.qczyl.club/2017/10/18/å¼€å§‹ä½¿ç”¨Gitå§/</id>
    <published>2017-10-18T08:04:51.000Z</published>
    <updated>2017-10-18T08:04:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ—¢ç„¶è¯´<code>å¼€å§‹ä½¿ç”¨Gitå§</code>ï¼Œé‚£Gitç›¸å¯¹äºSVNæ¥è¯´è‚¯å®šè¿˜æ˜¯æœ‰ä¸€å®šçš„å¥½å¤„çš„ã€‚<br>å¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹<a href="https://my.oschina.net/u/1580062/blog/214850" target="_blank" rel="external">è¯„ã€ŠGITå’ŒSVNä¹‹é—´çš„äº”ä¸ªåŸºæœ¬åŒºåˆ«ã€‹</a>è¿™ç¯‡æ–‡ç« ï¼Œè™½ç„¶æ–‡ç« æ—¶é—´æœ‰ç‚¹ä¹…è¿œï¼Œä½†æ˜¯æˆ‘å¾ˆè®¤åŒé‡Œè¾¹çš„è¯´æ³•ï¼Œç‰¹åˆ«æ˜¯Gitå¯¹åˆ†æ”¯å’Œåˆå¹¶æœ‰æ›´å¥½çš„æ”¯æŒã€‚</p>
<p>è™½ç„¶è¯„è®ºåŒºè¿˜æ˜¯æœ‰å¾ˆå¤šä½¿ç”¨SVNçš„ç”¨æˆ·ä¸æ˜¯å¾ˆèµåŒä»–çš„è§‚ç‚¹ï¼Œè®¤ä¸ºGitçš„æƒé™é—®é¢˜æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œä½†æ˜¯ç°åœ¨å…¬å¸æ­ä¸€ä¸ªGitlabå°±å¯ä»¥å°†æƒé™é—®é¢˜å®Œå…¨æå®šäº†ã€‚</p>
<h3 id="Gitçš„åŸºæœ¬ä½¿ç”¨"><a href="#Gitçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="Gitçš„åŸºæœ¬ä½¿ç”¨"></a>Gitçš„åŸºæœ¬ä½¿ç”¨</h3><p>Gitç›¸å¯¹äºSVNæ¥è¯´å‘½ä»¤ç¡®å®å¤šäº†ä¸€äº›ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡<a href="https://git-scm.com/book/zh/v1/Git-%E5%9F%BA%E7%A1%80" target="_blank" rel="external">GitåŸºç¡€</a>æ¥å­¦ä¹ ä¸€ä¸‹Gitçš„å¸¸ç”¨å‘½ä»¤ã€‚</p>
<p>ä½†æ˜¯ä¸ªäººæ¨èç›´æ¥ä½¿ç”¨<a href="https://www.sourcetreeapp.com/" target="_blank" rel="external">Sourcetree</a>æ¥è¿›è¡Œæ—¥å¸¸çš„å¼€å‘ä½¿ç”¨ï¼Œç®€å•æ–¹ä¾¿å¯è§†åŒ–ã€‚å½“ç„¶å‘½ä»¤è¿˜æ˜¯è¦äº†è§£ä¸€ä¸‹çš„ï¼Œä»¥é˜²ä¸‡ä¸€å•Šï¼</p>
<h3 id="Gitè¿œç¨‹ä»“åº“"><a href="#Gitè¿œç¨‹ä»“åº“" class="headerlink" title="Gitè¿œç¨‹ä»“åº“"></a>Gitè¿œç¨‹ä»“åº“</h3><p>äº†è§£äº†Gitçš„ç®€å•å‘½ä»¤ï¼Œä»¥åŠ<a href="https://www.sourcetreeapp.com/" target="_blank" rel="external">Sourcetree</a>çš„ä½¿ç”¨ï¼Œå¤§å®¶å°±å¯ä»¥<code>å¼€å§‹ä½¿ç”¨Git</code>äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œåªä½¿ç”¨æœ¬åœ°ä»“åº“çš„è¯ï¼Œé‚£å°±ä¸§å¤±äº†Gitçš„çœŸæ­£æ„ä¹‰ã€‚<br>è¿™é‡Œä»‹ç»å‡ æ¬¾Gitè¿œç¨‹ä»“åº“ï¼š</p>
<ol>
<li><a href="https://github.com/" target="_blank" rel="external">GItHub</a>ï¼Œç›¸ä¿¡è¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“çš„ï¼Œä½†æ˜¯åœ¨<code>GItHub</code>ä¸Šä½¿ç”¨ç§æœ‰ä»“åº“æ˜¯æ”¶è´¹çš„</li>
<li><a href="https://gitee.com/" target="_blank" rel="external">ç äº‘</a>ï¼Œå¾ˆå±Œçš„åå­—ï¼Œæ”¯æŒç§ç”¨ä»“åº“åˆ›å»º</li>
<li><a href="https://about.gitlab.com/" target="_blank" rel="external">GitLab</a>ï¼Œå¯æ­å»ºåœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œé€‚åˆå…¬å¸ä½¿ç”¨ï¼Œæœ‰å®Œå–„çš„æƒé™ç³»ç»Ÿ</li>
</ol>
<h3 id="Gitå·¥ä½œæµç¨‹"><a href="#Gitå·¥ä½œæµç¨‹" class="headerlink" title="Gitå·¥ä½œæµç¨‹"></a>Gitå·¥ä½œæµç¨‹</h3><p>å½“åœ¨å›¢é˜Ÿå¼€å‘ä¸­ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ—¶ï¼Œå•†å®šä¸€ä¸ªç»Ÿä¸€çš„å·¥ä½œæµç¨‹æ˜¯è‡³å…³é‡è¦çš„ã€‚Git çš„ç¡®å¯ä»¥åœ¨å„ä¸ªæ–¹é¢åšå¾ˆå¤šäº‹æƒ…ï¼Œç„¶è€Œï¼Œå¦‚æœåœ¨ä½ çš„å›¢é˜Ÿä¸­è¿˜æ²¡æœ‰èƒ½å½¢æˆä¸€ä¸ªç‰¹å®šæœ‰æ•ˆçš„å·¥ä½œæµç¨‹ï¼Œé‚£ä¹ˆæ··ä¹±å°±å°†æ˜¯ä¸å¯é¿å…çš„ã€‚</p>
<p>Gitå·¥ä½œæµç¨‹æœ‰å„å¼å„æ ·çš„ç”¨æ³•ï¼Œä½†ä¹Ÿæ­£å› æ­¤ä½¿å¾—åœ¨å®é™…å·¥ä½œä¸­å¦‚ä½•ä¸Šæ‰‹ä½¿ç”¨å˜å¾—å¾ˆå¤´å¤§ã€‚è¿™é‡Œä»‹ç»å‡ ç§å…¬å¸æœ€å¸¸ç”¨çš„Gitå·¥ä½œæµç¨‹ï¼š</p>
<ol>
<li><a href="http://blog.jobbole.com/76847/" target="_blank" rel="external">é›†ä¸­å¼å·¥ä½œæµ</a>ï¼Œé€‚åˆå¼€å‘å›¢é˜Ÿæˆå‘˜å·²ç»å¾ˆç†Ÿæ‚‰SVNï¼Œæ— éœ€å»é€‚åº”ä¸€ä¸ªå…¨æ–°æµç¨‹</li>
<li><a href="http://blog.jobbole.com/76857/" target="_blank" rel="external">åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµ</a>ï¼Œä»¥é›†ä¸­å¼å·¥ä½œæµä¸ºåŸºç¡€ï¼Œä¸åŒçš„æ˜¯ä¸ºå„ä¸ªæ–°åŠŸèƒ½åˆ†é…ä¸€ä¸ªä¸“é—¨çš„åˆ†æ”¯æ¥å¼€å‘</li>
<li><a href="http://blog.jobbole.com/76867/" target="_blank" rel="external">Gitflowå·¥ä½œæµ</a>ï¼Œé€šè¿‡ä¸ºåŠŸèƒ½å¼€å‘ã€å‘å¸ƒå‡†å¤‡å’Œç»´æŠ¤åˆ†é…ç‹¬ç«‹çš„åˆ†æ”¯ï¼Œè®©å‘å¸ƒè¿­ä»£è¿‡ç¨‹æ›´æµç•…ã€‚æœ€æ—©è¯ç”Ÿã€å¹¶å¾—åˆ°å¹¿æ³›é‡‡ç”¨çš„ä¸€ç§å·¥ä½œæµç¨‹ï¼Œæ¨èçš„æµç¨‹</li>
<li><a href="http://blog.jobbole.com/76861/" target="_blank" rel="external">Forkingå·¥ä½œæµ</a>ï¼Œåˆ†å¸ƒå¼å·¥ä½œæµï¼Œå……åˆ†åˆ©ç”¨äº†Gitåœ¨åˆ†æ”¯å’Œå…‹éš†ä¸Šçš„ä¼˜åŠ¿ã€‚å¯ä»¥å®‰å…¨å¯é åœ°ç®¡ç†å¤§å›¢é˜Ÿçš„å¼€å‘è€…ï¼ˆdeveloperï¼‰ï¼Œå¹¶èƒ½æ¥å—ä¸ä¿¡ä»»è´¡çŒ®è€…ï¼ˆcontributorï¼‰çš„æäº¤</li>
</ol>
<p>ä¸ªäººæ¨èä½¿ç”¨<a href="http://blog.jobbole.com/76867/" target="_blank" rel="external">Gitflowå·¥ä½œæµ</a>ï¼Œè€Œä¸”<a href="https://www.sourcetreeapp.com/" target="_blank" rel="external">Sourcetree</a>ä¹Ÿå¤©ç„¶æ”¯æŒGitflowï¼Œå¹¶æŠŠè¿™ä¸ªæ¨¡å‹çš„å„ç§æ“ä½œé€šè¿‡èœå•å‘½ä»¤çš„å½¢å¼æä¾›äº†å‡ºæ¥ï¼Œå¤§å¤§å‡è½»äº†ä½¿ç”¨äººå‘˜çš„å­¦ä¹ ä½¿ç”¨æˆæœ¬ã€‚</p>
<hr>
<p>ç›¸ä¿¡å¤§å®¶ä½¿ç”¨Gitåï¼Œä¼šæ¸æ¸çš„çˆ±ä¸Šä»–çš„ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ—¢ç„¶è¯´&lt;code&gt;å¼€å§‹ä½¿ç”¨Gitå§&lt;/code&gt;ï¼Œé‚£Gitç›¸å¯¹äºSVNæ¥è¯´è‚¯å®šè¿˜æ˜¯æœ‰ä¸€å®šçš„å¥½å¤„çš„ã€‚&lt;br&gt;å¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹&lt;a href=&quot;https://my.oschina.net/u/1580062/blog/214850&quot; target=&quot;_blank&quot; rel=&quot;e
    
    </summary>
    
      <category term="æ‚å­¦" scheme="http://blog.qczyl.club/categories/%E6%9D%82%E5%AD%A6/"/>
    
    
  </entry>
  
  <entry>
    <title>Swift 4.0 æ–°ç‰¹æ€§</title>
    <link href="http://blog.qczyl.club/2017/10/17/Swift%204.0%20%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    <id>http://blog.qczyl.club/2017/10/17/Swift 4.0 æ–°ç‰¹æ€§/</id>
    <published>2017-10-17T09:52:41.000Z</published>
    <updated>2017-10-17T10:04:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦æ˜¯åŸºäºgithubä¸Šä¸€ä¸ªSwift 4.0æ–°ç‰¹æ€§çš„å¼€æºé¡¹ç›®<a href="https://github.com/ole/whats-new-in-swift-4" target="_blank" rel="external">whats-new-in-swift-4</a>çš„è§£è¯»ã€‚</p>
<h2 id="1-One-sided-ranges"><a href="#1-One-sided-ranges" class="headerlink" title="1.One-sided ranges"></a>1.One-sided ranges</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">let numbers = [1,2,3,4,5,6,7,8,9,10]</div><div class="line">numbers[5...] // instead of numbers[5..&lt;numbers.endIndex]</div></pre></td></tr></table></figure>
<h2 id="2-Strings"><a href="#2-Strings" class="headerlink" title="2.Strings"></a>2.Strings</h2><ul>
<li><p>æ›´å¿«çš„å­—ç¬¦å¤„ç†é€Ÿåº¦</p>
<p>  Swift 4 çš„å­—ç¬¦ä¸²ä¼˜åŒ–äº†åº•å±‚å®ç°ï¼Œå¯¹äºè‹±è¯­ã€æ³•è¯­ã€å¾·è¯­ã€è¥¿ç­ç‰™è¯­çš„å¤„ç†é€Ÿåº¦æé«˜äº† 3.5 å€ï¼Œå¯¹äºç®€ä½“ä¸­æ–‡ã€æ—¥è¯­çš„å¤„ç†é€Ÿåº¦æé«˜äº† 2.5 å€</p>
</li>
<li><p>Multi-line string literals å¤šè¡Œå­—ç¬¦ä¸²å­—é¢é‡</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// Swift 4 å¯ä»¥æŠŠå­—ç¬¦ä¸²å†™åœ¨ä¸€å¯¹ &quot;&quot;&quot; ä¸­ï¼Œè¿™æ ·å­—ç¬¦ä¸²å°±å¯ä»¥å†™æˆå¤šè¡Œã€‚</div><div class="line">let multilineString = &quot;&quot;&quot;</div><div class="line">    This is a multi-line string.</div><div class="line">    You don&apos;t have to escape &quot;quotes&quot; in here.</div><div class="line">    String interpolation works as expected: 2 + 3 = \(2 + 3)</div><div class="line">    The position of the closing delimiter</div><div class="line">      controls whitespace stripping.</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    </div><div class="line">// å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ \ æ¥è½¬ä¹‰æ¢è¡Œ</div><div class="line">let escapedNewline = &quot;&quot;&quot;</div><div class="line">    To omit a line break, \</div><div class="line">    add a backslash at the end of a line.</div><div class="line">    &quot;&quot;&quot;</div><div class="line">// To omit a line break, add a backslash at the end of a line.</div></pre></td></tr></table></figure>
<ul>
<li><p>å»æ‰ characters</p>
<p>  Swift 3 ä¸­çš„ String éœ€è¦é€šè¿‡ characters å»è°ƒç”¨çš„å±æ€§æ–¹æ³•ï¼Œåœ¨ Swift 4 ä¸­å¯ä»¥é€šè¿‡ String å¯¹è±¡æœ¬èº«ç›´æ¥è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let values = &quot;one,two,three...&quot;</div><div class="line">var i = values.characters.startIndex</div><div class="line">while let comma = values.characters[i...&lt;values.characters.endIndex].index(of: &quot;,&quot;) &#123;</div><div class="line">    if values.characters[i..&lt;comma] == &quot;two&quot; &#123;</div><div class="line">        print(&quot;found it!&quot;)</div><div class="line">    &#125;</div><div class="line">    i = values.characters.index(after: comma)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Swift 4 å¯ä»¥æŠŠä¸Šé¢ä»£ç ä¸­çš„æ‰€æœ‰çš„ characters éƒ½å»æ‰ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let values = &quot;one,two,three...&quot;</div><div class="line">var i = values.startIndex</div><div class="line">while let comma = values[i...&lt;values.endIndex].index(of: &quot;,&quot;) &#123;</div><div class="line">    if values[i..&lt;comma] == &quot;two&quot; &#123;</div><div class="line">        print(&quot;found it!&quot;)</div><div class="line">    &#125;</div><div class="line">    i = values.index(after: comma)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>String å½“åš Collection æ¥ç”¨</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// éå†å­—ç¬¦ä¸²</div><div class="line">let greeting = &quot;Hello, ğŸ˜œ!&quot;</div><div class="line">greeting.count</div><div class="line">for char in greeting &#123;</div><div class="line">    print(char)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// ç¿»è½¬å­—ç¬¦ä¸²</div><div class="line">let abc: String = &quot;abc&quot;</div><div class="line">print(String(abc.reversed()))</div></pre></td></tr></table></figure>
<ul>
<li>Substring</li>
</ul>
<p><img src="http://ocga9x543.bkt.clouddn.com/QQ20170609-182237@2x.png" alt=""></p>
<p>åœ¨ Swift ä¸­ï¼ŒString çš„èƒŒåæœ‰ä¸ª Owner Object æ¥è·Ÿè¸ªå’Œç®¡ç†è¿™ä¸ª Stringï¼ŒString å¯¹è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç”±å†…å­˜å…¶å®åœ°å€ã€å­—ç¬¦æ•°ã€æŒ‡å‘ Owner Object æŒ‡é’ˆç»„æˆã€‚Owner Object æŒ‡é’ˆæŒ‡å‘ Owner Object å¯¹è±¡ï¼ŒOwner Object å¯¹è±¡æŒæœ‰ String Bufferã€‚å½“å¯¹ String åšå–å­å­—ç¬¦ä¸²æ“ä½œæ—¶ï¼Œå­å­—ç¬¦ä¸²çš„ Owner Object æŒ‡é’ˆä¼šå’ŒåŸå­—ç¬¦ä¸²æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å­å­—ç¬¦ä¸²çš„ Owner Object ä¼šæŒæœ‰åŸ String çš„ Bufferã€‚å½“åŸå­—ç¬¦ä¸²é”€æ¯æ—¶ï¼Œç”±äºåŸå­—ç¬¦ä¸²çš„ Buffer è¢«å­å­—ç¬¦ä¸²çš„ Owner Object æŒæœ‰äº†ï¼ŒåŸå­—ç¬¦ä¸² Buffer å¹¶ä¸ä¼šé‡Šæ”¾ï¼Œé€ æˆæå¤§çš„å†…å­˜æµªè´¹ã€‚</p>
<p>åœ¨ Swift 4 ä¸­ï¼Œåšå–å­ä¸²æ“ä½œçš„ç»“æœæ˜¯ä¸€ä¸ª Substring ç±»å‹ï¼Œå®ƒæ— æ³•ç›´æ¥èµ‹å€¼ç»™éœ€è¦ String ç±»å‹çš„åœ°æ–¹ã€‚å¿…é¡»ç”¨ String() åŒ…ä¸€å±‚ï¼Œç³»ç»Ÿä¼šé€šè¿‡å¤åˆ¶åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œè¿™æ ·åŸå­—ç¬¦ä¸²åœ¨é”€æ¯æ—¶ï¼ŒåŸå­—ç¬¦ä¸²çš„ Buffer å°±å¯ä»¥å®Œå…¨é‡Šæ”¾äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let big = downloadHugeString()</div><div class="line">let small = extractTinyString(from: big)</div><div class="line">mainView.titleLabel.text = small // Swift 4 ç¼–è¯‘æŠ¥é”™</div><div class="line">mainView.titleLabel.text = String(small) // ç¼–è¯‘é€šè¿‡</div></pre></td></tr></table></figure>
<ul>
<li><p>Unicode</p>
<p>  æ”¹å–„äº†åœ¨è®¡ç®—Unicodeå­—ç¬¦é•¿åº¦æ—¶çš„æ­£ç¡®æ€§ã€‚<br>  åœ¨ Unicode ä¸­ï¼Œæœ‰äº›å­—ç¬¦æ˜¯ç”±å‡ ä¸ªå…¶å®ƒå­—ç¬¦ç»„æˆçš„ï¼Œæ¯”å¦‚ Ã© è¿™ä¸ªå­—ç¬¦ï¼Œå®ƒå¯ä»¥ç”¨ \u{E9} æ¥è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨ e å­—ç¬¦å’Œä¸Šé¢ä¸€æ’‡å­—ç¬¦ç»„åˆåœ¨ä¸€èµ·è¡¨ç¤º \u{65}\u{301}ã€‚</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var family = &quot;ğŸ‘©&quot;      // &quot;ğŸ‘©&quot;</div><div class="line">family += &quot;\u&#123;200D&#125;ğŸ‘©â€ // &quot;ğŸ‘©â€ğŸ‘©&quot;</div><div class="line">family += &quot;\u&#123;200D&#125;ğŸ‘§â€ //&quot;ğŸ‘©â€ğŸ‘©â€ğŸ‘§&quot;</div><div class="line">family += &quot;\u&#123;200D&#125;ğŸ‘¦â€ //&quot;ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦&quot;</div><div class="line">family.count          //åœ¨swift3ä¸­ï¼Œcount=4ï¼Œåœ¨swift4ä¸­ï¼Œcount=1</div></pre></td></tr></table></figure>
<h2 id="3-Private-declarations-visible-in-same-file-extensions-ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´"><a href="#3-Private-declarations-visible-in-same-file-extensions-ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´" class="headerlink" title="3.Private declarations visible in same-file extensions ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´"></a>3.Private declarations visible in same-file extensions ä¿®æ”¹äº†Privateä¿®é¥°ç¬¦çš„æƒé™èŒƒå›´</h2><p>privateä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¯ä»¥åœ¨åŒæ–‡ä»¶ä¸­çš„extensionä¸­è®¿é—®åˆ°ã€‚è·Ÿswift3ä¸­çš„fileprivateç›¸ä¼¼è€Œåˆä¸åŒã€‚ç›¸åŒç‚¹æ˜¯éƒ½å¯ä»¥åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­è®¿é—®åˆ°ï¼Œä¸åŒç‚¹æ˜¯privateä¿®é¥°çš„åªèƒ½åœ¨å½“å‰ç±»å‹çš„extensionä¸­è®¿é—®åˆ°ï¼Œè€Œfileprivateä¿®é¥°çš„ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–çš„ç±»å‹å®šä¹‰å’Œextensionä¸­è®¿é—®åˆ°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">struct SortedArray&lt;Element: Comparable&gt; &#123;</div><div class="line">    private var storage: [Element] = []</div><div class="line">    init(unsorted: [Element]) &#123;</div><div class="line">        storage = unsorted.sorted()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">extension SortedArray &#123;</div><div class="line">    mutating func insert(_ element: Element) &#123;</div><div class="line">        // storage is visible here</div><div class="line">        storage.append(element)</div><div class="line">        storage.sort()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">let array = SortedArray(unsorted: [3,1,2])</div><div class="line"></div><div class="line">// storage is _not_ visible here. It would be if it were fileprivate.</div><div class="line">//array.storage // error: &apos;storage&apos; is inaccessible due to &apos;private&apos; protection level</div></pre></td></tr></table></figure>
<h2 id="4-Key-Paths"><a href="#4-Key-Paths" class="headerlink" title="4.Key Paths"></a>4.Key Paths</h2><p>ç±»ä¼¼Objective-Cé‡Œçš„KVCï¼ŒSwift 4.0é‡Œçš„Key Pathsæ˜¯å¼ºç±»å‹çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">struct Person &#123;</div><div class="line">  var name: String</div><div class="line">&#125;</div><div class="line">struct Book &#123;</div><div class="line">  var title: String</div><div class="line">  var authors: [Person]</div><div class="line">  var primaryAuthor: Person &#123;</div><div class="line">      return authors.first!</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">let abelson = Person(name: &quot;Harold Abelson&quot;)</div><div class="line">let sussman = Person(name: &quot;Gerald Jay Sussman&quot;)</div><div class="line">var sicp = Book(title: &quot;Structure and Interpretation of Computer Programs&quot;, authors: [abelson, sussman])</div></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨key pathsè·å–å¯¹è±¡å€¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sicp[keyPath: \Book.title] </div><div class="line">//Structure and Interpretation of Computer Programs</div></pre></td></tr></table></figure>
<ul>
<li>key paths å¯ä»¥ç”¨äºè®¡ç®—å±æ€§</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sicp[keyPath: \Book.primaryAuthor.name] </div><div class="line">//Harold Abelson</div></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨key pathså¯ä»¥ä¿®æ”¹å€¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sicp[keyPath: \Book.title] = &quot;Swift 4.0â€ </div><div class="line">//sicp.title ç°åœ¨æ˜¯Swift 4.0</div></pre></td></tr></table></figure>
<ul>
<li>key pathsæ˜¯å¯¹è±¡ï¼Œå¯ä»¥è¢«å­˜å‚¨å’Œæ“çºµ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let authorKeyPath = \Book.primaryAuthor</div><div class="line">print(type(of: authorKeyPath)) //KeyPath&lt;Book, Person&gt;</div><div class="line">let nameKeyPath = authorKeyPath.appending(path: \.name) // è¿™ä¸ªå¯ä»¥çœç•¥Bookï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥æ¨æ–­å‡ºç±»å‹</div><div class="line">sicp[keyPath: nameKeyPath] //Harold Abelson</div></pre></td></tr></table></figure>
<ul>
<li>KeyPathå®é™…ä¸Šæ˜¯ä¸€ä¸ªclassï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/// A key path from a specific root type to a specific resulting value type.</div><div class="line">public class KeyPath&lt;Root, Value&gt; : PartialKeyPath&lt;Root&gt; &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>key pathsæš‚æ—¶è¿˜ä¸æ”¯æŒä¸‹æ ‡æ“çºµ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">//sicp[keyPath: \Book.authors[0].name] //ç¼–è¯‘å¤±è´¥</div></pre></td></tr></table></figure>
<h2 id="5-Archival-and-serializationå½’æ¡£å’Œåºåˆ—åŒ–"><a href="#5-Archival-and-serializationå½’æ¡£å’Œåºåˆ—åŒ–" class="headerlink" title="5.Archival and serializationå½’æ¡£å’Œåºåˆ—åŒ–"></a>5.Archival and serializationå½’æ¡£å’Œåºåˆ—åŒ–</h2><p>å½“éœ€è¦å°†ä¸€ä¸ªå¯¹è±¡æŒä¹…åŒ–æ—¶ï¼Œéœ€è¦æŠŠè¿™ä¸ªå¯¹è±¡åºåˆ—åŒ–ï¼Œå¾€å¸¸çš„åšæ³•æ˜¯å®ç° NSCoding åè®®ï¼Œå†™è¿‡çš„äººåº”è¯¥éƒ½çŸ¥é“å®ç° NSCoding åè®®çš„ä»£ç å†™èµ·æ¥å¾ˆç—›è‹¦ï¼Œå°¤å…¶æ˜¯å½“å±æ€§éå¸¸å¤šçš„æ—¶å€™ã€‚</p>
<p>Swift 4 ä¸­å¼•å…¥äº†<code>Codable</code>å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><code>Codable</code>å…¶å®æ˜¯ä¸€ä¸ªç»„åˆåè®®:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public typealias Codable = Decodable &amp; Encodable</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">struct Card: Codable &#123;</div><div class="line">    enum Suit: String, Codable &#123;</div><div class="line">        case clubs, spades, hearts, diamonds</div><div class="line">    &#125;</div><div class="line">    enum Rank: Int, Codable &#123;</div><div class="line">        case ace = 1, two, three, four, five, six, seven, eight, nine, ten, jack, queen, king</div><div class="line">    &#125;</div><div class="line">    var suit: Suit</div><div class="line">    var rank: Rank</div><div class="line">&#125;</div><div class="line">let hand = [Card(suit: .clubs, rank: .ace), Card(suit: .hearts, rank: .queen)]</div></pre></td></tr></table></figure>
<p>Encode æ“ä½œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// json</div><div class="line">var encoder = JSONEncoder()</div><div class="line">let jsonData = try encoder.encode(hand)</div><div class="line">String(data: jsonData, encoding: .utf8)</div><div class="line"></div><div class="line">// plist</div><div class="line">var encoder2 = PropertyListEncoder()</div><div class="line">encoder2.outputFormat = .xml</div><div class="line">let propertyData = try encoder2.encode(hand)</div><div class="line">String(data: propertyData, encoding: .utf8)</div></pre></td></tr></table></figure>
<p>Decode æ“ä½œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// json</div><div class="line">let decoder = JSONDecoder()</div><div class="line">let decodedHand = try decoder.decode([Card].self, from: jsonData)</div><div class="line"></div><div class="line">// plist</div><div class="line">var decoder2 = PropertyListDecoder()</div><div class="line">let hand3 = try decoder2.decode([Card].self, from: propertyData)</div><div class="line">hand3[0].suit //clubs</div></pre></td></tr></table></figure>
<p>æ›´å…¨é¢çš„JSONè§£æè¯·æŸ¥çœ‹<a href="https://bignerdcoding.com/archives/37.html" target="_blank" rel="external">Swift 4 JSON è§£ææŒ‡å—</a></p>
<h2 id="6-Associated-type-constraintså…³è”ç±»å‹çº¦æŸ"><a href="#6-Associated-type-constraintså…³è”ç±»å‹çº¦æŸ" class="headerlink" title="6.Associated type constraintså…³è”ç±»å‹çº¦æŸ"></a>6.Associated type constraintså…³è”ç±»å‹çº¦æŸ</h2><ul>
<li>protocolä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨<code>where</code>è¯­å¥å¯¹å…³è”ç±»å‹è¿›è¡Œçº¦æŸäº†</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">protocol SomeProtocol where Self: UICollectionViewCell &#123;</div><div class="line">&#125;</div><div class="line">// SomeProtocolè¦æ±‚å®ƒçš„å®ç°è€…å¿…é¡»ç»§æ‰¿UICollectionViewCellï¼Œ</div><div class="line">// ä¸æ˜¯éšä¾¿ä¸€ä¸ªç±»å‹éƒ½èƒ½å®ç°SomeProtocol</div></pre></td></tr></table></figure>
<ul>
<li><code>Sequence</code>åè®®æœ‰è‡ªå·±çš„<code>Element associatedtype</code>äº†ï¼Œä¸éœ€è¦å†™<code>Iterator.Element</code>äº†</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">extension Sequence where Element: Numeric &#123;</div><div class="line">    var sum: Element &#123;</div><div class="line">        var result: Element = 0</div><div class="line">        for element in self &#123;</div><div class="line">            result += element</div><div class="line">        &#125;</div><div class="line">        return result</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">[1,2,3,4].sum</div></pre></td></tr></table></figure>
<h2 id="7-Dictionary-and-Set-enhancements"><a href="#7-Dictionary-and-Set-enhancements" class="headerlink" title="7.Dictionary and Set enhancements"></a>7.Dictionary and Set enhancements</h2><ul>
<li>ä½¿ç”¨key-value sequenceåˆå§‹åŒ–Dictionary</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let names = [&quot;Cagney&quot;, &quot;Lacey&quot;, &quot;Bensenâ€]</div><div class="line">let dict = Dictionary(uniqueKeysWithValues: zip(1..., names))</div><div class="line">//[2: &quot;Lacey&quot;, 3: &quot;Bensen&quot;, 1: &quot;Cagneyâ€]</div></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœkeyå­˜åœ¨é‡å¤çš„æƒ…å†µï¼Œä½¿ç”¨ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let users = [(1, &quot;Cagney&quot;), (2, &quot;Lacey&quot;), (1, &quot;Bensenâ€)] </div><div class="line">//zipå‡½æ•°çš„ä½œç”¨å°±æ˜¯æŠŠä¸¤ä¸ªSequenceåˆå¹¶æˆä¸€ä¸ªkey-valueå…ƒç»„çš„Sequence</div><div class="line">let dict = Dictionary(users, uniquingKeysWith: &#123;</div><div class="line">  (first, second) in</div><div class="line">  print(first, second)</div><div class="line">  return first</div><div class="line">&#125;)</div><div class="line">//[2: &quot;Lacey&quot;, 1: &quot;Cagneyâ€]</div></pre></td></tr></table></figure>
<ul>
<li>merge åˆå¹¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">let defaults = [&quot;foo&quot;: false, &quot;bar&quot;: false, &quot;baz&quot;: false]</div><div class="line">var options = [&quot;foo&quot;: true, &quot;bar&quot;: false]</div><div class="line">// æŒ‰ç…§mergeå‡½æ•°çš„æ³¨é‡Šåº”è¯¥æ˜¯å¦‚ä¸‹å†™æ³•ï¼Œä½†æ˜¯è¿™ç§å†™æ³•ä¼šæŠ¥é”™error: generic parameter &apos;S&apos; could not be inferred</div><div class="line">//let mergedOptions = options.merge(defaults) &#123; (old, _) in old &#125;</div><div class="line">// éœ€è¦æ›¿æ¢æˆ</div><div class="line">options.merge(defaults.map &#123; $0 &#125;) &#123; (old, _) in old &#125;options</div><div class="line">//[&quot;bar&quot;: false, &quot;baz&quot;: false, &quot;foo&quot;: true]</div></pre></td></tr></table></figure>
<ul>
<li><p>å¸¦é»˜è®¤å€¼çš„ä¸‹æ ‡æ“ä½œ</p>
<p>  ä½¿ç”¨ä¸‹æ ‡å–æŸä¸ªkeyå€¼æ—¶ï¼Œå¯ä»¥ä¼ ä¸€ä¸ªdefaultå‚æ•°ä½œä¸ºé»˜è®¤å€¼ï¼Œå½“è¿™ä¸ªkeyä¸å­˜åœ¨æ—¶ï¼Œä¼šè¿”å›è¿™ä¸ªé»˜è®¤å€¼</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">let source = &quot;how now brown cow&quot;</div><div class="line">var frequencies: [Character: Int] = [:]</div><div class="line">for c in source &#123;</div><div class="line">  frequencies[c, default: 0] += 1</div><div class="line">&#125;</div><div class="line">print(frequencies)</div><div class="line">//[&quot;b&quot;: 1, &quot;w&quot;: 4, &quot;r&quot;: 1, &quot;c&quot;: 1, &quot;n&quot;: 2, &quot;o&quot;: 4, &quot; &quot;: 3, &quot;h&quot;: 1]</div></pre></td></tr></table></figure>
<ul>
<li>mapå’Œfilterå‡½æ•°è¿”å›å€¼ç±»å‹æ˜¯Dictionaryï¼Œè€Œä¸æ˜¯Array</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">let filtered = dict.filter &#123;</div><div class="line">  $0.key % 2 == 0</div><div class="line">&#125;</div><div class="line">filtered //[2: &quot;Lacey&quot;]</div><div class="line">let mapped = dict.mapValues &#123; value in</div><div class="line">  value.uppercased()</div><div class="line">&#125;</div><div class="line">mapped //[2: &quot;LACEY&quot;, 1: &quot;CAGNEYâ€]</div></pre></td></tr></table></figure>
<ul>
<li>å¯¹Sequenceè¿›è¡Œåˆ†ç»„</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let contacts = [&quot;Julia&quot;, &quot;Susan&quot;, &quot;John&quot;, &quot;Alice&quot;, &quot;Alex&quot;]</div><div class="line">let grouped = Dictionary(grouping: contacts, by: &#123; $0.first! &#125;)</div><div class="line">print(grouped)</div><div class="line">//[&quot;J&quot;: [&quot;Julia&quot;, &quot;John&quot;], &quot;S&quot;: [&quot;Susan&quot;], &quot;A&quot;: [&quot;Alice&quot;, &quot;Alex&quot;]]</div></pre></td></tr></table></figure>
<h2 id="8-MutableCollection-swapAt-method"><a href="#8-MutableCollection-swapAt-method" class="headerlink" title="8.MutableCollection.swapAt method"></a>8.MutableCollection.swapAt method</h2><p>æ–°å¢çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºäº¤æ¢MutableCollectionä¸­çš„ä¸¤ä¸ªä½ç½®çš„å…ƒç´ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var numbers = [1,2,3,4,5]</div><div class="line">numbers.swapAt(0,1) </div><div class="line">//[2, 1, 3, 4, 5]</div></pre></td></tr></table></figure>
<h2 id="9-Generic-subscriptsæ³›å‹ä¸‹æ ‡"><a href="#9-Generic-subscriptsæ³›å‹ä¸‹æ ‡" class="headerlink" title="9.Generic subscriptsæ³›å‹ä¸‹æ ‡"></a>9.Generic subscriptsæ³›å‹ä¸‹æ ‡</h2><p>æœ‰æ—¶å€™ä¼šå†™ä¸€äº›æ•°æ®å®¹å™¨ï¼ŒSwift æ”¯æŒé€šè¿‡ä¸‹æ ‡æ¥è¯»å†™å®¹å™¨ä¸­çš„æ•°æ®ï¼Œä½†æ˜¯å¦‚æœå®¹å™¨ç±»ä¸­çš„æ•°æ®ç±»å‹å®šä¹‰ä¸ºæ³›å‹ï¼Œä»¥å‰çš„ä¸‹æ ‡è¯­æ³•å°±åªèƒ½è¿”å› Anyï¼Œåœ¨å–å‡ºå€¼åéœ€è¦ç”¨ as? æ¥è½¬æ¢ç±»å‹ã€‚Swift 4 å®šä¹‰ä¸‹æ ‡ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">struct GenericDictionary&lt;Key: Hashable, Value&gt; &#123;</div><div class="line">    private var data: [Key: Value]</div><div class="line">    </div><div class="line">    init(data: [Key: Value]) &#123;</div><div class="line">        self.data = data</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    subscript&lt;T&gt;(key: Key) -&gt; T? &#123;</div><div class="line">        return data[key] as? T</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">let dictionary = GenericDictionary(data: [&quot;Name&quot;: &quot;Xiaoming&quot;])</div><div class="line">let name: String? = dictionary[&quot;Name&quot;] // ä¸éœ€è¦å†å†™ as? String</div></pre></td></tr></table></figure>
<h2 id="10-NSNumber-bridging-and-Numeric-types"><a href="#10-NSNumber-bridging-and-Numeric-types" class="headerlink" title="10.NSNumber bridging and Numeric types"></a>10.NSNumber bridging and Numeric types</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">let n = NSNumber(value: 999)</div><div class="line">let v = n as? UInt8 // Swift 4: nil, Swift 3: 231</div></pre></td></tr></table></figure>
<p>åœ¨ Swift 4 ä¸­ï¼ŒæŠŠä¸€ä¸ªå€¼ä¸º 999 çš„ NSNumber è½¬æ¢ä¸º UInt8 åï¼Œèƒ½æ­£ç¡®çš„è¿”å› nilï¼Œè€Œåœ¨ Swift 3 ä¸­ä¼šä¸å¯é¢„æ–™çš„è¿”å› 231ã€‚</p>
<h2 id="11-å‡å°‘éšå¼-objc-è‡ªåŠ¨æ¨æ–­"><a href="#11-å‡å°‘éšå¼-objc-è‡ªåŠ¨æ¨æ–­" class="headerlink" title="11.å‡å°‘éšå¼ @objc è‡ªåŠ¨æ¨æ–­"></a>11.å‡å°‘éšå¼ @objc è‡ªåŠ¨æ¨æ–­</h2><p>åœ¨é¡¹ç›®ä¸­æƒ³æŠŠ Swift å†™çš„ API æš´éœ²ç»™ Objective-C è°ƒç”¨ï¼Œéœ€è¦å¢åŠ  @objcã€‚åœ¨ Swift 3 ä¸­ï¼Œç¼–è¯‘å™¨ä¼šåœ¨å¾ˆå¤šåœ°æ–¹ä¸ºæˆ‘ä»¬éšå¼çš„åŠ ä¸Š @objcï¼Œä¾‹å¦‚å½“ä¸€ä¸ªç±»ç»§æ‰¿äº NSObjectï¼Œé‚£ä¹ˆè¿™ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè¢«éšå¼çš„åŠ ä¸Š @objcã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">class MyClass: NSObject &#123;</div><div class="line">    func print() &#123; ... &#125; // åŒ…å«éšå¼çš„ @objc</div><div class="line">    func show() &#123; ... &#125; // åŒ…å«éšå¼çš„ @objc</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·å¾ˆå¤šå¹¶ä¸éœ€è¦æš´éœ²ç»™ Objective-C ä¹Ÿè¢«åŠ ä¸Šäº† @objcã€‚å¤§é‡ @objc ä¼šå¯¼è‡´äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°çš„å¢åŠ ã€‚</p>
<p>åœ¨ Swift 4 ä¸­ï¼Œéšå¼ @objc è‡ªåŠ¨æ¨æ–­åªä¼šå‘ç”Ÿåœ¨å¾ˆå°‘çš„å½“å¿…é¡»è¦ä½¿ç”¨ @objc çš„æƒ…å†µï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>å¤å†™çˆ¶ç±»çš„ Objective-C æ–¹æ³•</li>
<li>ç¬¦åˆä¸€ä¸ª Objective-C çš„åè®®<br>å…¶å®ƒå¤§å¤šæ•°åœ°æ–¹å¿…é¡»æ‰‹å·¥æ˜¾ç¤ºçš„åŠ ä¸Š @objcã€‚</li>
</ol>
<p>å‡å°‘äº†éšå¼ @objc è‡ªåŠ¨æ¨æ–­åï¼ŒApple Music app çš„åŒ…å¤§å°å‡å°‘äº† 5.7%ã€‚</p>
<h2 id="12-ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹"><a href="#12-ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹" class="headerlink" title="12.ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹"></a>12.ç±»å‹å’Œåè®®çš„ç»„åˆç±»å‹</h2><p>åè®®ä¸åè®®å¯ä»¥ç»„åˆï¼Œåè®®ä¸classä¹Ÿå¯ä»¥ç»„åˆ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">protocol HeaderView &#123;&#125;</div><div class="line"></div><div class="line">class ViewController: UIViewController &#123;</div><div class="line">    let header: UIView &amp; HeaderView</div><div class="line"></div><div class="line">    init(header: UIView &amp; HeaderView) &#123;</div><div class="line">        self.header = header</div><div class="line">        super.init(nibName: nil, bundle: nil)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    required init(coder decoder: NSCoder) &#123;</div><div class="line">        fatalError(&quot;not implemented&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// Can&apos;t pass in a simple UIView that doesn&apos;t conform to the protocol</div><div class="line">//ViewController(header: UIView())</div><div class="line">// error: argument type &apos;UIView&apos; does not conform to expected type &apos;UIView &amp; HeaderView&apos;</div><div class="line"></div><div class="line">// Must pass in an NSView (subclass) that also conforms to the protocol</div><div class="line">extension UIImageView: HeaderView &#123;&#125;</div><div class="line"></div><div class="line">ViewController(header: UIImageView()) // works</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä¸»è¦æ˜¯åŸºäºgithubä¸Šä¸€ä¸ªSwift 4.0æ–°ç‰¹æ€§çš„å¼€æºé¡¹ç›®&lt;a href=&quot;https://github.com/ole/whats-new-in-swift-4&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;whats-new-in-swift-
    
    </summary>
    
      <category term="iOS" scheme="http://blog.qczyl.club/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>æ•°æ®é©±åŠ¨çš„TableViewï¼šQCListView_Swift</title>
    <link href="http://blog.qczyl.club/2017/07/27/%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E7%9A%84TableView%EF%BC%9AQCListView_Swift/"/>
    <id>http://blog.qczyl.club/2017/07/27/æ•°æ®é©±åŠ¨çš„TableViewï¼šQCListView_Swift/</id>
    <published>2017-07-27T10:38:33.000Z</published>
    <updated>2017-07-28T01:35:52.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><code>UITableView</code>å¯ä»¥è¯´æ˜¯iOSå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ§ä»¶äº†ï¼Œé‚£ä¹ˆå¯¹<code>UITableView</code>çš„ä½¿ç”¨ä»¥åŠå°è£…å°±å¯ä»¥è¯´æ˜¯é‡ä¸­ä¹‹é‡äº†ã€‚ä»Šå¤©å°±ä»‹ç»ä¸€ä¸ªè‡ªå·±å°è£…çš„ç”±æ•°æ®è¿›è¡Œé©±åŠ¨çš„<code>UITableView</code>çš„å°è£…<a href="https://github.com/qcyl/QCListView_Swift" target="_blank" rel="external">QCListView_Swift</a>ã€‚</p>
<h2 id="æ•°æ®é©±åŠ¨"><a href="#æ•°æ®é©±åŠ¨" class="headerlink" title="æ•°æ®é©±åŠ¨"></a>æ•°æ®é©±åŠ¨</h2><p>ä½•ä¸ºæ•°æ®é©±åŠ¨ï¼Ÿ<br>å°±æ˜¯åªå…³å¿ƒæ•°æ®çš„å¤„ç†ï¼Œæ•°æ®æ”¹å˜ï¼Œcellæ”¹å˜ã€‚ä¸éœ€è¦å®ç°<code>UITableView</code>é‚£äº›ç¹æ‚çš„åè®®æ–¹æ³•ã€‚</p>
<p>åªæ˜¯è¿™ä¹ˆè¯´çš„è¯ï¼Œç›¸ä¿¡å¤§å®¶è¿˜éƒ½æ˜¯æ¯”è¾ƒæ‡µçš„çŠ¶æ€ï¼Œä¸‹é¢çœ‹æºç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">// æˆ‘éœ€è¦TableViewå±•ç¤ºä¸¤ç§cell, å¹¶ä¸”æ¯éš”ä¸€è¡Œæ¢ä¸€ç§ï¼Œæˆ‘åªéœ€è¦å°†å¯¹åº”çš„modelæ‹¼æ¥æˆä¸€ä¸ªæ•°ç»„ï¼Œ</div><div class="line">// é‚£ä¹ˆUIä¼šè‡ªåŠ¨æ ¹æ®æ•°ç»„ä¸­çš„modelæ‰¾åˆ°å¯¹åº”çš„cellè¿›è¡Œå±•ç¤º</div><div class="line"></div><div class="line">class ViewController: UIViewController &#123;</div><div class="line"></div><div class="line">    override func viewDidLoad() &#123;</div><div class="line">        super.viewDidLoad()</div><div class="line">        </div><div class="line">        let tableView = TableView(frame: CGRect(x: 0, y: 0, width: self.view.bounds.width, height: self.view.bounds.height), style: .plain)</div><div class="line">        tableView.qcDataSource = dataSource</div><div class="line">        tableView.qcDelegate = self</div><div class="line">        tableView.register(cell: DemoCell())</div><div class="line">        tableView.register(cell: Demo2Cell())</div><div class="line">        view.addSubview(tableView)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    let dataSource: TableViewDataSource = &#123;</div><div class="line">        let dataSource = TableViewDataSource()</div><div class="line">        </div><div class="line">        var section = SectionObject()</div><div class="line">        section.items = &#123;</div><div class="line">            var items: [TableViewBaseItem] = []</div><div class="line">            </div><div class="line">            for i in 0..&lt;20 &#123;</div><div class="line">                let model = DemoModel()</div><div class="line">                model.count = i</div><div class="line">                items.append(model)</div><div class="line">                let model2 = Demo2Model()</div><div class="line">                model2.count2 = i</div><div class="line">                items.append(model2)</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            return items</div><div class="line">        &#125;()</div><div class="line">        dataSource.sections = [section]</div><div class="line">        </div><div class="line">        return dataSource</div><div class="line">    &#125;()</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">extension ViewController: TableViewDelegate &#123;</div><div class="line">    func tableView(_ tableView: TableView, didSelectedObject object: TableViewBaseItem, atIndexPath indexPatn: IndexPath) &#123;</div><div class="line">        print(&quot;ç‚¹å‡»&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ•´ä½“æ€è·¯"><a href="#æ•´ä½“æ€è·¯" class="headerlink" title="æ•´ä½“æ€è·¯"></a>æ•´ä½“æ€è·¯</h2><p>ç”±äº<code>UITableView</code>çš„æ•°æ®æºå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ‰€ä»¥å°†æ¯ç»„å°è£…æˆä¸€ä¸ª<code>SectionObject</code>å¯¹è±¡ï¼Œå¯¹è±¡å†…åˆåŒ…å«æ¯è¡Œçš„å¯¹è±¡æ•°ç»„<code>items</code>ã€‚è¿™æ ·å¤–éƒ¨æŒ‰ç…§è¿™ä¸ªæ ¼å¼æ¥æ‹¼æ¥å¯¹è±¡å°±ç¡®å®šäº†<code>UITableView</code>çš„æ•°æ®æºã€‚</p>
<p>æ•°æ®æºç¡®å®šäº†ï¼Œè¿˜éœ€è¦ç¡®å®šè¿”å›çš„cellï¼Œè¿™é‡Œæˆ‘å°†æ¯è¡Œæ•°æ®çš„modelä¸cellä¹‹é—´åˆ¶å®šäº†ä¸€ä¸ªè§„åˆ™ï¼ˆè§„åˆ™è¯´æ˜è¯·çœ‹æ–‡æœ«ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡å¯¹åº”çš„modelæ‰¾åˆ°cellï¼Œå¹¶è¿”å›ã€‚</p>
<p>åœ¨Modelç±»çš„çˆ¶ç±»ä¸­<code>TableViewBaseItem</code>ï¼Œæœ‰ä¸¤ä¸ªå±æ€§<code>cellHeight</code>å’Œ<code>itemIdentifier</code>ã€‚<code>cellHeight</code>å­˜å‚¨cellçš„é«˜åº¦ï¼Œåœ¨Cellç±»ä¸­å®ç°<code>TableViewCellDelegate</code>åè®®è¿”å›ï¼›<code>itemIdentifier</code>æ ¹æ®Modelç±»åè½¬æ¢ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ª<code>itemIdentifier</code>æ³¨å†Œcellã€‚<br>æ³¨ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªå±æ€§éƒ½æ— éœ€å…³å¿ƒã€‚</p>
<p>å¦å¤–<code>UITableView</code>çš„ä»£ç†åè®®ä¸­åŒ…å«éå¸¸å¤šçš„åè®®æ–¹æ³•ï¼Œ<a href="https://github.com/qcyl/QCListView_Swift" target="_blank" rel="external">QCListView_Swift</a>ä¸­çš„<code>TableView</code>ä¸å¯èƒ½å°†æ¯ä¸ªåè®®æ–¹æ³•éƒ½è¿›è¡Œå®ç°ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°<a href="http://www.olinone.com/?p=643" target="_blank" rel="external">åè®®åˆ†å‘</a>,é€šè¿‡ä½¿ç”¨<a href="https://github.com/panghaijiao/HJProtocolDispatcher" target="_blank" rel="external">HJProtocolDispatcher</a>å®ç°åè®®çš„åˆ†å‘ã€‚</p>
<h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ol>
<li>åªéœ€è¦å…³å¿ƒæ•°æ®çš„å¤„ç†ï¼Œæ— éœ€æ¯æ¬¡éƒ½å®ç°åè®®</li>
<li>æ›´å¥½çš„èŒè´£åˆ’åˆ†ï¼Œcellçš„æ ·å¼ï¼Œé«˜åº¦ç”±cellå†…éƒ¨è‡ªå·±å¤„ç†</li>
<li>æ›´å¥½çš„å¤„ç†å¤šcellçš„TableView</li>
<li>æ³¨å†Œcellæ—¶æ— éœ€åŒºåˆ†xibè¿˜æ˜¯class</li>
</ol>
<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><ol>
<li><code>SectionObject</code>å®Œå–„</li>
<li><code>TableViewBaseItem</code>æ”¯æŒæ³›å‹å¤„ç†</li>
<li><code>UITableViewDataSource</code>çš„åè®®åˆ†å‘</li>
<li>æ”¯æŒè‡ªåŠ¨é«˜åº¦è®¡ç®—ï¼ˆä¹Ÿæœ‰å¯èƒ½ä¸ä¼šæ”¯æŒï¼‰</li>
</ol>
<h2 id="è§„åˆ™è¯´æ˜"><a href="#è§„åˆ™è¯´æ˜" class="headerlink" title="è§„åˆ™è¯´æ˜"></a>è§„åˆ™è¯´æ˜</h2><p>æœ¬åº“ä¼šè‡ªåŠ¨å°†Modelç±»ï¼ˆæ¯è¡Œå¯¹åº”çš„å¯¹è±¡ï¼‰åçš„<code>Modelæˆ–Item</code>è½¬æ¢æˆ<code>Cell</code>ï¼Œç„¶åå»å¯»æ‰¾å¯¹åº”çš„Cellã€‚</p>
<blockquote>
<p>ä¾‹å¦‚ï¼š<br>Modelç±»ï¼ˆDemoModelï¼‰ä¼šè‡ªåŠ¨å»æ‰¾å¯¹åº”çš„Cellç±»ï¼ˆDemoCellï¼‰<br>Modelç±»ï¼ˆDemoItemï¼‰ä¼šè‡ªåŠ¨å»æ‰¾å¯¹åº”çš„Cellç±»ï¼ˆDemoCellï¼‰</p>
</blockquote>
<p>å¦‚æœä½ çš„ä¸ªäººä¹ æƒ¯æˆ–è€…é¡¹ç›®è¦æ±‚å¯¼è‡´Modelç±»ä¸ä¼šä»¥<code>Modelæˆ–Item</code>ç»“å°¾ï¼Œè¿˜å¯åˆ›å»º<code>cellIDRule.plist</code>æ–‡ä»¶ï¼ˆæ ¹ç»“æ„ä¸ºæ•°ç»„ï¼‰ï¼Œåœ¨æ–‡ä»¶å†…å¡«å†™éœ€è¦è½¬æ¢çš„ç»“å°¾å­—ç¬¦ä¸²ã€‚</p>
<blockquote>
<p>ä¾‹å¦‚éœ€è¦è½¬æ¢ä»¥<code>Etity</code>ç»“å°¾çš„Modelç±»ï¼š<br>åˆ™åœ¨<code>cellIDRule.plist</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸€é¡¹<code>Etity</code></p>
<p>æ³¨æ„ï¼šåˆ›å»º<code>cellIDRule.plist</code>æ–‡ä»¶åï¼Œé»˜è®¤çš„<code>Modelæˆ–Item</code>å°†ä¸å†æ”¯æŒ</p>
</blockquote>
<hr>
<p>æ›´ç»†è‡´çš„å†…å®¹è¿˜è¯·å¤§å®¶å»çœ‹<a href="https://github.com/qcyl/QCListView_Swift" target="_blank" rel="external">demo</a>ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;&lt;code&gt;UITableView&lt;/code&gt;å¯ä»¥è¯´æ˜¯iOSå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ä¸€ä¸ªæ§ä»¶äº†ï¼Œé‚£ä¹ˆå¯¹&lt;code&gt;UITableView&lt;/code
    
    </summary>
    
      <category term="iOS" scheme="http://blog.qczyl.club/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>å¤šTargetã€ç»„ä»¶åŒ–å®è·µ</title>
    <link href="http://blog.qczyl.club/2017/07/07/%E5%A4%9ATarget%E3%80%81%E7%BB%84%E4%BB%B6%E5%8C%96%E5%AE%9E%E8%B7%B5/"/>
    <id>http://blog.qczyl.club/2017/07/07/å¤šTargetã€ç»„ä»¶åŒ–å®è·µ/</id>
    <published>2017-07-07T06:49:51.000Z</published>
    <updated>2017-07-07T08:02:52.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å› ä¸ºå…¬å¸é¡¹ç›®çš„ç‰¹æ€§ï¼šæ¯ä¸ªåŸå¸‚å¯¹åº”ä¸€ä¸ªAPPï¼Œæ¯ä¸ªAPPåˆæœ‰ç€æˆ–å¤šæˆ–å°‘çš„åŒºåˆ«ï¼›</p>
<p>æ‰€ä»¥å¼€å‘äººå‘˜é¢ä¸´çš„é—®é¢˜æ˜¯ï¼šå¼€å‘å¤šä¸ªç›¸ä¼¼APPã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="å…ˆè¯´ä¸€ä¸‹ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆï¼š"><a href="#å…ˆè¯´ä¸€ä¸‹ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="å…ˆè¯´ä¸€ä¸‹ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆï¼š"></a>å…ˆè¯´ä¸€ä¸‹ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆï¼š</h3><p>å°†æ‰€æœ‰APPæ•´åˆä¸ºä¸€ä¸ªå¤§çš„é¡¹ç›®ï¼Œé€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè°ƒç”¨ä¸åŒAPPæ‰€éœ€ä»£ç ã€‚</p>
<p>è¿™æ ·ç¡®å®æ˜¯è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯æ–¹æ¡ˆè‚¯å®šæ˜¯ä¸å¥½çš„ã€‚</p>
<p>è¿™æ ·åšçš„ç¼ºç‚¹ï¼š</p>
<ol>
<li>ä»»ä½•ä¸€ä¸ªAPPéƒ½éœ€è¦åŠ è½½æ‰€æœ‰APPçš„æ–‡ä»¶ï¼Œèµ„æº</li>
<li>æ¯æ¬¡æŸ¥çœ‹ä¸åŒåŸå¸‚çš„APPéƒ½éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒåŒæ—¶è¿˜è¦ä¿®æ”¹æœåŠ¡å™¨åœ°å€ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿé—æ¼</li>
<li>æ‰€æœ‰APPçš„iconï¼Œåç§°æ— æ³•å•ç‹¬è®¾ç½®</li>
</ol>
<h3 id="ä¸‹é¢æ˜¯æœ¬æ–‡çš„è§£å†³æ–¹æ¡ˆï¼š"><a href="#ä¸‹é¢æ˜¯æœ¬æ–‡çš„è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="ä¸‹é¢æ˜¯æœ¬æ–‡çš„è§£å†³æ–¹æ¡ˆï¼š"></a>ä¸‹é¢æ˜¯æœ¬æ–‡çš„è§£å†³æ–¹æ¡ˆï¼š</h3><ol>
<li><p>é€šè¿‡Targetç®¡ç†ä¸åŒåŸå¸‚çš„APP</p>
<p> <img src="http://ocga9x543.bkt.clouddn.com/WX20170707-113040.png" alt=""></p>
</li>
<li><p>é€šè¿‡cocoapodsç§æœ‰åº“å°†é¡¹ç›®ç»„ä»¶åŒ–</p>
<p> å¤§å®¶å¯ä½¿ç”¨<a href="https://github.com/qcyl/module_config" target="_blank" rel="external">cocoapodsç§æœ‰åº“åˆ¶ä½œè„šæœ¬</a>è¿›è¡Œç§æœ‰åº“åˆ¶ä½œã€‚æ›´å¤šcocoapodsç§æœ‰åº“åˆ¶ä½œè¯·<a href="http://www.jianshu.com/p/0c640821b36f" target="_blank" rel="external">ç‚¹å‡»</a>ã€‚</p>
</li>
<li>ä¸åŒçš„Targetå¯¼å…¥ä¸åŒçš„cocoapodsç§æœ‰ä»“åº“</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">project <span class="string">'SXC.xcodeproj'</span></div><div class="line"></div><div class="line">platform :ios, <span class="string">'8.0'</span></div><div class="line">use_frameworks!</div><div class="line"></div><div class="line">pod <span class="string">'QCRouter'</span>, :path =&gt; <span class="string">'../QCRouter'</span></div><div class="line"></div><div class="line">target <span class="string">'SXC_GX'</span> <span class="keyword">do</span></div><div class="line">  <span class="comment"># Pods for SXC-GX</span></div><div class="line">  pod <span class="string">'SSQ/GX'</span>, :path =&gt; <span class="string">'../SSQ'</span></div><div class="line">  </div><div class="line">end</div><div class="line"></div><div class="line">target <span class="string">'SXC_HLJ'</span> <span class="keyword">do</span></div><div class="line">  <span class="comment"># Pods for SXC-HLJ</span></div><div class="line">  pod <span class="string">'SSQ/HLJ'</span>, :path =&gt; <span class="string">'../SSQ'</span></div><div class="line">  </div><div class="line">end</div><div class="line"></div><div class="line">target <span class="string">'SXC_NX'</span> <span class="keyword">do</span></div><div class="line">  <span class="comment"># Pods for SXC-NX</span></div><div class="line">  pod <span class="string">'SSQ/NX'</span>, :path =&gt; <span class="string">'../SSQ'</span></div><div class="line">  </div><div class="line">end</div><div class="line"></div><div class="line">target <span class="string">'SXC_TJ'</span> <span class="keyword">do</span></div><div class="line">  <span class="comment"># Pods for SXC-TJ</span></div><div class="line">  pod <span class="string">'SSQ/TJ'</span>, :path =&gt; <span class="string">'../SSQ'</span></div><div class="line"></div><div class="line">end</div><div class="line"></div><div class="line">target <span class="string">'SXC_ZJ'</span> <span class="keyword">do</span></div><div class="line">  <span class="comment"># Pods for SXC-ZJ</span></div><div class="line">  pod <span class="string">'SSQ/ZJ'</span>, :path =&gt; <span class="string">'../SSQ'</span></div><div class="line"></div><div class="line">end</div></pre></td></tr></table></figure>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol>
<li><p>å¤šTargetä½¿ç”¨é¢„å®šä¹‰å®é—®é¢˜</p>
<p> <img src="http://ocga9x543.bkt.clouddn.com/WX20170707-150056.png" alt=""></p>
<p> <img src="http://ocga9x543.bkt.clouddn.com/WX20170707-150127.png" alt=""></p>
<p> ç”±äºæœ¬é¡¹ç›®ä¸ºSwifté¡¹ç›®ï¼Œæ‰€ä»¥å¦‚ä¸‹ä½¿ç”¨é¢„å®šä¹‰å®</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#if SXC_TJ</div><div class="line">   	let scheme = &quot;sxc-tj&quot;</div><div class="line">#elseif SXC_NX</div><div class="line">    let scheme = &quot;sxc-nx&quot;</div><div class="line">#elseif SXC_GX</div><div class="line">    let scheme = &quot;sxc-gx&quot;</div><div class="line">#elseif SXC_HLJ</div><div class="line">    let scheme = &quot;sxc-hlj&quot;</div><div class="line">#elseif SXC_ZJ</div><div class="line">    let scheme = &quot;sxc-zj&quot;</div><div class="line">#else</div><div class="line">    let scheme = &quot;&quot;</div><div class="line">#endif</div></pre></td></tr></table></figure>
</li>
<li><p>ç»„ä»¶åŒ–çš„è¯ï¼Œä½¿ç”¨äº†è‡ªå·±å¼€å‘çš„<a href="https://github.com/qcyl/QCRouter" target="_blank" rel="external">QCRouter</a>æ¥è¿›è¡Œè§£è€¦ï¼Œæ€è·¯ä¸çŸ¥é“å¯¹ä¸å¯¹ï¼Œå¤§å®¶æœ‰ä»€ä¹ˆå¥½çš„å»ºè®®å¯ä»¥æä¸€ä¸‹ã€‚</p>
</li>
<li><p>åˆ›å»ºç±»çš„æ—¶å€™è¦æ³¨æ„é€‰æ‹©æ­£ç¡®çš„Target</p>
<p> <img src="http://ocga9x543.bkt.clouddn.com/WX20170707-152510.png" alt=""></p>
</li>
</ol>
<hr>
<p>æœ¬æ–‡<a href="https://github.com/qcyl/SXC_demo" target="_blank" rel="external">demo</a>åœ°å€</p>
<h2 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h2><ol>
<li><a href="http://ibloodline.com/articles/2016/06/16/multiple-targets.html" target="_blank" rel="external">iOSé¡¹ç›®ä¸­å¤štargetçš„é…ç½®</a></li>
<li><a href="http://www.jianshu.com/p/0c640821b36f" target="_blank" rel="external">CocoaPods ç§æœ‰ä»“åº“çš„åˆ›å»ºï¼ˆè¶…è¯¦ç»†ï¼‰</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å› ä¸ºå…¬å¸é¡¹ç›®çš„ç‰¹æ€§ï¼šæ¯ä¸ªåŸå¸‚å¯¹åº”ä¸€ä¸ªAPPï¼Œæ¯ä¸ªAPPåˆæœ‰ç€æˆ–å¤šæˆ–å°‘çš„åŒºåˆ«ï¼›&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å¼€å‘äººå‘˜é¢ä¸´çš„é—®é¢˜æ˜¯ï¼šå¼€å‘å¤šä¸ªç›¸ä¼¼APPã€‚&lt;
    
    </summary>
    
      <category term="iOS" scheme="http://blog.qczyl.club/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€ŠObjective-Cé«˜çº§ç¼–ç¨‹ iOSä¸OS Xå¤šçº¿ç¨‹å’Œå†…å­˜ç®¡ç†ã€‹è¯»ä¹¦ç¬”è®° GCDç¯‡</title>
    <link href="http://blog.qczyl.club/2017/07/03/%E3%80%8AObjective-C%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%20iOS%E4%B8%8EOS%20X%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%20GCD%E7%AF%87/"/>
    <id>http://blog.qczyl.club/2017/07/03/ã€ŠObjective-Cé«˜çº§ç¼–ç¨‹ iOSä¸OS Xå¤šçº¿ç¨‹å’Œå†…å­˜ç®¡ç†ã€‹è¯»ä¹¦ç¬”è®° GCDç¯‡/</id>
    <published>2017-07-03T06:14:08.000Z</published>
    <updated>2017-07-03T06:38:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« ä¸»è¦ç»™å¤§å®¶è®²è§£ä¸€ä¸‹GCDçš„å¹³æ—¶ä¸å¤ªå¸¸ç”¨çš„APIï¼Œä»¥åŠæ–‡æœ«ä¼šè´´å‡ºGCDå®šæ—¶å™¨çš„ä¸€ä¸ªå°ä¾‹å­ã€‚</p>
<h2 id="1-GCDçš„API"><a href="#1-GCDçš„API" class="headerlink" title="1.GCDçš„API"></a>1.GCDçš„API</h2><h3 id="1-1-Dispatch-Queue"><a href="#1-1-Dispatch-Queue" class="headerlink" title="1.1 Dispatch Queue"></a>1.1 Dispatch Queue</h3><p>è¦è°ˆGCDï¼Œå°±ä¸€å®šè¦äº†è§£<code>Dispatch Queue</code>ï¼ˆæ‰§è¡Œå¤„ç†çš„ç­‰å¾…é˜Ÿåˆ—ï¼‰ã€‚<br><code>Dispatch Queue</code>æŒ‰ç…§è¿½åŠ çš„é¡ºåºï¼ˆå…ˆè¿›å…ˆå‡ºFIFOï¼ŒFirst-In-First-Outï¼‰æ‰§è¡Œå¤„ç†ã€‚<br>å¦å¤–åœ¨æ‰§è¡Œå¤„ç†æ˜¯å­˜åœ¨ä¸¤ç§<code>Dispatch Queue</code>ï¼Œä¸€ç§æ˜¯ç­‰å¾…ç°åœ¨æ‰§è¡Œä¸­å¤„ç†çš„<code>Serial Dispatch Queue</code>ï¼Œå¦ä¸€ç§æ˜¯ä¸ç­‰å¾…ç°åœ¨æ‰§è¡Œä¸­å¤„ç†çš„<code>Concurrent Dispatch Queue</code>ã€‚</p>
<p><img src="http://ocga9x543.bkt.clouddn.com/WX20170703-111143.png" alt=""></p>
<h3 id="1-2-dispatch-queue-create"><a href="#1-2-dispatch-queue-create" class="headerlink" title="1.2 dispatch_queue_create"></a>1.2 dispatch_queue_create</h3><p>ç”±äºå¹³æ—¶åœ¨ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†éƒ½æ˜¯ä½¿ç”¨ç³»ç»Ÿæä¾›çš„<code>Main Dispatch Queue</code>å’Œ<code>Global Dispatch Queue</code>ã€‚<br>æ‰€ä»¥å…³äº<code>dispatch_queue_create</code>APIï¼Œè¿™é‡Œåªè¯´ä¸¤ç‚¹ï¼š</p>
<ul>
<li>é€šè¿‡<code>dispatch_queue_create</code>å‡½æ•°ç”Ÿæˆçš„<code>Dispatch Queue</code>åœ¨ä½¿ç”¨ç»“æŸåè¦é€šè¿‡<code>dispatch_release</code>å‡½æ•°é‡Šæ”¾ã€‚</li>
<li>å¦‚æœç”Ÿæˆè¿‡å¤šçš„çº¿ç¨‹ï¼Œå°±ä¼šæ¶ˆè€—å¤§é‡å†…å­˜ï¼Œå¤§å¹…åº¦é™ä½ç³»ç»Ÿçš„å“åº”æ€§èƒ½ã€‚è€Œä½¿ç”¨ç³»ç»Ÿæä¾›çš„<code>Global Dispatch Queue</code>åˆ™ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ã€‚æ‰€ä»¥é™¤éå¿…è¦ï¼Œå…¶ä»–æƒ…å†µå»ºè®®ä½¿ç”¨ç³»ç»Ÿæä¾›çš„<code>Dispatch Queue</code>ã€‚</li>
</ul>
<h3 id="1-3-dispatch-set-target-queue"><a href="#1-3-dispatch-set-target-queue" class="headerlink" title="1.3 dispatch_set_target_queue"></a>1.3 dispatch_set_target_queue</h3><p>ä½¿ç”¨<code>dispatch_queue_create</code>å‡½æ•°ç”Ÿæˆçš„<code>Dispatch Queue</code>ï¼Œéƒ½ä½¿ç”¨çš„æ˜¯ä¸ç³»ç»Ÿæä¾›çš„<code>Global Dispatch Queue</code>çš„é»˜è®¤ä¼˜å…ˆçº§ç›¸åŒçš„ä¼˜å…ˆçº§ã€‚è€Œè¦å˜æ›´ç”Ÿæˆçš„æ‰§è¡Œä¼˜å…ˆçº§çš„è¯å°±è¦ä½¿ç”¨<code>dispatch_set_target_queue</code>å‡½æ•°ã€‚</p>
<p>åœ¨åå°æ‰§è¡ŒåŠ¨ä½œå¤„ç†çš„<code>Serial Dispatch Queue</code>çš„ç”Ÿæˆæ–¹æ³•å¦‚ä¸‹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t mySerialDispatchQueue = dispatch_queue_create(&quot;com.example.gcd.mySerialDispatchQueue&quot;, NULL);</div><div class="line">   dispatch_queue_t globalDispatchQueueBackground = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0);</div><div class="line">   dispatch_set_target_queue(mySerialDispatchQueue, globalDispatchQueueBackground);</div></pre></td></tr></table></figure>
<h3 id="1-3-dispatch-after"><a href="#1-3-dispatch-after" class="headerlink" title="1.3 dispatch_after"></a>1.3 dispatch_after</h3><p><code>dispatch_after</code>è¿™é‡Œåªè¯´ä¸€ç‚¹ï¼Œ<code>dispatch_after</code>å‡½æ•°å¹¶ä¸æ˜¯åœ¨æŒ‡å®šæ—¶é—´åæ‰§è¡Œå¤„ç†ï¼Œè€Œåªæ˜¯åœ¨æŒ‡å®šæ—¶é—´è¿½åŠ å¤„ç†åˆ°<code>Dispatch Queue</code>ã€‚</p>
<p>å› ä¸º<code>Main Dispatch Queue</code>åœ¨ä¸»çº¿ç¨‹çš„<code>RunLoop</code>ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥åœ¨æ¯”å¦‚æ¯éš”1/60ç§’æ‰§è¡Œçš„<code>RunLoop</code>ä¸­ï¼ŒBlockæœ€å¿«åœ¨ 3 ç§’åæ‰§è¡Œï¼Œæœ€æ…¢åœ¨ 3 ç§’ + 1/60 ç§’åæ‰§è¡Œï¼Œå¹¶ä¸”åœ¨<code>Main Dispatch Queue</code>æœ‰å¤§é‡å¤„ç†è¿½åŠ æˆ–ä¸»çº¿ç¨‹çš„å¤„ç†æœ¬èº«æœ‰å»¶è¿Ÿæ—¶ï¼Œè¿™ä¸ªæ—¶é—´ä¼šæ›´é•¿ã€‚</p>
<p>æ‰€ä»¥è¯¥å‡½æ•°åœ¨æœ‰ä¸¥æ ¼æ—¶é—´è¦æ±‚çš„æƒ…å†µä¸‹ä½¿ç”¨ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯åªæ˜¯æƒ³å¤§è‡´å»¶è¿Ÿæ‰§è¡Œå¤„ç†ï¼Œè¯¥å‡½æ•°æ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚</p>
<h3 id="1-4-dispatch-barrier-async"><a href="#1-4-dispatch-barrier-async" class="headerlink" title="1.4 dispatch_barrier_async"></a>1.4 dispatch_barrier_async</h3><p>åœ¨è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å¯èƒ½ä¼šäº§ç”Ÿæ•°æ®ç«äº‰çš„é—®é¢˜ï¼Œå½“ç„¶ä½¿ç”¨<code>Serial Dispatch Queue</code>å¯é¿å…æ•°æ®ç«äº‰ã€‚</p>
<p>ä½†æ˜¯å¦‚æœè¯»å–å¤„ç†åªæ˜¯ä¸è¯»å–å¤„ç†å¹¶è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆå¤šä¸ªå¹¶è¡Œæ‰§è¡Œå°±ä¸ä¼šå‘ç”Ÿé—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸ºäº†é«˜æ•ˆç‡çš„è¿›è¡Œè®¿é—®ï¼Œè¯»å–å¤„ç†è¿½åŠ åˆ°<code>Concurrent Dispatch Queue</code>ï¼Œå†™å…¥å¤„ç†åœ¨ä»»ä¸€è¯»å–å¤„ç†æ²¡æœ‰æ‰§è¡Œçš„çŠ¶æ€ä¸‹ï¼Œè¿½åŠ åˆ°<code>Serial Dispatch Queue</code>ä¸­å³å¯ï¼ˆåœ¨å†™å…¥å¤„ç†ç»“æŸä¹‹å‰ï¼Œè¯»å–å¤„ç†ä¸å¯æ‰§è¡Œï¼‰ã€‚</p>
<p>ä½¿ç”¨<code>dispatch_barrier_async</code>ä¾¿å¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<code>dispatch_barrier_async</code>å‡½æ•°ä¼šç­‰å¾…è¿½åŠ åˆ°<code>Concurrent Dispatch Queue</code>ä¸Šçš„å¹¶è¡Œæ‰§è¡Œçš„å¤„ç†å…¨éƒ¨ç»“æŸåï¼Œå†å°†åˆ¶å®šçš„å¤„ç†è¿½åŠ åˆ°è¯¥<code>Concurrent Dispatch Queue</code>ä¸­ã€‚ç„¶ååœ¨ç”±<code>dispatch_barrier_async</code>å‡½æ•°è¿½åŠ çš„å¤„ç†æ‰§è¡Œå®Œæ¯•åï¼Œ<code>Concurrent Dispatch Queue</code>æ‰æ¢å¤ä¸ºä¸€èˆ¬çš„åŠ¨ä½œï¼Œè¿½åŠ åˆ°è¯¥<code>Concurrent Dispatch Queue</code>çš„å¤„ç†åˆå¼€å§‹å¹¶è¡Œæ‰§è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">dispatch_async(queue, blk0_for_reading);</div><div class="line">dispatch_async(queue, blk1_for_reading);</div><div class="line">dispatch_async(queue, blk2_for_reading);</div><div class="line">dispatch_async(queue, blk3_for_reading);</div><div class="line">dispatch_barrier_async(queue, blk_for_writing);</div><div class="line">dispatch_async(queue, blk4_for_reading);</div><div class="line">dispatch_async(queue, blk5_for_reading);</div><div class="line">dispatch_async(queue, blk6_for_reading);</div><div class="line">dispatch_async(queue, blk7_for_reading);</div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œä½¿ç”¨æ–¹æ³•éå¸¸ç®€å•ã€‚ä»…ä½¿ç”¨<code>dispatch_barrier_async</code>å‡½æ•°ä»£æ›¿<code>dispatch_async</code>å‡½æ•°å³å¯ã€‚</p>
<p><img src="http://ocga9x543.bkt.clouddn.com/WX20170703-115939.png" alt=""></p>
<h3 id="1-5-dispatch-apply"><a href="#1-5-dispatch-apply" class="headerlink" title="1.5 dispatch_apply"></a>1.5 dispatch_apply</h3><p><code>dispatch_apply</code>å‡½æ•°æ˜¯<code>dispatch_sync</code>å‡½æ•°å’Œ<code>Dispatch Group</code>çš„å…³è”APIã€‚è¯¥å‡½æ•°æŒ‰æŒ‡å®šçš„æ¬¡æ•°å°†æŒ‡å®šçš„Blockè¿½åŠ åˆ°æŒ‡å®šçš„<code>Dispatch Queue</code>ä¸­ï¼Œå¹¶ç­‰å¾…å…¨éƒ¨å¤„ç†æ‰§è¡Œç»“æŸã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">dispatch_apply(10, queue, ^(size_t index) &#123;</div><div class="line">    NSLog(@&quot;%zu&quot;, index);</div><div class="line">&#125;);</div><div class="line">NSLog(@&quot;done&quot;);</div></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼Œè¯¥æºä»£ç çš„æ‰§è¡Œç»“æœä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">4</div><div class="line">1</div><div class="line">0</div><div class="line">3</div><div class="line">5</div><div class="line">2</div><div class="line">6</div><div class="line">8</div><div class="line">9</div><div class="line">7</div><div class="line">done</div></pre></td></tr></table></figure>
<p>å› ä¸ºåœ¨<code>Global Dispatch Queue</code>ä¸­æ‰§è¡Œå¤„ç†ï¼Œæ‰€ä»¥å„ä¸ªå¤„ç†çš„æ‰§è¡Œæ—¶é—´ä¸å®šã€‚ä½†æ˜¯è¾“å‡ºç»“æœä¸­æœ€åçš„doneå¿…å®šåœ¨æœ€åçš„ä½ç½®ä¸Šã€‚è¿™æ˜¯å› ä¸º<code>dispatch_apply</code>å‡½æ•°ä¼šç­‰å¾…å…¨éƒ¨å¤„ç†æ‰§è¡Œç»“æŸã€‚</p>
<h3 id="1-6-Dispatch-I-O"><a href="#1-6-Dispatch-I-O" class="headerlink" title="1.6 Dispatch I/O"></a>1.6 Dispatch I/O</h3><p>å¤§å®¶å¯èƒ½æƒ³è¿‡ï¼Œåœ¨è¯»å–è¾ƒå¤§æ–‡ä»¶æ—¶ï¼Œå¦‚æœå°†æ–‡ä»¶åˆ†æˆåˆé€‚çš„å¤§å°å¹¶ä½¿ç”¨<code>Global Dispatch Queue</code>å¹¶åˆ—è¯»å–çš„è¯ï¼Œåº”è¯¥ä¼šæ¯”ä¸€èˆ¬çš„è¯»å–é€Ÿåº¦å¿«ä¸å°‘ã€‚èƒ½å®ç°è¿™ä¸€åŠŸèƒ½çš„å°±æ˜¯<code>Dispatch I/O</code>å’Œ<code>Dispatch Data</code>ã€‚</p>
<p><img src="http://ocga9x543.bkt.clouddn.com/WX20170703-140234.png" alt=""></p>
<p>å¦‚æœæƒ³æé«˜æ–‡ä»¶è¯»å–é€Ÿåº¦ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨<code>Dispatch I/O</code>ã€‚</p>
<h3 id="1-7-Dispatch-Source"><a href="#1-7-Dispatch-Source" class="headerlink" title="1.7 Dispatch Source"></a>1.7 Dispatch Source</h3><p>GCDä¸­å‡ºäº†ä¸»è¦çš„<code>Dispatch Queue</code>å¤–ï¼Œè¿˜æœ‰ä¸å¤ªå¼•äººæ³¨ç›®çš„<code>Dispatch Source</code>ã€‚å®ƒæ˜¯BSDç³»å†…æ ¸æƒ¯æœ‰åŠŸèƒ½<code>kqueue</code>çš„åŒ…è£…ã€‚<br><code>kqueue</code>æ˜¯åœ¨XNUå†…æ ¸ä¸­å‘ç”Ÿå„ç§äº‹ä»¶æ—¶ï¼Œåœ¨åº”ç”¨ç¨‹åºç¼–ç¨‹æ–¹æ‰§è¡Œå¤„ç†çš„æŠ€æœ¯ã€‚å…¶CPUè´Ÿè·éå¸¸å°ï¼Œå°½é‡ä¸å ç”¨èµ„æºã€‚<code>kqueue</code>å¯ä»¥è¯´æ˜¯åº”ç”¨ç¨‹åºå¤„ç†XNUå†…æ ¸ä¸­å‘ç”Ÿçš„å„ç§äº‹ä»¶çš„æ–¹æ³•ä¸­æœ€ä¼˜ç§€çš„ä¸€ç§ã€‚</p>
<p><code>Dispatch Source</code>å¯ä»¥å¤„ç†ä¸€ä¸‹äº‹ä»¶ã€‚</p>
<p><img src="http://ocga9x543.bkt.clouddn.com/WX20170703-141244.png" alt=""></p>
<p>åœ¨ä½¿ç”¨NSTimeråšå®šæ—¶å™¨çš„æ—¶å€™ï¼Œå¤§å®¶åº”è¯¥éƒ½çŸ¥é“å¦‚æœä½¿ç”¨ä¸å½“ï¼Œä¼šå‡ºç°å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚<br>è€Œå¦‚æœä½œä¸ºä¸€ä¸ªå°è£…çš„ç»„ä»¶æ¥è¯´ï¼Œå°±éœ€è¦å°†NSTimerå±æ€§æš´éœ²å‡ºæ¥ï¼Œåœ¨æ§åˆ¶å™¨é”€æ¯æ—¶ï¼Œè°ƒç”¨NSTimerçš„invalidateæ–¹æ³•ã€‚å¦‚æœå¿˜è®°çš„è¯å°±ä¼šå†…å­˜æ³„æ¼ï¼</p>
<p>ä½†æ˜¯ä½¿ç”¨<code>DISPATCH_SOUTCE_TYPE_TIMER</code>çš„è¯å°±ä¸éœ€è¦æ‹…å¿ƒè¿™ä¸ªé—®é¢˜äº†ã€‚</p>
<p><a href="https://github.com/qcyl/GCD-Timer-Demo" target="_blank" rel="external">æ­¤å¤„</a>ä¸ºä½¿ç”¨äº†<code>DISPATCH_SOUTCE_TYPE_TIMER</code>çš„å®šæ—¶å™¨çš„å°demoã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦ç»™å¤§å®¶è®²è§£ä¸€ä¸‹GCDçš„å¹³æ—¶ä¸å¤ªå¸¸ç”¨çš„APIï¼Œä»¥åŠæ–‡æœ«ä¼šè´´å‡ºGCDå®šæ—¶å™¨çš„ä¸€ä¸ªå°ä¾‹å­ã€‚&lt;/p&gt;
&lt;h2 id=&quot;1-GCDçš„API&quot;&gt;&lt;a href=&quot;#1-GCDçš„API&quot; class=&quot;headerlink&quot; title=&quot;1.GCDçš„API&quot;&gt;&lt;/a&gt;1.G
    
    </summary>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://blog.qczyl.club/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€ŠObjective-Cé«˜çº§ç¼–ç¨‹ iOSä¸OS Xå¤šçº¿ç¨‹å’Œå†…å­˜ç®¡ç†ã€‹è¯»ä¹¦ç¬”è®° Blockç¯‡</title>
    <link href="http://blog.qczyl.club/2017/06/29/%E3%80%8AObjective-C%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%20iOS%E4%B8%8EOS%20X%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%20Block%E7%AF%87/"/>
    <id>http://blog.qczyl.club/2017/06/29/ã€ŠObjective-Cé«˜çº§ç¼–ç¨‹ iOSä¸OS Xå¤šçº¿ç¨‹å’Œå†…å­˜ç®¡ç†ã€‹è¯»ä¹¦ç¬”è®° Blockç¯‡/</id>
    <published>2017-06-28T16:00:00.000Z</published>
    <updated>2017-06-30T08:57:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºblockéƒ¨åˆ†å†…å®¹è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œå¦‚æœå…¨éƒ¨éƒ½ç»†è®²çš„è¯ï¼Œç¯‡å¹…ä¼šéå¸¸çš„é•¿ã€‚å¼ºçƒˆå»ºè®®å¤§å®¶å»çœ‹<a href="https://item.jd.com/11258970.html" target="_blank" rel="external">æœ¬ä¹¦</a>ï¼ˆ<a href="https://pan.baidu.com/s/1jHNOboq" target="_blank" rel="external">PDFç‰ˆ</a>ï¼‰ã€‚</p>
<p>æ‰€ä»¥æœ¬æ–‡é‡ç‚¹è®²è¿° <strong>Blockå­˜å‚¨åŸŸ</strong> éƒ¨åˆ†çš„å†…å®¹ã€‚</p>
<h2 id="1-Blockçš„å®è´¨"><a href="#1-Blockçš„å®è´¨" class="headerlink" title="1.Blockçš„å®è´¨"></a>1.Blockçš„å®è´¨</h2><blockquote>
<p>è¦è¯´å„ç§Blockç›¸å…³å†…å®¹çš„è¯ï¼Œä¸€å®šè¦å…ˆäº†è§£Blockçš„å®è´¨ã€‚</p>
</blockquote>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡<a href="https://zh.wikipedia.org/wiki/Clang" target="_blank" rel="external">clang</a>è½¬æ¢Blockè¯­æ³•ã€‚(æºç å¤ªå¤šï¼Œæ‰€ä»¥æˆªå›¾ï¼Œè¯·è§è°…)</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-4d74e021c947bec2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>æ­¤æºç çš„Blockè¯­æ³•æœ€ä¸ºç®€å•ï¼Œè¯¥æºç é€šè¿‡<a href="https://zh.wikipedia.org/wiki/Clang" target="_blank" rel="external">clang</a>å¯å˜æ¢ä¸ºä»¥ä¸‹å½¢å¼ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-1a4dec8ed13c898e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>æˆ‘ä»¬ç›®å‰éœ€è¦é‡ç‚¹å…³å¿ƒçš„ä¸ºçº¢è‰²åœˆå‡ºçš„éƒ¨åˆ†ã€‚</p>
<h2 id="2-Blockå­˜å‚¨åŸŸ"><a href="#2-Blockå­˜å‚¨åŸŸ" class="headerlink" title="2.Blockå­˜å‚¨åŸŸ"></a>2.Blockå­˜å‚¨åŸŸ</h2><p><img src="http://upload-images.jianshu.io/upload_images/1787055-92df46c39f580f29.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>ä¸Šè¿°æºç é€šè¿‡<code>impl.isa = &amp;_NSConcreteStackBlcok;</code>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè¯¥Blockçš„ç±»ä¸º_NSConcreteStackBlcokï¼Œè®¾ç½®åœ¨æ ˆä¸Šã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹çœ‹è®¾ç½®åœ¨æ•°æ®åŒºåŸŸçš„Blockï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">void (^blk)(void) = ^&#123;printf(&quot;Global Block\n&quot;);&#125;;</div><div class="line">int main()</div><div class="line">&#123;</div></pre></td></tr></table></figure>
<p>æ­¤æºä»£ç é€šè¿‡å£°æ˜å…¨å±€å˜é‡blkæ¥ä½¿ç”¨Blockè¯­æ³•ã€‚å¦‚æœè½¬æ¢è¯¥æºä»£ç ï¼ŒBlockç”¨ç»“æ„ä½“çš„æˆå‘˜å˜é‡isaçš„åˆå§‹åŒ–å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">impl.isa = &amp;_NSConcreteGlobalBlcok;</div></pre></td></tr></table></figure>
<p>è¯¥Blockçš„ç±»ä¸º_NSConcreteGlobalBlcokç±»ã€‚å› ä¸ºåœ¨ä½¿ç”¨å…¨å±€å˜é‡çš„åœ°æ–¹ä¸èƒ½ä½¿ç”¨è‡ªåŠ¨å˜é‡æ²¡æ‰€ä»¥ä¸å­˜åœ¨å¯¹è‡ªåŠ¨å˜é‡è¿›è¡Œæˆªè·ã€‚</p>
<p>æ‰€ä»¥åªè¦Blockä¸æˆªè·è‡ªåŠ¨å˜é‡ï¼Œå°±å¯ä»¥å°†Blockç”¨ç»“æ„ä½“å®ä¾‹è®¾ç½®åœ¨ç¨‹åºçš„æ•°æ®åŒºåŸŸã€‚</p>
<p>é…ç½®åœ¨å…¨å±€å˜é‡ä¸Šçš„Blockï¼Œä»å˜é‡ä½œç”¨åŸŸå¤–ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡é’ˆå®‰å…¨çš„ä½¿ç”¨ã€‚ä½†è®¾ç½®åœ¨æ ˆä¸Šçš„Blockï¼Œå¦‚æœå…¶æ‰€å±çš„å˜é‡ä½œç”¨äºç»“æŸï¼Œè¯¥Blockå°±è¢«åºŸå¼ƒã€‚ç”±äº<strong>blcokå˜é‡ä¹Ÿé…ç½®åœ¨æ ˆä¸Šï¼ŒåŒæ ·çš„ï¼Œå¦‚æœå…¶æ‰€å±çš„ä½œç”¨åŸŸç»“æŸï¼Œåˆ™è¯¥</strong>blockå˜é‡ä¹Ÿä¼šè¢«åºŸå¼ƒã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-9dc8a736878353ff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>Blockæä¾›äº†å°†Blockå’Œ__blockå˜é‡ä»æ ˆä¸Šå¤åˆ¶åˆ°å †ä¸Šçš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å°†é…ç½®åœ¨æ ˆä¸Šçš„Blockå¤åˆ¶åˆ°å †ä¸Šï¼Œè¿™æ ·å³ä½¿Blockè¯­æ³•æ‰€å±çš„å˜é‡ä½œç”¨åŸŸç»“æŸï¼Œå †ä¸Šçš„Blockè¿˜å¯ä»¥ç»§ç»­å­˜åœ¨ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-355a3424f29d8f22.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>å¤åˆ¶åˆ°å †ä¸Šçš„Blockå°†_NSConcreteMallocBlcokç±»å¯¹è±¡å†™å…¥Blockç”¨ç»“æ„ä½“å®ä¾‹çš„æˆå‘˜å˜é‡isaã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">impl.isa = &amp; _NSConcreteMallocBlcok;</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆBlcokæä¾›çš„å¤åˆ¶æ–¹æ³•ç©¶ç«Ÿæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®é™…ä¸Šå½“ARCæœ‰æ•ˆæ—¶ï¼Œå¤§å¤šæ•°æƒ…å½¢ä¸‹ç¼–è¯‘å™¨ä¼šæ°å½“åœ°è¿›è¡Œåˆ¤æ–­ï¼Œè‡ªåŠ¨ç”Ÿæˆå°†Blockä»æ ˆä¸Šå¤åˆ¶åˆ°å †ä¸Šçš„ä»£ç ã€‚</p>
<p>ä¾‹å¦‚ï¼šå°†Blcokä½œä¸ºå‡½æ•°è¿”å›å€¼è¿”å›æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆå¤åˆ¶åˆ°å †ä¸Šçš„ä»£ç ã€‚</p>
<p>å‰é¢è®²åˆ°è¿‡â€œå¤§å¤šæ•°æƒ…å†µä¸‹ç¼–è¯‘å™¨ä¼šæ°å½“åœ°è¿›è¡Œåˆ¤æ–­â€ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å¤–çš„æƒ…å†µä¸‹éœ€è¦æ‰‹åŠ¨ç”Ÿæˆä»£ç ï¼Œå°†Blockä»æ ˆä¸Šå¤åˆ¶åˆ°å †ä¸Šã€‚æ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨â€œcopyå®ä¾‹æ–¹æ³•â€ã€‚é‚£ä¹ˆç¼–è¯‘å™¨ä¸èƒ½è¿›è¡Œåˆ¤æ–­çš„ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ ·çš„çŠ¶å†µå‘¢ï¼Ÿå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>å‘æ–¹æ³•æˆ–å‡½æ•°çš„å‚æ•°ä¸­ä¼ é€’Blockæ—¶</li>
</ul>
<p>ä½†æ˜¯å¦‚æœåœ¨æ–¹æ³•æˆ–å‡½æ•°ä¸­æ°å½“åœ°å¤åˆ¶äº†ä¼ é€’è¿‡æ¥çš„å‚æ•°ï¼Œé‚£ä¹ˆå°±ä¸å¿…å†è°ƒç”¨è¯¥æ–¹æ³•æˆ–å‡½æ•°å‰æ‰‹åŠ¨å¤åˆ¶äº†ã€‚ä»¥ä¸‹æ–¹æ³•æˆ–å‡½æ•°ä¸ç”¨æ‰‹åŠ¨å¤åˆ¶ã€‚</p>
<ul>
<li>Cocoaæ¡†æ¶çš„æ–¹æ³•ä¸”æ–¹æ³•åä¸­å«æœ‰usingBlockç­‰æ—¶</li>
<li>GCDçš„API</li>
</ul>
<p>ä¸¾ä¸ªå…·ä½“ä¾‹å­ï¼Œåœ¨ä½¿ç”¨NSArrayç±»çš„enumerateObjectsUsingBlockå®ä¾‹æ–¹æ³•ä»¥åŠdispatch_asyncå‡½æ•°æ—¶ï¼Œä¸ç”¨æ‰‹åŠ¨å¤åˆ¶ã€‚ç›¸ååœ°ï¼Œåœ¨NSArrayç±»çš„initWithObjectså®ä¾‹æ–¹æ³•ä¸Šä¼ é€’Blockæ—¶éœ€è¦æ‰‹åŠ¨å¤åˆ¶ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹æºä»£ç ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (id)getBlockArray </div><div class="line">&#123;</div><div class="line">	int val = 10;</div><div class="line">	return [[NSArray alloc] initWithObjects:</div><div class="line">			^&#123;NSLog(@&quot;blk0:%d&quot;, val)&#125;,</div><div class="line">			^&#123;NSLog(@&quot;blk1:%d&quot;, val)&#125;, nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>getBlockArrayæ–¹æ³•åœ¨æ ˆä¸Šç”Ÿæˆä¸¤ä¸ªBlockï¼Œå¹¶ä¼ é€’ç»™NSArrayç±»çš„initWithObjectså®ä¾‹æ–¹æ³•ã€‚ä¸‹é¢ï¼Œåœ¨getBlockArrayæ–¹æ³•è°ƒç”¨æ–¹ï¼Œä»NSArrayå¯¹è±¡ä¸­å–å‡ºBlockå¹¶æ‰§è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">id obj = getBlockArray();</div><div class="line">typedef void (^blk_t)(void);</div><div class="line">blk_t blk = (blk_t)[obj objectAtIndex:0];</div><div class="line">blk();</div></pre></td></tr></table></figure>
<p>è¯¥æºä»£ç çš„blk()ï¼Œå³Blockåœ¨æ‰§è¡Œæ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œåº”ç”¨ç¨‹åºå¼ºåˆ¶ç»“æŸã€‚è¿™æ˜¯ç”±äºåœ¨getBlockArrayå‡½æ•°æ‰§è¡Œç»“æŸæ—¶ï¼Œæ ˆä¸Šçš„Blockè¢«åºŸå¼ƒçš„ç¼˜æ•…ã€‚å¯æƒœæ­¤æ—¶ç¼–è¯‘å™¨ä¸èƒ½åˆ¤æ–­æ˜¯å¦éœ€è¦å¤åˆ¶ã€‚ä¹Ÿå¯ä»¥ä¸è®©ç¼–è¯‘å™¨è¿›è¡Œåˆ¤æ–­ï¼Œè€Œä½¿å…¶åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½èƒ½å¤åˆ¶ã€‚ä½†å°†Blockä»æ ˆä¸Šå¤åˆ¶åˆ°å †ä¸Šæ˜¯ç›¸å½“æ¶ˆè€—CPUçš„ã€‚å½“Blockè®¾ç½®åœ¨æ ˆä¸Šä¹Ÿèƒ½ä½¿ç”¨æ—¶ï¼Œå°†Blockä»æ ˆä¸Šå¤åˆ¶åˆ°å †ä¸Šåªæ˜¯åœ¨æµªè´¹CPUèµ„æºã€‚å› æ­¤åªåœ¨æ­¤æƒ…å½¢ä¸‹è®©ç¼–ç¨‹äººå‘˜æ‰‹åŠ¨è¿›è¡Œå¤åˆ¶ã€‚</p>
<p>è¯¥æºä»£ç åƒä¸‹é¢è¿™æ ·ä¿®æ”¹ä¸€ä¸‹å³å¯æ­£å¸¸è¿è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	int val = 10;</div><div class="line">	return [[NSArray alloc] initWithObjects:</div><div class="line">			[^&#123;NSLog(@&quot;blk0:%d&quot;, val)&#125; copy],</div><div class="line">			[^&#123;NSLog(@&quot;blk1:%d&quot;, val)&#125; copy], nil];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œå¯¹äºå·²é…ç½®åœ¨å †ä¸Šçš„Blockä»¥åŠé…ç½®åœ¨ç¨‹åºçš„æ•°æ®åŒºåŸŸä¸Šçš„Blcokï¼Œè°ƒç”¨copyæ–¹æ³•åˆä¼šå¦‚ä½•å‘¢ï¼Ÿ</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-d05dc12aae560c11.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>ä¸ç®¡Blocké…ç½®åœ¨ä½•å¤„ï¼Œç”¨copyæ–¹æ³•å¤åˆ¶éƒ½ä¸ä¼šå¼•èµ·ä»»ä½•é—®é¢˜ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”±äºblockéƒ¨åˆ†å†…å®¹è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œå¦‚æœå…¨éƒ¨éƒ½ç»†è®²çš„è¯ï¼Œç¯‡å¹…ä¼šéå¸¸çš„é•¿ã€‚å¼ºçƒˆå»ºè®®å¤§å®¶å»çœ‹&lt;a href=&quot;https://item.jd.com/11258970.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æœ¬ä¹¦&lt;/a&gt;ï¼ˆ&lt;a href=&quot;ht
    
    </summary>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://blog.qczyl.club/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€ŠObjective-Cé«˜çº§ç¼–ç¨‹ iOSä¸OS Xå¤šçº¿ç¨‹å’Œå†…å­˜ç®¡ç†ã€‹è¯»ä¹¦ç¬”è®° è‡ªåŠ¨å¼•ç”¨è®¡æ•°ç¯‡</title>
    <link href="http://blog.qczyl.club/2017/06/28/%E3%80%8AObjective-C%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%20iOS%E4%B8%8EOS%20X%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%20%E8%87%AA%E5%8A%A8%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E7%AF%87/"/>
    <id>http://blog.qczyl.club/2017/06/28/ã€ŠObjective-Cé«˜çº§ç¼–ç¨‹ iOSä¸OS Xå¤šçº¿ç¨‹å’Œå†…å­˜ç®¡ç†ã€‹è¯»ä¹¦ç¬”è®° è‡ªåŠ¨å¼•ç”¨è®¡æ•°ç¯‡/</id>
    <published>2017-06-27T17:00:00.000Z</published>
    <updated>2017-06-30T08:54:36.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­ï¼š"><a href="#å¯¼è¯­ï¼š" class="headerlink" title="å¯¼è¯­ï¼š"></a>å¯¼è¯­ï¼š</h4><blockquote>
<p>é¡¾åæ€ä¹‰ï¼Œè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼ŒAutomatic Reference Countingï¼‰æ˜¯æŒ‡å†…å­˜ç®¡ç†ä¸­å¯¹å¼•ç”¨é‡‡å–è‡ªåŠ¨è®¡æ•°çš„æŠ€æœ¯ã€‚ä»¥ä¸‹æ‘˜è‡ªè‹¹æœçš„å®˜æ–¹è¯´æ˜ã€‚</p>
<p>åœ¨Objective-C ä¸­é‡‡ç”¨Automatic Reference Countingï¼ˆARCï¼‰æœºåˆ¶ï¼Œè®©ç¼–è¯‘å™¨æ¥è¿›è¡Œå†…å­˜ç®¡ç†ã€‚åœ¨æ–°ä¸€ä»£Apple LLVM ç¼–è¯‘å™¨ä¸­è®¾ç½®ARC ä¸ºæœ‰æ•ˆçŠ¶æ€ï¼Œå°±æ— éœ€å†æ¬¡é”®å…¥retain æˆ–è€…release ä»£ç ï¼Œè¿™åœ¨é™ä½ç¨‹åºå´©æºƒã€å†…å­˜æ³„æ¼ç­‰é£é™©çš„åŒæ—¶ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº†å¼€å‘ç¨‹åºçš„å·¥ä½œé‡ã€‚ç¼–è¯‘å™¨å®Œå…¨æ¸…æ¥šç›®æ ‡å¯¹è±¡ï¼Œå¹¶èƒ½ç«‹åˆ»é‡Šæ”¾é‚£äº›ä¸å†è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œåº”ç”¨ç¨‹åºå°†å…·æœ‰å¯é¢„æµ‹æ€§ï¼Œä¸”èƒ½æµç•…è¿è¡Œï¼Œé€Ÿåº¦ä¹Ÿå°†å¤§å¹…æå‡ã€‚</p>
</blockquote>
<h3 id="ä¸€ã€å†…å­˜ç®¡ç†çš„æ€è€ƒæ–¹å¼"><a href="#ä¸€ã€å†…å­˜ç®¡ç†çš„æ€è€ƒæ–¹å¼" class="headerlink" title="ä¸€ã€å†…å­˜ç®¡ç†çš„æ€è€ƒæ–¹å¼"></a>ä¸€ã€å†…å­˜ç®¡ç†çš„æ€è€ƒæ–¹å¼</h3><blockquote>
<p>çœ‹åˆ°â€å¼•ç”¨è®¡æ•°â€è¿™ä¸ªåç§°ï¼Œæˆ‘ä»¬ä¾¿ä¼šä¸è‡ªè§‰åœ°è”æƒ³åˆ°â€æŸå¤„æœ‰æŸç‰©å¤šå°‘å¤šå°‘â€è€Œå°†æ³¨æ„åŠ›æ”¾åˆ°è®¡æ•°ä¸Šã€‚ä½†å…¶å®ï¼Œæ›´åŠ å®¢è§‚ã€æ­£ç¡®çš„æ€è€ƒæ–¹å¼æ˜¯ï¼š</p>
<ul>
<li>è‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±æ‰€æŒæœ‰ã€‚</li>
<li>éè‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±ä¹Ÿèƒ½æŒæœ‰ã€‚</li>
<li>ä¸å†éœ€è¦ è‡ªå·±æŒæœ‰çš„å¯¹è±¡ æ—¶é‡Šæ”¾ã€‚</li>
<li>éè‡ªå·±æŒæœ‰çš„å¯¹è±¡æ— æ³•é‡Šæ”¾ã€‚</li>
</ul>
</blockquote>
<h5 id="1-è‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±æ‰€æŒæœ‰"><a href="#1-è‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±æ‰€æŒæœ‰" class="headerlink" title="1. è‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±æ‰€æŒæœ‰"></a>1. è‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±æ‰€æŒæœ‰</h5><p>ä½¿ç”¨â€ä»¥ä¸‹åç§°å¼€å¤´â€çš„æ–¹æ³•åæ„å‘³ç€è‡ªå·±ç”Ÿæˆçš„å¯¹è±¡åªæœ‰è‡ªå·±æŒæœ‰ï¼š</p>
<ul>
<li>alloc</li>
<li>new</li>
<li>copy</li>
<li>mutableCopy</li>
</ul>
<p>æ³¨ï¼šâ€ä»¥ä¸‹åç§°å¼€å¤´â€åŒ…æ‹¬ allocMyObjectï¼Œä½†ä¸åŒ…æ‹¬ allocmyobjectï¼Œéœ€è¦éµå¾ªé©¼å³°å¼å‘½åè§„èŒƒ</p>
<h5 id="2-éè‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±ä¹Ÿèƒ½æŒæœ‰"><a href="#2-éè‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±ä¹Ÿèƒ½æŒæœ‰" class="headerlink" title="2. éè‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±ä¹Ÿèƒ½æŒæœ‰"></a>2. éè‡ªå·±ç”Ÿæˆçš„å¯¹è±¡ï¼Œè‡ªå·±ä¹Ÿèƒ½æŒæœ‰</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ä¾‹ï¼š</div><div class="line">    // å–å¾—éè‡ªå·±ç”Ÿæˆçš„å¯¹è±¡</div><div class="line">    id obj = [NSMutableArray array];</div><div class="line">    // è‡ªå·±æŒæœ‰</div><div class="line">    [obj retain];</div></pre></td></tr></table></figure>
<p>æ³¨ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè°ƒç”¨è¿™ç±»æ–¹æ³•æ— éœ€è‡ªå·±æŒæœ‰ï¼Œåœ¨NSMutableArrayçš„arrayæ–¹æ³•ä¸­ï¼Œ<br>å·²å°†ç”Ÿæˆçš„å¯¹è±¡æ³¨å†Œåˆ°äº†è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œæ‰€ä»¥æ— éœ€objæŒæœ‰ä¹Ÿä¸ä¼šé‡Šæ”¾ï¼ˆæ³¨é‡Šä¸ºä¸ªäººç†è§£ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡å‡ºï¼‰</p>
<h5 id="3-ä¸å†éœ€è¦-è‡ªå·±æŒæœ‰å¯¹è±¡-æ—¶é‡Šæ”¾"><a href="#3-ä¸å†éœ€è¦-è‡ªå·±æŒæœ‰å¯¹è±¡-æ—¶é‡Šæ”¾" class="headerlink" title="3. ä¸å†éœ€è¦ è‡ªå·±æŒæœ‰å¯¹è±¡ æ—¶é‡Šæ”¾"></a>3. ä¸å†éœ€è¦ è‡ªå·±æŒæœ‰å¯¹è±¡ æ—¶é‡Šæ”¾</h5><p>ç”¨ alloc/new/copy/mutableCopy â€œå¼€å¤´â€çš„æ–¹æ³•ç”Ÿæˆå¹¶æŒæœ‰çš„å¯¹è±¡ï¼Œæˆ–è€…ç”¨ retain æ–¹æ³•æŒæœ‰çš„å¯¹è±¡ï¼Œä¸€æ—¦ä¸å†éœ€è¦ï¼ŒåŠ¡å¿…è¦ç”¨releaseæ–¹æ³•è¿›è¡Œé‡Šæ”¾ã€‚</p>
<h5 id="4-éè‡ªå·±æŒæœ‰çš„å¯¹è±¡æ— æ³•é‡Šæ”¾"><a href="#4-éè‡ªå·±æŒæœ‰çš„å¯¹è±¡æ— æ³•é‡Šæ”¾" class="headerlink" title="4. éè‡ªå·±æŒæœ‰çš„å¯¹è±¡æ— æ³•é‡Šæ”¾"></a>4. éè‡ªå·±æŒæœ‰çš„å¯¹è±¡æ— æ³•é‡Šæ”¾</h5><p>å¯¹äºç”¨alloc/new/copy/mutableCopy æ–¹æ³•ç”Ÿæˆå¹¶æŒæœ‰çš„å¯¹è±¡ï¼Œ<br>æˆ–æ˜¯ç”¨retainæ–¹æ³•æŒæœ‰çš„å¯¹è±¡ï¼Œç”±äºæŒæœ‰è€…æ˜¯è‡ªå·±ï¼Œæ‰€ä»¥åœ¨ä¸éœ€è¦è¯¥å¯¹è±¡æ—¶éœ€è¦å°†å…¶é‡Šæ”¾ã€‚<br>è€Œç”±æ­¤ä»¥å¤–æ‰€å¾—åˆ°çš„å¯¹è±¡ç»å¯¹ä¸èƒ½é‡Šæ”¾ã€‚å€˜è‹¥åœ¨åº”ç”¨ç¨‹åºä¸­é‡Šæ”¾äº†éè‡ªå·±æ‰€æŒæœ‰çš„å¯¹è±¡å°±ä¼šé€ æˆå´©æºƒã€‚</p>
<h3 id="äºŒã€ARCï¼ˆé‡ç‚¹ï¼‰"><a href="#äºŒã€ARCï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="äºŒã€ARCï¼ˆé‡ç‚¹ï¼‰"></a>äºŒã€ARCï¼ˆé‡ç‚¹ï¼‰</h3><blockquote>
<p>â€œå¼•ç”¨è®¡æ•°å¼å†…å­˜ç®¡ç†â€çš„æœ¬è´¨éƒ¨åˆ†åœ¨ARCä¸­å¹¶æ²¡æœ‰æ”¹å˜ã€‚å°±åƒâ€è‡ªåŠ¨å¼•ç”¨è®¡æ•°â€è¿™ä¸ªåç§°è¡¨ç¤ºçš„é‚£æ ·ï¼ŒARCåªæ˜¯è‡ªåŠ¨çš„å¸®åŠ©æˆ‘ä»¬å¤„ç†â€å¼•ç”¨è®¡æ•°â€çš„ç›¸å…³éƒ¨åˆ†</p>
</blockquote>
<h4 id="2-1-æ‰€æœ‰æƒä¿®é¥°ç¬¦"><a href="#2-1-æ‰€æœ‰æƒä¿®é¥°ç¬¦" class="headerlink" title="2.1 æ‰€æœ‰æƒä¿®é¥°ç¬¦"></a>2.1 æ‰€æœ‰æƒä¿®é¥°ç¬¦</h4><ul>
<li>__strongä¿®é¥°ç¬¦</li>
<li>__weakä¿®é¥°ç¬¦</li>
<li>__unsafe_unretainedä¿®é¥°ç¬¦</li>
<li>__autoreleasingä¿®é¥°ç¬¦</li>
</ul>
<h5 id="2-1-1-strongä¿®é¥°ç¬¦"><a href="#2-1-1-strongä¿®é¥°ç¬¦" class="headerlink" title="2.1.1 __strongä¿®é¥°ç¬¦"></a>2.1.1 __strongä¿®é¥°ç¬¦</h5><p>__strongä¿®é¥°ç¬¦æ˜¯idç±»å‹å’Œå¯¹è±¡ç±»å‹é»˜è®¤çš„æ‰€æœ‰æƒä¿®é¥°ç¬¦ã€‚<br>å¦‚â€strongâ€è¿™ä¸ªåç§°æ‰€ç¤ºï¼Œ__strongä¿®é¥°ç¬¦è¡¨ç¤ºå¯¹å¯¹è±¡çš„â€å¼ºå¼•ç”¨â€(æŒæœ‰å¯¹è±¡)ã€‚<br>æŒæœ‰å¼ºå¼•ç”¨çš„å˜é‡åœ¨è¶…å‡ºå…¶ä½œç”¨åŸŸæ—¶è¢«åºŸå¼ƒï¼Œéšç€å¼ºå¼•ç”¨çš„å¤±æ•ˆï¼Œå¼•ç”¨çš„å¯¹è±¡ä¼šéšä¹‹é‡Šæ”¾ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    /*</div><div class="line">     *  è‡ªå·±ç”Ÿæˆå¹¶æŒæœ‰å¯¹è±¡</div><div class="line">     */</div><div class="line">    id __strong obj = [[NSObject alloc] init];</div><div class="line">    /*</div><div class="line">     *  å› ä¸ºå˜é‡objä¸ºå¼ºå¼•ç”¨ï¼Œ</div><div class="line">     *  æ‰€ä»¥è‡ªå·±æŒæœ‰å¯¹è±¡</div><div class="line">     */</div><div class="line">&#125;</div><div class="line">    /*</div><div class="line">     *  å› ä¸ºå˜é‡objè¶…å‡ºå…¶ä½œç”¨åŸŸï¼Œå¼ºå¼•ç”¨å¤±æ•ˆï¼Œ</div><div class="line">     *  æ‰€ä»¥è‡ªåŠ¨çš„é‡Šæ”¾è‡ªå·±æŒæœ‰çš„å¯¹è±¡ã€‚</div><div class="line">     *  å¯¹è±¡çš„æ‰€æœ‰è€…ä¸å­˜åœ¨ï¼Œå› æ­¤åºŸå¼ƒè¯¥å¯¹è±¡ã€‚</div><div class="line">     */</div></pre></td></tr></table></figure>
<h5 id="2-1-2-weakä¿®é¥°ç¬¦"><a href="#2-1-2-weakä¿®é¥°ç¬¦" class="headerlink" title="2.1.2 __weakä¿®é¥°ç¬¦"></a>2.1.2 __weakä¿®é¥°ç¬¦</h5><p>å¤§å®¶åº”è¯¥éƒ½çŸ¥é“ï¼Œå¦‚æœåªæ˜¯ç”¨__strongä¿®é¥°ç¬¦çš„è¯å¿…ç„¶ä¼šå‘ç”Ÿâ€å¾ªç¯å¼•ç”¨â€çš„é—®é¢˜ã€‚<br>è€Œ__weakä¿®é¥°ç¬¦å°±å¯ä»¥é¿å…è¿™ä¸€é—®é¢˜ã€‚<br>__weakä¿®é¥°ç¬¦ä¸__strongä¿®é¥°ç¬¦ç›¸åï¼Œæä¾›â€å¼±å¼•ç”¨â€(ä¸æŒæœ‰å¯¹è±¡)ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    /*</div><div class="line">     *  è‡ªå·±ç”Ÿæˆå¹¶æŒæœ‰å¯¹è±¡</div><div class="line">     */</div><div class="line">    id __strong obj0 = [[NSObject alloc] init];</div><div class="line">    /*</div><div class="line">     *  å› ä¸ºå˜é‡objä¸ºå¼ºå¼•ç”¨ï¼Œ</div><div class="line">     *  æ‰€ä»¥è‡ªå·±æŒæœ‰å¯¹è±¡</div><div class="line">     */</div><div class="line">    id __weak obj1 = obj0;</div><div class="line">    /*</div><div class="line">     *  obj1å˜é‡æŒæœ‰ç”Ÿæˆå¯¹è±¡çš„å¼±å¼•ç”¨</div><div class="line">     */</div><div class="line">&#125;</div><div class="line">    /*</div><div class="line">     *  å› ä¸ºå˜é‡obj0è¶…å‡ºå…¶ä½œç”¨åŸŸï¼Œå¼ºå¼•ç”¨å¤±æ•ˆï¼Œ</div><div class="line">     *  æ‰€ä»¥è‡ªåŠ¨çš„é‡Šæ”¾è‡ªå·±æŒæœ‰çš„å¯¹è±¡ã€‚</div><div class="line">     *  å¯¹è±¡çš„æ‰€æœ‰è€…ä¸å­˜åœ¨ï¼Œå› æ­¤åºŸå¼ƒè¯¥å¯¹è±¡ã€‚</div><div class="line">     */</div></pre></td></tr></table></figure>
<p>__weakä¿®é¥°ç¬¦è¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹ã€‚åœ¨æŒæœ‰æŸå¯¹è±¡çš„å¼±å¼•ç”¨æ—¶ï¼Œ<br>è‹¥è¯¥å¯¹è±¡è¢«åºŸå¼ƒï¼Œåˆ™æ­¤å¼±å¼•ç”¨å°†è‡ªåŠ¨å¤±æ•ˆä¸”å¤„äºnilè¢«èµ‹å€¼çš„çŠ¶æ€ã€‚</p>
<h5 id="2-1-3-unsafe-unretainedä¿®é¥°ç¬¦ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰"><a href="#2-1-3-unsafe-unretainedä¿®é¥°ç¬¦ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰" class="headerlink" title="2.1.3 __unsafe_unretainedä¿®é¥°ç¬¦ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰"></a>2.1.3 __unsafe_unretainedä¿®é¥°ç¬¦ï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰</h5><p>__unsafe_unretainedä¿®é¥°ç¬¦æ­£å¦‚å…¶åunsafeæ‰€ç¤ºï¼Œæ˜¯ä¸å®‰å…¨çš„æ‰€æœ‰æƒä¿®é¥°ç¬¦ã€‚<br>å°½ç®¡ARCå¼çš„å†…å­˜ç®¡ç†æ˜¯ç¼–è¯‘å™¨çš„å·¥ä½œï¼Œä½†é™„æœ‰__unsafe_unretainedä¿®é¥°ç¬¦<br>çš„å˜é‡ä¸å±äºç¼–è¯‘å™¨çš„å†…å­˜ç®¡ç†å¯¹è±¡ã€‚è¿™ä¸€ç‚¹åœ¨ä½¿ç”¨æ—¶è¦æ³¨æ„ã€‚<br>é™„æœ‰__unsafe_unretainedä¿®é¥°ç¬¦çš„å˜é‡åŒé™„æœ‰__weakä¿®é¥°ç¬¦çš„å˜é‡ä¸€æ ·ï¼Œ<br>å› ä¸ºè‡ªå·±ç”Ÿæˆå¹¶æŒæœ‰çš„å¯¹è±¡ä¸èƒ½ç»§ç»­ä¸ºè‡ªå·±æ‰€ç”¨ï¼Œæ‰€ä»¥ç”Ÿæˆçš„å¯¹è±¡ä¼šç«‹å³è¢«é‡Šæ”¾ã€‚</p>
<p>æ³¨ï¼š__unsafe_unretainedä¿®é¥°ç¬¦åœ¨å¯¹è±¡è¢«åºŸå¼ƒæ—¶ä¸ä¼šä¸»åŠ¨èµ‹å€¼nilï¼Œæ‰€ä»¥ä¼šè®¿é—®åˆ°â€æ‚¬å‚æŒ‡é’ˆâ€ï¼Œå¯¼è‡´ç³»ç»Ÿåœ¨ä¸ªåˆ«è¿è¡Œæƒ…å†µä¸‹å´©æºƒã€‚</p>
<h5 id="2-1-4-autoreleasingä¿®é¥°ç¬¦ï¼ˆè™½ç„¶å¾ˆå°‘æ˜¾å¼é™„åŠ ï¼Œä½†å¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¼šä½¿ç”¨ï¼Œæ‰€ä»¥å¾ˆé‡è¦ï¼‰"><a href="#2-1-4-autoreleasingä¿®é¥°ç¬¦ï¼ˆè™½ç„¶å¾ˆå°‘æ˜¾å¼é™„åŠ ï¼Œä½†å¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¼šä½¿ç”¨ï¼Œæ‰€ä»¥å¾ˆé‡è¦ï¼‰" class="headerlink" title="2.1.4 __autoreleasingä¿®é¥°ç¬¦ï¼ˆè™½ç„¶å¾ˆå°‘æ˜¾å¼é™„åŠ ï¼Œä½†å¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¼šä½¿ç”¨ï¼Œæ‰€ä»¥å¾ˆé‡è¦ï¼‰"></a>2.1.4 __autoreleasingä¿®é¥°ç¬¦ï¼ˆè™½ç„¶å¾ˆå°‘æ˜¾å¼é™„åŠ ï¼Œä½†å¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¼šä½¿ç”¨ï¼Œæ‰€ä»¥å¾ˆé‡è¦ï¼‰</h5><p>ARCæ— æ•ˆæ—¶ä¼šåƒä¸‹é¢è¿™æ ·æ¥ä½¿ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/* ARCæ— æ•ˆ */</div><div class="line">NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];</div><div class="line">id obj = [[NSObject alloc] init];</div><div class="line">[obj autorelease];</div><div class="line">[pool drain];</div></pre></td></tr></table></figure>
<p>ARCæœ‰æ•ˆæ—¶ï¼Œè¯¥æºç ä¹Ÿèƒ½å†™æˆä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@autoreleasepool &#123;</div><div class="line">    id __autoreleasing obj = [[NSObject alloc] init];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œæ˜¾å¼çš„é™„åŠ __autoreleasingä¿®é¥°ç¬¦åŒæ˜¾å¼çš„é™„åŠ __strongä¿®é¥°ç¬¦ä¸€æ ·ç½•è§ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡å®ä¾‹æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆéæ˜¾å¼åœ°ä½¿ç”¨__autoreleasingä¿®é¥°ç¬¦ä¹Ÿå¯ä»¥ã€‚</p>
<p>1ã€ç¼–è¯‘å™¨ä¼šæ£€æŸ¥æ–¹æ³•åæ˜¯å¦ä»¥alloc/new/copy/mutableCopy å¼€å§‹ï¼Œ<br>å¦‚æœä¸æ˜¯åˆ™è‡ªåŠ¨å°†è¿”å›å€¼çš„å¯¹è±¡æ³¨å†Œåˆ°autoreleasepoolã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">@autoreleasepool &#123;  </div><div class="line">/*  </div><div class="line"> * å–å¾—éè‡ªå·±ç”Ÿæˆå¹¶æŒæœ‰çš„å¯¹è±¡  </div><div class="line"> */  </div><div class="line">id __strong obj = [NSMutableArray array];  </div><div class="line">/*  </div><div class="line"> * å› ä¸ºå˜é‡obj ä¸ºå¼ºå¼•ç”¨ï¼Œ  </div><div class="line"> * æ‰€ä»¥è‡ªå·±æŒæœ‰å¯¹è±¡ã€‚  </div><div class="line"> *  </div><div class="line"> * å¹¶ä¸”è¯¥å¯¹è±¡  </div><div class="line"> * ç”±ç¼–è¯‘å™¨åˆ¤æ–­å…¶æ–¹æ³•åå  </div><div class="line"> * è‡ªåŠ¨æ³¨å†Œåˆ°autoreleasepool  </div><div class="line"> */  </div><div class="line">&#125; </div><div class="line">/*  </div><div class="line"> * å› ä¸ºå˜é‡obj è¶…å‡ºå…¶ä½œç”¨åŸŸï¼Œå¼ºå¼•ç”¨å¤±æ•ˆï¼Œ  </div><div class="line"> * æ‰€ä»¥è‡ªåŠ¨é‡Šæ”¾è‡ªå·±æŒæœ‰çš„å¯¹è±¡ã€‚  </div><div class="line"> *  </div><div class="line"> * åŒæ—¶ï¼Œéšç€@autoreleasepool å—çš„ç»“æŸï¼Œ  </div><div class="line"> * æ³¨å†Œåˆ°autoreleasepool ä¸­çš„  </div><div class="line"> * æ‰€æœ‰å¯¹è±¡è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚  </div><div class="line"> *  </div><div class="line"> * å› ä¸ºå¯¹è±¡çš„æ‰€æœ‰è€…ä¸å­˜åœ¨ï¼Œæ‰€ä»¥åºŸå¼ƒå¯¹è±¡ã€‚  </div><div class="line"> */</div></pre></td></tr></table></figure>
<p>2ã€ç”±äºreturnä½¿å¾—å¯¹è±¡å˜é‡è¶…å‡ºå…¶ä½œç”¨åŸŸï¼Œæ‰€ä»¥è¯¥å¼ºå¼•ç”¨å¯¹åº”çš„è‡ªå·±æŒæœ‰çš„å¯¹è±¡ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾ï¼Œ<br>ä½†è¯¥å¯¹è±¡ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†å…¶æ³¨å†Œåˆ°autoreleasepoolã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+ (id) array  </div><div class="line">&#123;  </div><div class="line">	id obj = [[NSMutableArray alloc] init];  </div><div class="line">	return obj;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3ã€ä»¥ä¸‹ä¸ºä½¿ç”¨__weakä¿®é¥°ç¬¦çš„ä¾‹å­ã€‚è™½ç„¶__weakä¿®é¥°ç¬¦æ˜¯ä¸ºäº†é¿å…å¾ªç¯å¼•ç”¨è€Œä½¿ç”¨çš„ï¼Œ<br>ä½†åœ¨è®¿é—®é™„æœ‰__weakä¿®é¥°ç¬¦çš„å˜é‡æ—¶ï¼Œå®é™…ä¸Šå¿…å®šè¦è®¿é—®æ³¨å†Œåˆ°autoreleasepoolçš„å¯¹è±¡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id __weak obj1 = obj0;  </div><div class="line">NSLog(@&quot;class=%@&quot;, [obj1 class]);</div></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æºä»£ç ä¸æ­¤ç›¸åŒï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">id __weak obj1 = obj0;  </div><div class="line">id __autoreleasing tmp = obj1;  </div><div class="line">NSLog(@&quot;class=%@&quot;, [tmp class]);</div></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆåœ¨è®¿é—®é™„æœ‰__weakä¿®é¥°ç¬¦çš„å˜é‡æ—¶å¿…é¡»è®¿é—®æ³¨å†Œåˆ°autoreleasepool çš„å¯¹è±¡å‘¢ï¼Ÿ<br>è¿™æ˜¯å› ä¸º__weakä¿®é¥°ç¬¦åªæŒæœ‰å¯¹è±¡çš„å¼±å¼•ç”¨ï¼Œè€Œåœ¨è®¿é—®å¼•ç”¨å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œè¯¥å¯¹è±¡æœ‰å¯èƒ½è¢«åºŸå¼ƒã€‚<br>å¦‚æœæŠŠè¦è®¿é—®çš„å¯¹è±¡æ³¨å†Œåˆ°autoreleasepoolä¸­ï¼Œé‚£ä¹ˆåœ¨@autoreleasepoolå—ç»“æŸä¹‹å‰éƒ½èƒ½ç¡®ä¿è¯¥å¯¹è±¡å­˜åœ¨ã€‚<br>å› æ­¤ï¼Œåœ¨ä½¿ç”¨é™„æœ‰__weakä¿®é¥°ç¬¦çš„å˜é‡æ—¶å°±å¿…å®šè¦ä½¿ç”¨æ³¨å†Œåˆ°autoreleasepoolä¸­çš„å¯¹è±¡ã€‚</p>
<p>4ã€æœ€åä¸€ä¸ªå¯éæ˜¾å¼åœ°ä½¿ç”¨__autoreleasingä¿®é¥°ç¬¦çš„ä¾‹å­ï¼ŒåŒå‰é¢è®²è¿°çš„id obj å’Œid __strongobj å®Œå…¨ä¸€æ ·ã€‚</p>
<p>é‚£ä¹ˆid çš„æŒ‡é’ˆid <em>obj åˆå¦‚ä½•å‘¢ï¼Ÿå¯ä»¥ç”±id __strong obj çš„ä¾‹å­ç±»æ¨å‡ºid __strong</em>obj å—ï¼Ÿ</p>
<p>å…¶å®ï¼Œæ¨å‡ºæ¥çš„æ˜¯id __autoreleasing <em>objã€‚<br>åŒæ ·åœ°ï¼Œå¯¹è±¡çš„æŒ‡é’ˆNSObject **obj ä¾¿æˆä¸ºäº†NSObject </em> __autoreleasing *objã€‚<br>ä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (BOOL) performOperationWithError:(NSError **)error;</div></pre></td></tr></table></figure>
<p>åŒå‰é¢è®²è¿°çš„ä¸€æ ·ï¼Œidçš„æŒ‡é’ˆæˆ–å¯¹è±¡çš„æŒ‡é’ˆä¼šé»˜è®¤é™„åŠ ä¸Š__autoreleasing ä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥ç­‰åŒäºä»¥ä¸‹æºä»£ç ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (BOOL) performOperationWithError:(NSError * __autoreleasing *)error;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„æºä»£ç ä¼šäº§ç”Ÿç¼–è¯‘å™¨é”™è¯¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">NSError *error = nil;  </div><div class="line">NSError **pError = &amp;error; </div><div class="line">èµ‹å€¼ç»™å¯¹è±¡æŒ‡é’ˆæ—¶ï¼Œæ‰€æœ‰æƒä¿®é¥°ç¬¦å¿…é¡»ä¸€è‡´ã€‚</div><div class="line">error: initializing &apos;NSError *__autoreleasing *&apos; with an expression  </div><div class="line">of type &apos;NSError *__strong *&apos; changes retain/release properties of pointer  </div><div class="line">NSError **pError = &amp;error;  </div><div class="line">        ^           ~~~~~~ </div><div class="line">æ­¤æ—¶ï¼Œå¯¹è±¡æŒ‡é’ˆå¿…é¡»é™„åŠ __strong ä¿®é¥°ç¬¦ã€‚</div><div class="line">NSError *error = nil;  </div><div class="line">NSError * __strong *pError = &amp;error;  </div><div class="line">/* ç¼–è¯‘æ­£å¸¸ */</div></pre></td></tr></table></figure>
<h4 id="2-2-å±æ€§"><a href="#2-2-å±æ€§" class="headerlink" title="2.2 å±æ€§"></a>2.2 å±æ€§</h4><p><img src="http://upload\-images.jianshu.io/upload\_images/1787055\-83eef1a8a0494bb1.jpg?imageMogr2/auto\-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>1.å¦‚ä½•é˜²æ­¢blockçš„å†…å­˜æ³„æ¼ï¼Ÿ </p>
<ul>
<li>ç­”ï¼šä½¿ç”¨__weakå°†selfå¼±å¼•ç”¨</li>
</ul>
<p>2.é‚£ä¸ºä»€ä¹ˆåˆè¦åœ¨blockä¸­å°†selfä½¿ç”¨__strongå¼ºå¼•ç”¨å‘¢ï¼Ÿ</p>
<ul>
<li>ç­”æ¡ˆä¸€ï¼šé˜²æ­¢selfåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¢«é‡Šæ”¾æ‰ã€‚ï¼ˆæœªè¯»æœ¬ä¹¦å‰çš„ç†è§£ï¼‰</li>
<li>ç­”æ¡ˆäºŒï¼šæ—¢ç„¶ä½¿ç”¨__weakä¿®é¥°çš„å˜é‡åœ¨ä½¿ç”¨æ—¶ä¼šè‡ªåŠ¨åŠ å…¥åˆ°è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œå°±ä¿è¯äº†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸ä¼šè¢«é‡Šæ”¾æ‰ã€‚åŒæ—¶ï¼Œç”±äºä½¿ç”¨__weakä¿®é¥°çš„å˜é‡åœ¨æ¯æ¬¡ä½¿ç”¨æ—¶éƒ½ä¼šåŠ å…¥åˆ°ä¸€ä¸ªè‡ªåŠ¨é‡Šæ”¾æ± ä¸­ï¼Œæ‰€ä»¥ä¼šæ¶ˆè€—èµ„æºï¼Œä½†æ˜¯ä½¿ç”¨__strongå¼ºå¼•ç”¨ä¸€ä¸‹å°±ä¸ä¼šäº†ã€‚ï¼ˆè¯»æœ¬ä¹¦åçš„ç†è§£ï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹ï¼Œå¸Œæœ›å„ä½å¤§ç¥æŒ‡ç‚¹ä¸€ä¸‹ï¼‰</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­ï¼š&quot;&gt;&lt;a href=&quot;#å¯¼è¯­ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­ï¼š&quot;&gt;&lt;/a&gt;å¯¼è¯­ï¼š&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;é¡¾åæ€ä¹‰ï¼Œè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼ŒAutomatic Reference Countingï¼‰æ˜¯æŒ‡å†…å­˜ç®¡ç†ä¸­å¯¹
    
    </summary>
    
      <category term="è¯»ä¹¦ç¬”è®°" scheme="http://blog.qczyl.club/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>Hexo+GitHub Pagesæ­å»ºä¸ªäººåšå®¢</title>
    <link href="http://blog.qczyl.club/2017/06/28/Hexo+GitHub%20Pages%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>http://blog.qczyl.club/2017/06/28/Hexo+GitHub Pagesæ­å»ºä¸ªäººåšå®¢/</id>
    <published>2017-06-27T16:00:00.000Z</published>
    <updated>2017-06-30T08:54:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦è®°å½•è‡ªå·±åœ¨æ­å»ºä¸ªäººåšå®¢çš„è®°å½•ï¼Œä»¥åŠå·¥ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚</p>
<p>åºŸè¯å°‘è¯´ï¼Œä¸Šå¹²è´§ã€‚</p>
<h4 id="1-GitHubä»“åº“"><a href="#1-GitHubä»“åº“" class="headerlink" title="1. GitHubä»“åº“"></a>1. GitHubä»“åº“</h4><p>ç”±äºæœ¬åšå®¢çš„æ­å»ºæ˜¯åŸºäºHexo + GitHub Pageçš„ï¼Œæ‰€ä»¥GitHubè´¦å·æ˜¯å¿…ä¸å¯å°‘çš„ã€‚<br>ç›¸ä¿¡å¤§å®¶åº”è¯¥ä¹Ÿéƒ½æœ‰è‡ªå·±çš„è´¦å·äº†ï¼Œæ²¡æœ‰çš„èµ¶ç´§å»æ³¨å†Œä¸€ä¸ªå§ï¼</p>
<p>æ³¨ï¼šè´¦å·çš„usernameä¼šå½±å“ä½ çš„åŸŸåå“¦ï¼</p>
<p>æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªä»“åº“æ¥å­˜å‚¨æˆ‘ä»¬çš„åšå®¢å†…å®¹ï¼Œç‚¹å‡»é¦–é¡µä»»æ„ä½ç½®å‡ºç°çš„<code>New repository</code>æŒ‰é’®åˆ›å»ºä»“åº“ï¼ŒRespository nameä¸­çš„<code>username</code>.github.ioçš„<code>username</code>ä¸€å®šä¸å‰é¢çš„Owner ä¸€è‡´ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-137e556b3f8107e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="åˆ›å»ºä»“åº“"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-b664fcba6dbd2869.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="éœ€è¦ä¿æŒusernameä¸€è‡´"></p>
<h4 id="2-å®‰è£…Hexo"><a href="#2-å®‰è£…Hexo" class="headerlink" title="2. å®‰è£…Hexo"></a>2. å®‰è£…Hexo</h4><blockquote>
<p><a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="external">Hexo</a> æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚</p>
</blockquote>
<h6 id="2-1-å®‰è£…brewï¼ˆå¦‚æœå·²å®‰è£…ï¼Œè¯·å¿½ç•¥ï¼‰"><a href="#2-1-å®‰è£…brewï¼ˆå¦‚æœå·²å®‰è£…ï¼Œè¯·å¿½ç•¥ï¼‰" class="headerlink" title="2.1 å®‰è£…brewï¼ˆå¦‚æœå·²å®‰è£…ï¼Œè¯·å¿½ç•¥ï¼‰"></a>2.1 å®‰è£…brewï¼ˆå¦‚æœå·²å®‰è£…ï¼Œè¯·å¿½ç•¥ï¼‰</h6><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ /usr/bin/ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></div></pre></td></tr></table></figure>
<h6 id="2-2-å®‰è£…git"><a href="#2-2-å®‰è£…git" class="headerlink" title="2.2 å®‰è£…git"></a>2.2 å®‰è£…git</h6><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install git</div></pre></td></tr></table></figure>
<h6 id="2-3-å®‰è£…nodejs"><a href="#2-3-å®‰è£…nodejs" class="headerlink" title="2.3 å®‰è£…nodejs"></a>2.3 å®‰è£…nodejs</h6><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ä½¿ç”¨brewå®‰è£…nvm</span></div><div class="line">$ brew install nvm</div><div class="line"></div><div class="line"><span class="comment"># vim ~/.bash_profileåå¢åŠ ä¸‹é¢è¿™ä¸¤è¡Œ</span></div><div class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">"<span class="variable">$HOME</span>/.nvm"</span></div><div class="line"><span class="built_in">source</span> $(brew --prefix nvm)/nvm.sh</div><div class="line"></div><div class="line"><span class="comment"># .bash_profileç«‹å³ç”Ÿæ•ˆ</span></div><div class="line">$ <span class="built_in">source</span> ~/.bash_profile</div><div class="line"></div><div class="line"><span class="comment"># ä½¿ç”¨nvmå®‰è£…node.js</span></div><div class="line">$ nvm install node</div></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ ¡éªŒï¼ˆå»ºè®®é‡å¯ç»ˆç«¯åæ ¡éªŒï¼‰</span></div><div class="line">$ nvm --version</div><div class="line">0.33.2</div><div class="line">$ node -v</div><div class="line">v8.1.2</div><div class="line">$ npm -v</div><div class="line">5.0.3</div><div class="line">$ nvm list</div><div class="line">-&gt;       v8.1.2</div><div class="line">default -&gt; node (-&gt; v8.1.2)</div><div class="line">node -&gt; stable (-&gt; v8.1.2) (default)</div><div class="line">stable -&gt; 8.1 (-&gt; v8.1.2) (default)</div><div class="line">iojs -&gt; N/A (default)</div><div class="line">lts/* -&gt; lts/boron (-&gt; N/A)</div><div class="line">lts/argon -&gt; v4.8.3 (-&gt; N/A)</div><div class="line">lts/boron -&gt; v6.11.0 (-&gt; N/A)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">å¦‚æœæ ¡éªŒæˆåŠŸï¼Œå¯å¿½ç•¥æ­¤æ­¥éª¤ï¼</div><div class="line">å¦‚æœæ ¡éªŒå¤±è´¥ï¼Œåˆ™æœ‰å¾ˆå¤§çš„å¯èƒ½æ˜¯æœ¬åœ°çš„nodeï¼Œnvmï¼Œnpmç‰ˆæœ¬å‡ºç°é—®é¢˜ã€‚</div><div class="line">å¯å°è¯•ä¸€ä¸‹æ–¹æ³•è§£å†³ï¼š</div><div class="line">1ã€å¸è½½è€ç‰ˆæœ¬çš„node</div><div class="line">    å¦‚æœæ˜¯ä»brewå®‰è£…çš„, è¿è¡Œbrew uninstall node</div><div class="line">    åˆ é™¤~/ç›®å½•ä¸‹æ‰€æœ‰nodeå’Œnode_modules</div><div class="line">    åˆ é™¤/usr/local/libä¸­çš„æ‰€æœ‰nodeå’Œnode_modules</div><div class="line">    åˆ é™¤/usr/local/libä¸­çš„æ‰€æœ‰nodeå’Œnode_modulesçš„æ–‡ä»¶å¤¹</div><div class="line">    åœ¨/usr/local/binä¸­,åˆ é™¤æ‰€æœ‰nodeçš„å¯æ‰§è¡Œæ–‡ä»¶(nodeå’Œnpm)</div><div class="line">    </div><div class="line">    æ‰‹åŠ¨åˆ é™¤æ–‡ä»¶ï¼Œæ•´ç†æˆè„šæœ¬æ˜¯è¿™ä¸ªæ ·å­:</div><div class="line">    sudo rm -rf ~/.npm</div><div class="line">    sudo rm -rf ~/node_modules</div><div class="line">    sudo rm -rf ~/.node-gyp</div><div class="line">    sudo rm /usr/local/bin/node</div><div class="line">    sudo rm /usr/local/bin/npm</div><div class="line">    sudo rm /usr/local/lib/dtrace/node.d</div><div class="line"></div><div class="line">2ã€å¸è½½è€ç‰ˆæœ¬.nvm</div><div class="line">    æˆ‘ä¹‹å‰æ˜¯æ‰‹åŠ¨å®‰è£…çš„nvmï¼Œnvmçš„ç›®å½•ç»“æ„æ¯”è¾ƒç®€å•ï¼Œåˆ é™¤è¿™ä¸‰ä¸ªå°±å¯ä»¥äº†</div><div class="line">    # åˆ é™¤åè¯·ç¡®è®¤åˆ é™¤å¹²å‡€äº†</div><div class="line">    rm -rf ~/.nvm</div><div class="line">    rm -rf ~/.npm</div><div class="line">    rm -rf ~/.bower</div><div class="line">    </div><div class="line">    è¿˜éœ€è¦åˆ é™¤ä¸‹.bash_profileæ–‡ä»¶ä¸­çš„é…ç½®(ç”¨brewå®‰è£…åè¿˜éœ€è¦é‡æ–°åŠ ä¸Šï¼Œä½†ä¸å¤ªä¸€æ ·)</div><div class="line">    export NVM_DIR=&quot;$HOME/.nvm&quot;</div><div class="line">    source $(brew --prefix nvm)/nvm.sh</div><div class="line"></div><div class="line">3ã€æ¸…é™¤å¹²å‡€åç¡®è®¤(é‡å¯ç»ˆç«¯åæµ‹è¯•)</div><div class="line">    &quot;é‡å¯ç»ˆç«¯&quot;åï¼ŒæŒ¨ä¸ªæµ‹è¯•å‡ ä¸ªå‘½ä»¤åº”è¯¥éƒ½æ˜¯æ‰¾ä¸åˆ°ï¼Œæ‰ç®—æ˜¯æ­£ç¡®çš„:</div><div class="line">    nvm</div><div class="line">    node</div><div class="line">    npm</div><div class="line">    </div><div class="line">4ã€é‡æ–°ä» 2.3å®‰è£…nodejs å¼€å§‹æ‰§è¡Œ</div></pre></td></tr></table></figure>
<h6 id="2-4-å®‰è£…Hexo"><a href="#2-4-å®‰è£…Hexo" class="headerlink" title="2.4 å®‰è£…Hexo"></a>2.4 å®‰è£…Hexo</h6><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ npm install -g hexo --no-optional</div><div class="line"><span class="comment"># å®‰è£…hexo-deployer-gitè‡ªåŠ¨éƒ¨ç½²å‘å¸ƒå·¥å…·</span></div><div class="line">$ npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># å®‰è£…Hexoæ—¶ï¼Œä¸æ·»åŠ --no-optionalå¯èƒ½ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼Œä½†ä¸å½±å“ä½¿ç”¨ï¼Œå»ºè®®æ·»åŠ </span></div><div class="line">&#123; [Error: Cannot find module <span class="string">'./build/Release/DTraceProviderBindings'</span>] code: <span class="string">'MODULE_NOT_FOUND'</span> &#125;</div><div class="line">&#123; [Error: Cannot find module <span class="string">'./build/default/DTraceProviderBindings'</span>] code: <span class="string">'MODULE_NOT_FOUND'</span> &#125;</div><div class="line">&#123; [Error: Cannot find module <span class="string">'./build/Debug/DTraceProviderBindings'</span>] code: <span class="string">'MODULE_NOT_FOUND'</span> &#125;</div><div class="line"></div><div class="line"><span class="comment"># å¦‚æœæ·»åŠ --no-optionalä»æŠ¥ä¸Šè¿°é”™è¯¯çš„è¯ï¼Œå¯ä»¥å°è¯•ä¸‹é¢çš„æ–¹æ³•ï¼Œé‡è£… hexo-cli</span></div><div class="line">$ npm uninstall hexo-cli -g</div><div class="line">$ npm install hexo-cli -g</div></pre></td></tr></table></figure>
<p>æ‰€æœ‰å¿…é¡»å·¥å…·å·²ç»å®‰è£…å®Œæˆï¼Œä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥ç”Ÿæˆåšå®¢ï¼Œä¸Šä¼ è‡³æˆ‘ä»¬çš„Github ä»“åº“äº†ã€‚</p>
<h4 id="3-ç¼–å†™ï¼Œå‘å¸ƒ"><a href="#3-ç¼–å†™ï¼Œå‘å¸ƒ" class="headerlink" title="3. ç¼–å†™ï¼Œå‘å¸ƒ"></a>3. ç¼–å†™ï¼Œå‘å¸ƒ</h4><blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç”¨Hexoåˆå§‹åŒ–ä¸€ä¸ªåšå®¢ï¼Œç„¶åæ›´æ”¹ä¸€äº›è‡ªå®šä¹‰çš„é…ç½®ï¼Œæˆ–è€…åŠ ä¸Šè‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ï¼Œå†™ä¸Šç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œç„¶åå‘å¸ƒåˆ°è‡ªå·±çš„ä¸ªäººGithubç½‘ç«™(username.github.io)ã€‚</p>
</blockquote>
<h6 id="3-1-åˆ›å»ºåšå®¢"><a href="#3-1-åˆ›å»ºåšå®¢" class="headerlink" title="3.1 åˆ›å»ºåšå®¢"></a>3.1 åˆ›å»ºåšå®¢</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># æ‰§è¡ŒæˆåŠŸåï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºå‡ºä¸€ä¸ªåä¸º blog çš„æ–‡ä»¶å¤¹ã€‚</div><div class="line">$ hexo init blog</div></pre></td></tr></table></figure>
<h6 id="3-2-æ›´æ”¹é…ç½®"><a href="#3-2-æ›´æ”¹é…ç½®" class="headerlink" title="3.2 æ›´æ”¹é…ç½®"></a>3.2 æ›´æ”¹é…ç½®</h6><p>1.ä¸»é¢˜å®‰è£…ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ä¸ºäº†ä½¿åšå®¢ä¸å¤ªéš¾çœ‹ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªä¸»é¢˜ï¼Œåˆ‡æ¢è‡³åˆšåˆšç”Ÿæˆçš„blogç›®å½•ï¼Œå®‰è£…ä¸»é¢˜</span></div><div class="line">$ <span class="built_in">cd</span> blog</div><div class="line">$ git <span class="built_in">clone</span> https://github.com/iissnan/hexo-theme-next themes/next</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰<a href="https://hexo.io/themes/" target="_blank" rel="external">æ›´å¤šä¸»é¢˜</a>ä¾›ä½ é€‰æ‹©ã€‚å–µç¥çš„ä¸»é¢˜åœ¨<a href="https://github.com/monniya/hexo-theme-new-vno" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<p>2.åŸºç¡€é…ç½®:</p>
<p>æ‰“å¼€æ–‡ä»¶ä½ç½®blog/_config.ymlä¿®æ”¹å‡ ä¸ªé”®å€¼å¯¹ï¼Œä¸‹é¢æŠŠå‡ ä¸ªå¿…é¡»è®¾ç½®çš„åˆ—å‡ºæ¥æŒ‰éœ€æ±‚ä¿®æ”¹ï¼Œè®°å¾—ä¿å­˜ï¼Œ è¿˜æœ‰æ³¨æ„é…ç½®çš„é”®å€¼ä¹‹é—´ä¸€å®šè¦æœ‰ç©ºæ ¼ã€‚<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">æ›´å¤šè®¾ç½®</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">title: qczyl&apos;s club     //ä½ åšå®¢çš„åå­—</div><div class="line">author: qczyl           //ä½ çš„åå­—</div><div class="line">language: zh-Hans       //è¯­è¨€ ä¸­æ–‡</div><div class="line">theme: next             //åˆšåˆšå®‰è£…çš„ä¸»é¢˜åç§°</div><div class="line">deploy:</div><div class="line">  type: git             //ä½¿ç”¨Git å‘å¸ƒ</div><div class="line">  repo: https://github.com/qcyl/qcyl.github.io.git    // åˆšåˆ›å»ºçš„Githubä»“åº“</div></pre></td></tr></table></figure>
<p>3.ä¸»é¢˜é…ç½®:</p>
<p>ä¸»é¢˜é…ç½®æ–‡ä»¶åœ¨blog/themes/next/_config.ymlä¸­ä¿®æ”¹ï¼Œè¿™é‡Œç•¥è¿‡ã€‚<a href="http://theme-next.iissnan.com/getting-started.html#theme-settings" target="_blank" rel="external">è®¾ç½®è¯¦æƒ…</a></p>
<h6 id="3-3-å†™æ–‡ç« "><a href="#3-3-å†™æ–‡ç« " class="headerlink" title="3.3 å†™æ–‡ç« "></a>3.3 å†™æ–‡ç« </h6><p>æ‰€æœ‰åŸºç¡€æ¡†æ¶éƒ½å·²ç»åˆ›å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥å¯ä»¥å¼€å§‹å†™ä½ çš„ç¬¬ä¸€ç¯‡åšå®¢äº†ã€‚<br>åœ¨blog/source/_postsä¸‹åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªåšå®¢å§ï¼Œ<br>ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºFirstNight.mdçš„æ–‡ä»¶ï¼Œç”¨Markdownå¤§è‚†å‘æŒ¥å§ï¼Œæ³¨æ„ä¿å­˜ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">å¦‚ï¼š</div><div class="line">---</div><div class="line">title: First Night</div><div class="line">---</div><div class="line">&gt; æˆ‘æœ‰ä¸€å¤´**å°æ¯›é©´**ï¼Œå¯æ˜¯æˆ‘ä»æ¥éƒ½ä¸éª‘ã€‚</div></pre></td></tr></table></figure>
<h6 id="3-4-æµ‹è¯•"><a href="#3-4-æµ‹è¯•" class="headerlink" title="3.4 æµ‹è¯•"></a>3.4 æµ‹è¯•</h6><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo s</div></pre></td></tr></table></figure>
<p>æµ‹è¯•æœåŠ¡å¯åŠ¨ï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<a href="https://localhost:4000" target="_blank" rel="external">https://localhost:4000</a> è®¿é—®äº†ã€‚</p>
<h6 id="3-5-å‘å¸ƒ"><a href="#3-5-å‘å¸ƒ" class="headerlink" title="3.5 å‘å¸ƒ"></a>3.5 å‘å¸ƒ</h6><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</div></pre></td></tr></table></figure>
<p>å¦‚æœè¿™æ˜¯ä½ çš„ç¬¬ä¸€æ¬¡ï¼Œç»ˆç«¯ä¼šè®©ä½ è¾“å…¥Github çš„é‚®ç®±å’Œå¯†ç ï¼Œæ­£ç¡®è¾“å…¥åï¼Œéªšç­‰ç‰‡åˆ»ï¼Œå°±ä¼šæŠŠä½ çš„åšå®¢ä¸Šä¼ è‡³Github äº†ã€‚ä»¥ååœ¨æ¯æ¬¡æŠŠåšå®¢å†™å®Œåï¼Œæ‰§è¡Œä¸€ä¸‹è¿™ä¸ªå‘½ä»¤å°±å¯ä»¥ç›´æ¥å‘å¸ƒäº†ï¼Œç°å¸¸è‹èƒ¡ã€‚</p>
<h4 id="åˆ°è¿™é‡Œï¼Œä½ çš„åšå®¢å·²ç»å®Œæˆäº†ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥-http-qcyl-github-io-å°±èƒ½å¤Ÿè®¿é—®äº†ã€‚"><a href="#åˆ°è¿™é‡Œï¼Œä½ çš„åšå®¢å·²ç»å®Œæˆäº†ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥-http-qcyl-github-io-å°±èƒ½å¤Ÿè®¿é—®äº†ã€‚" class="headerlink" title="åˆ°è¿™é‡Œï¼Œä½ çš„åšå®¢å·²ç»å®Œæˆäº†ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://qcyl.github.io å°±èƒ½å¤Ÿè®¿é—®äº†ã€‚"></a>åˆ°è¿™é‡Œï¼Œä½ çš„åšå®¢å·²ç»å®Œæˆäº†ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <a href="http://qcyl.github.io" target="_blank" rel="external">http://qcyl.github.io</a> å°±èƒ½å¤Ÿè®¿é—®äº†ã€‚</h4><hr>
<blockquote>
<p>å¦‚æœä½ è¿˜å¸Œæœ›å°†åšå®¢ç»‘å®šåˆ°è‡ªå·±çš„ä¸ªäººåŸŸåä¸‹ï¼Œæå‡ä¸€ä¸‹é€¼æ ¼ï¼Œ<br>é‚£ä¹ˆè¯·æ¥ç€å¾€ä¸‹çœ‹ï¼Œå¦‚æœæš‚æ—¶ä¸éœ€è¦çš„è¯ï¼Œä»¥ä¸‹çš„å†…å®¹å¯æš‚æ—¶å¿½ç•¥ã€‚</p>
</blockquote>
<h4 id="4-ç»‘å®šä¸ªäººåŸŸå"><a href="#4-ç»‘å®šä¸ªäººåŸŸå" class="headerlink" title="4.ç»‘å®šä¸ªäººåŸŸå"></a>4.ç»‘å®šä¸ªäººåŸŸå</h4><h6 id="4-1-è´­ä¹°åŸŸå"><a href="#4-1-è´­ä¹°åŸŸå" class="headerlink" title="4.1 è´­ä¹°åŸŸå"></a>4.1 è´­ä¹°åŸŸå</h6><p>å¦‚æœä½ è¿˜æ²¡æœ‰ä¸ªäººåŸŸåï¼Œå¯å‰å¾€<a href="https://wanwang.aliyun.com/?utm_content=se_96657&amp;gclid=Cj0KEQjwhMjKBRDjxb31j-aesI4BEiQA7ivN-AkOk2kYl2zH2OJBcrIlT1Zb67lF3zcsOg-tTn5UkjkaAsWb8P8HAQ" target="_blank" rel="external">ä¸‡ç½‘</a>è¿›è¡Œè´­ä¹°ã€‚</p>
<h6 id="4-2-åˆ›å»º-CNAME-æ–‡ä»¶"><a href="#4-2-åˆ›å»º-CNAME-æ–‡ä»¶" class="headerlink" title="4.2 åˆ›å»º CNAME æ–‡ä»¶"></a>4.2 åˆ›å»º CNAME æ–‡ä»¶</h6><ol>
<li>åˆ›å»º CNAME æ–‡ä»¶ï¼ˆæ³¨æ„æ–‡ä»¶åå¤§å†™ï¼Œä¸”æ²¡æœ‰æ‰©å±•åï¼‰</li>
<li>å†™å…¥éœ€è¦ç»‘å®šçš„åŸŸåï¼Œä¾‹ï¼šblog.qczyl.club</li>
<li>å°† CNAME æ–‡ä»¶æ”¾åˆ°blog/theme/next/sourceç›®å½•ä¸‹</li>
<li>æ‰§è¡Œ$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo d å‘å¸ƒåˆ°github</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">æ³¨: 1. åŸŸåå‰ä¸éœ€è¦æ·»åŠ  http è¿™æ ·çš„åè®®</div><div class="line">    2. å¦‚æœéœ€è¦ç»‘å®šçš„åŸŸåä¸º â€˜www.qczyl.clubâ€™,</div><div class="line">    å¯çœç•¥wwwï¼Œç›´æ¥å†™ä¸º â€˜qczyl.clubâ€™ï¼Œ</div><div class="line">    Github Pagesä¼šè‡ªåŠ¨å°†å…¶é‡å®šå‘åˆ° â€˜www.qczyl.clubâ€™ ä¸Š</div><div class="line">    3. CNAMEæ–‡ä»¶éœ€è¦æ”¾åˆ°å½“å‰ä½¿ç”¨ä¸»é¢˜çš„sourceç›®å½•ä¸‹</div></pre></td></tr></table></figure>
<h6 id="4-3-æ·»åŠ -CNAME-è®°å½•"><a href="#4-3-æ·»åŠ -CNAME-è®°å½•" class="headerlink" title="4.3 æ·»åŠ  CNAME è®°å½•"></a>4.3 æ·»åŠ  CNAME è®°å½•</h6><p>ç™»å½•é˜¿é‡Œäº‘ç®¡ç†æ§åˆ¶å°ï¼Œé€‰æ‹©äº‘è§£æDNSï¼Œç»™å½“å‰åŸŸåæ–°å¢ä¸€æ¡CNAMEè®°å½•ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-f14b3852417588e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="äº‘è§£æDNS"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-2e58e6931f9f94d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ·»åŠ ä¸€æ¡CNAMEè®°å½•"></p>
<pre><code>æ³¨ï¼š1.å¦‚æœä½ ç»‘å®šçš„åŸŸåä¸ºwww.***,åˆ™ä¸»æœºè®°å½•ä¸ºwwwï¼Œæˆ‘è¿™é‡Œä¸ºblog
    2.è®°å½•å€¼ä¸ºä½ ä¸ªäººçš„github pagesåœ°å€ï¼Œå³username.github.io
</code></pre><p>å®Œæˆä»¥ä¸Šè¿™äº›æ­¥éª¤åï¼Œç™»å½•åˆ°ä½ çš„githubä»“åº“ï¼ŒæŸ¥çœ‹GitHub Pagesï¼Œæ˜¾ç¤ºä¸ºä½ ç»‘å®šçš„åŸŸåï¼Œå¹¶ä¸”æ‰“äº†å¯¹å‹¾ï¼Œåˆ™ç»‘å®šæˆåŠŸï¼Œç„¶åå°±å¯åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä½ è‡ªå·±çš„åŸŸåè®¿é—®äº†ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-43ce81f9820358fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="è¿›å…¥ä»“åº“ï¼Œé€‰æ‹©settings"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/1787055-24e60c8d9c33c7f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æŸ¥çœ‹GitHub Pages"></p>
<h3 id="å‚è€ƒæ–‡ç« ï¼š"><a href="#å‚è€ƒæ–‡ç« ï¼š" class="headerlink" title="å‚è€ƒæ–‡ç« ï¼š"></a>å‚è€ƒæ–‡ç« ï¼š</h3><ol>
<li><a href="http://www.jianshu.com/p/4eaddcbe4d12" target="_blank" rel="external">5åˆ†é’Ÿ æ­å»ºå…è´¹ä¸ªäººåšå®¢</a></li>
<li><a href="http://linyehui.me/2016/03/03/reinstall-nodejs-on-osx/" target="_blank" rel="external">Mac OSXä¸‹é‡è£…node.js</a></li>
<li><a href="https://kikoroc.com/2016/05/04/resolve-hexo-DTraceProviderBindings-MODULE-NOT-FOUND.html" target="_blank" rel="external">è§£å†³hexoç¥çƒ¦çš„DTraceProviderBindings MODULE_NOT_FOUND</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä¸»è¦è®°å½•è‡ªå·±åœ¨æ­å»ºä¸ªäººåšå®¢çš„è®°å½•ï¼Œä»¥åŠå·¥ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åºŸè¯å°‘è¯´ï¼Œä¸Šå¹²è´§ã€‚&lt;/p&gt;
&lt;h4 id=&quot;1-GitHubä»“åº“&quot;&gt;&lt;a href=&quot;#1-GitHubä»“åº“&quot; class=&quot;headerlink&quot; title=&quot;1. GitHubä»“åº“&quot;&gt;&lt;/
    
    </summary>
    
      <category term="æ‚å­¦" scheme="http://blog.qczyl.club/categories/%E6%9D%82%E5%AD%A6/"/>
    
    
  </entry>
  
</feed>
